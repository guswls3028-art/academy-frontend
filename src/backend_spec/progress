PROGRESS DOMAIN
FRONTEND COMPLETE CONTRACT SPEC (100%)

ê¸°ì¤€: apps/domains/progress ì „ì²´ ì½”ë“œ
ìƒíƒœ: LOCKED / FINAL
ëª©ì : í”„ë¡ íŠ¸ê°€ ë°±ì—”ë“œì— ì§ˆë¬¸í•˜ì§€ ì•Šê³  êµ¬í˜„ ê°€ëŠ¥

0. ë„ë©”ì¸ ëª©ì  (ê°€ì¥ ì¤‘ìš”)
progress ë„ë©”ì¸ì€ ë¬´ì—‡ì„ í•˜ëŠ”ê°€?

results / homework_results / submissionsì—ì„œ ìƒì„±ëœ â€œì‚¬ì‹¤â€ì„
ğŸ‘‰ ì„¸ì…˜ ë‹¨ìœ„ / ê°•ì˜ ë‹¨ìœ„ë¡œ ì§‘ê³„Â·íŒì •Â·ìœ„í—˜ ë¶„ì„ í•˜ëŠ” ë„ë©”ì¸

ì ìˆ˜ ê³„ì‚° âŒ (resultsê°€ ë‹¨ì¼ ì§„ì‹¤)

ê³¼ì œ ì ìˆ˜ ê³„ì‚° âŒ (homework_resultsê°€ ë‹¨ì¼ ì§„ì‹¤)

progressëŠ” ì§‘ê³„ ê²°ê³¼ ìŠ¤ëƒ…ìƒ· + ìœ„í—˜/í´ë¦¬ë‹‰ ìƒíƒœ ê´€ë¦¬ë§Œ ë‹´ë‹¹

1. ìµœìƒìœ„ ì„¤ê³„ ì›ì¹™ (ì ˆëŒ€ ìœ„ë°˜ ê¸ˆì§€)

ProgressëŠ” ê³„ì‚° ê²°ê³¼ ë„ë©”ì¸

ì‹œí—˜/ê³¼ì œì˜ ì›ì²œ ë°ì´í„°ëŠ” ì ˆëŒ€ ì†Œìœ í•˜ì§€ ì•ŠëŠ”ë‹¤

í”„ë¡ íŠ¸ëŠ” progress ê°’ì„ í•´ì„ë§Œ í•˜ê³  ê³„ì‚°í•˜ì§€ ì•ŠëŠ”ë‹¤

SessionProgress / LectureProgressëŠ” overwrite ìŠ¤ëƒ…ìƒ·

ClinicLink / RiskLogëŠ” ì‚¬ì‹¤(Event) ê¸°ë¡

ëª¨ë“  ìë™ ê³„ì‚°ì€ pipeline(task) ì„ í†µí•´ì„œë§Œ ìˆ˜í–‰

2. í•µì‹¬ ì—”í‹°í‹° ê°œìš”
ì—”í‹°í‹°	ì„±ê²©	ì„¤ëª…
ProgressPolicy	ì •ì±…	ê°•ì˜ë³„ ì§‘ê³„/í†µê³¼ ê¸°ì¤€
SessionProgress	ìŠ¤ëƒ…ìƒ·	Enrollment Ã— Session ê²°ê³¼
LectureProgress	ìŠ¤ëƒ…ìƒ·	Enrollment Ã— Lecture ëˆ„ì  ê²°ê³¼
ClinicLink	ì‚¬ì‹¤	í´ë¦¬ë‹‰ ëŒ€ìƒ â€œì‚¬ì‹¤â€
RiskLog	ë¡œê·¸	ìœ„í—˜ íŒë‹¨ ì´ë²¤íŠ¸
3. ProgressPolicy (ê°•ì˜ ì •ì±… ë‹¨ì¼ ì§„ì‹¤)
3.1 ì˜ë¯¸

ê°•ì˜(lecture) 1:1 ì •ì±…

ì‹œí—˜/ê³¼ì œ/ì˜ìƒ í†µê³¼ ê¸°ì¤€ì„ ì •ì˜

SessionProgress ê³„ì‚° ì‹œ í•­ìƒ ì°¸ì¡°

ProgressPolicy
- lecture_id (1:1)

3.2 Video ì •ì±…
video_required_rate (0~100)


ONLINE: video_progress_rate â‰¥ video_required_rate â†’ completed

OFFLINE: í•­ìƒ video_completed = true

3.3 Exam ì •ì±… (1 Session : N Exams ëŒ€ì‘)
exam_start_session_order
exam_end_session_order
exam_aggregate_strategy
exam_pass_source
exam_pass_score (POLICYì¼ ë•Œë§Œ ì‚¬ìš©)

exam_aggregate_strategy
ê°’	ì˜ë¯¸
MAX	ìµœê³  ì ìˆ˜
AVG	í‰ê· 
LATEST	ê°€ì¥ ìµœê·¼ ì œì¶œ
exam_pass_source
ê°’	ì˜ë¯¸
EXAM	Exam.pass_score ì‚¬ìš©
POLICY	ProgressPolicy.exam_pass_score ì‚¬ìš©

ğŸ‘‰ í”„ë¡ íŠ¸ëŠ” ì‹œí—˜ ì§‘ê³„ ë°©ì‹ ì¶”ë¡  ê¸ˆì§€

3.4 Homework ì •ì±…
homework_start_session_order
homework_end_session_order
homework_pass_type
homework_cutline_percent
homework_round_unit

homework_pass_type
ê°’	ì˜ë¯¸
SUBMIT	ì œì¶œ ì—¬ë¶€ë§Œ
SCORE	ì ìˆ˜ ê¸°ì¤€
TEACHER_APPROVAL	ê°•ì‚¬ ìŠ¹ì¸

ğŸ‘‰ ì‹¤ì œ ì ìˆ˜/ìŠ¹ì¸ì€ homework_results ê°€ ë‹¨ì¼ ì§„ì‹¤
ğŸ‘‰ progressëŠ” passed ì—¬ë¶€ë§Œ ì§‘ê³„

4. SessionProgress (ì°¨ì‹œ ë‹¨ìœ„ ì§‘ê³„ ìŠ¤ëƒ…ìƒ·)
4.1 ì˜ë¯¸

Enrollment Ã— Session

í•´ë‹¹ ì°¨ì‹œë¥¼ â€œì™„ë£Œí–ˆëŠ”ê°€â€ì— ëŒ€í•œ ë‹¨ì¼ ì§„ì‹¤

SessionProgress
- enrollment_id
- session_id


ìœ ë‹ˆí¬ ì œì•½:

(enrollment_id, session)

4.2 ì£¼ìš” í•„ë“œ ì˜ë¯¸
Attendance / Video
attendance_type: online | offline
video_progress_rate: 0~100
video_completed: boolean

Exam ì§‘ê³„ ê²°ê³¼
exam_attempted
exam_aggregate_score
exam_passed
exam_meta (ì§‘ê³„ ìƒì„¸)


ì‹œí—˜ ì ìˆ˜ëŠ” Result í…Œì´ë¸”ë§Œ ì‚¬ìš©

submission.exam_id í•˜ë‚˜ì— ì˜ì¡´ âŒ

sessionì— ì—°ê²°ëœ ëª¨ë“  exam_idë¥¼ ì§‘ê³„

Homework ì§‘ê³„ ê²°ê³¼
homework_submitted
homework_passed


HomeworkScoreë¥¼ ì§ì ‘ ì°¸ì¡°í•˜ì§€ ì•ŠìŒ

submissionì—ì„œ ì „ë‹¬ëœ â€œì œì¶œ/ìŠ¹ì¸ ìƒíƒœâ€ë§Œ ë°˜ì˜

ì‹¤ì œ ì ìˆ˜/íŒì • ë‹¨ì¼ ì§„ì‹¤ì€ homework_results

Final
completed = video_completed AND exam_passed AND homework_passed
completed_at

5. LectureProgress (ê°•ì˜ ëˆ„ì  ì§‘ê³„)
5.1 ì˜ë¯¸

Enrollment Ã— Lecture

ì—¬ëŸ¬ SessionProgressë¥¼ ëˆ„ì í•œ ê²°ê³¼

LectureProgress
- enrollment_id (unique)
- lecture_id

5.2 ì£¼ìš” í•„ë“œ
total_sessions
completed_sessions
failed_sessions
consecutive_failed_sessions
risk_level
last_session
last_updated

risk_level
ê°’	ì˜ë¯¸
NORMAL	ì •ìƒ
WARNING	ì£¼ì˜
DANGER	ìœ„í—˜
6. RiskLog (ìœ„í—˜ ì´ë²¤íŠ¸ ë¡œê·¸)
6.1 ì„±ê²©

append-only

LectureProgress ê³„ì‚° ê³¼ì •ì—ì„œ ìƒì„±

RiskLog
- enrollment_id
- session_id (nullable)
- risk_level
- rule
- reason

rule
ê°’	ì˜ë¯¸
CONSECUTIVE_INCOMPLETE	ì—°ì† ë¯¸ì™„ë£Œ
CONSECUTIVE_LOW_SCORE	ì—°ì† ì €ì ìˆ˜
OTHER	ê¸°íƒ€

ğŸ‘‰ í”„ë¡ íŠ¸ëŠ” ë¡œê·¸ì„± ë°ì´í„°ë¡œë§Œ ì‚¬ìš©

7. ClinicLink (í´ë¦¬ë‹‰ ëŒ€ìƒ ì‚¬ì‹¤)
7.1 ì˜ë¯¸ (ë§¤ìš° ì¤‘ìš”)

â€œì´ í•™ìƒì€ ì´ ì„¸ì…˜ì—ì„œ í´ë¦¬ë‹‰ ëŒ€ìƒì´ë‹¤â€ ë¼ëŠ” ì‚¬ì‹¤

ì‹¤ì œ í´ë¦¬ë‹‰ ìˆ˜ì—… ìƒì„± âŒ

ìŠ¹ì¸/ì˜ˆì•½ âŒ

ë‹¨ì§€ ëŒ€ìƒ ì—¬ë¶€ ê¸°ë¡

ClinicLink
- enrollment_id
- session_id
- reason
- is_auto
- approved
- resolved_at

7.2 is_auto ê¸°ì¤€ (ë‹¨ì¼ ì§„ì‹¤)
ê°’	ì˜ë¯¸
true	ì‹œìŠ¤í…œ ìë™
false	ìˆ˜ë™(ê°•ì‚¬/ìš”ì²­)

ğŸ‘‰ í†µê³„/ëŒ€ì‹œë³´ë“œ/í™”ë©´ ê¸°ë³¸ ê¸°ì¤€ = is_auto = true

7.3 resolved_at

í´ë¦¬ë‹‰ì´ â€œì²˜ë¦¬ ì™„ë£Œ/ë¶„ë¦¬â€ë˜ë©´ ì„¸íŒ…

resolved_at IS NULL ì¸ ê²ƒë§Œ â€œí˜„ì¬ ëŒ€ìƒâ€

8. Clinic ìë™ íŠ¸ë¦¬ê±° ê·œì¹™
8.1 ì°¨ì‹œ ë¯¸ì™„ë£Œ ê¸°ë°˜
if SessionProgress.completed == false
â†’ ClinicLink(reason=AUTO_FAILED, is_auto=true)

8.2 ì‹œí—˜ ìœ„í—˜ ê¸°ë°˜ (ë³´ì¡°)

ClinicExamRuleService.evaluate ê²°ê³¼ê°€ ìˆìœ¼ë©´:

LOW_SCORE

LOW_CONFIDENCE_OMR

REPEATED_WRONG

ğŸ‘‰ meta.exam_reasons ë¡œ ê·¼ê±° ì €ì¥
ğŸ‘‰ reason ìì²´ëŠ” í˜„ì¬ AUTO_FAILED ì¬ì‚¬ìš©

9. Progress Pipeline (ì¤‘ì•™ íŒŒì´í”„ë¼ì¸)
9.1 íŠ¸ë¦¬ê±° ì§„ì…ì 
dispatch_progress_pipeline(submission_id)


results / homework / manual grading ë“±ì—ì„œ í˜¸ì¶œ

9.2 ì‹¤í–‰ ìˆœì„œ (ì ˆëŒ€ ê³ ì •)

SessionProgressCalculator

LectureProgressCalculator

RiskEvaluator

ClinicTriggerService.auto_create_if_failed

(ì˜µì…˜) ClinicTriggerService.auto_create_if_exam_risk

ğŸ‘‰ í”„ë¡ íŠ¸ì—ì„œ ì´ ìˆœì„œ ê°€ì • ê°€ëŠ¥

10. SessionProgressCalculator í•µì‹¬ ê·œì¹™

ì‹œí—˜ ì ìˆ˜ëŠ” Result í…Œì´ë¸”ë§Œ ì‚¬ìš©

ExamAttempt / Submission ì ìˆ˜ âŒ

Session â†” Exam ë§¤í•‘ì€ results.utils.session_exam ë§Œ ì‚¬ìš©

ì‹œí—˜ ì—†ëŠ” ì„¸ì…˜ì€ exam_passed = true

11. API ê³„ì•½ (CRUD / Admin ìš©)
ê³µí†µ ì‚¬í•­

ëª¨ë‘ IsAuthenticated

ê¸°ë³¸ì ìœ¼ë¡œ ê´€ë¦¬ì/ìš´ì˜/ë””ë²„ê¹…ìš©

í”„ë¡ íŠ¸ ë©”ì¸ í™”ë©´ì˜ í•µì‹¬ ë°ì´í„°ëŠ” results APIì—ì„œ ì†Œë¹„

ì œê³µ ViewSet
Endpoint	ì—”í‹°í‹°
/progress/policies/	ProgressPolicy
/progress/session-progress/	SessionProgress
/progress/lecture-progress/	LectureProgress
/progress/clinic-links/	ClinicLink
/progress/risk-logs/	RiskLog

Filter / Search / Ordering ì „ë¶€ í—ˆìš©

SerializerëŠ” __all__

12. í”„ë¡ íŠ¸ ì ˆëŒ€ ê¸ˆì§€ ëª©ë¡

âŒ SessionProgress ì§ì ‘ ê³„ì‚°
âŒ ì‹œí—˜ ì ìˆ˜ í•©ì‚°
âŒ homework_passed ì¶”ë¡ 
âŒ clinic ëŒ€ìƒì ì§ì ‘ íŒë‹¨
âŒ resolved_at ë¬´ì‹œ
âŒ is_auto ì„ì–´ì„œ í†µê³„

13. results / homework_results ì™€ì˜ ê´€ê³„ ìš”ì•½
ë„ë©”ì¸	ì—­í• 
results	ì‹œí—˜ ì ìˆ˜ ë‹¨ì¼ ì§„ì‹¤
homework_results	ê³¼ì œ ì ìˆ˜ ë‹¨ì¼ ì§„ì‹¤
progress	ì§‘ê³„ / íŒì • / ìœ„í—˜ / í´ë¦¬ë‹‰ ìƒíƒœ

ğŸ‘‰ progressëŠ” ì ˆëŒ€ ì›ì²œ ë°ì´í„°ê°€ ì•„ë‹ˆë‹¤

14. ìµœì¢… ìš”ì•½ (í•œ ì¤„)

progress ë„ë©”ì¸ì€ â€œí•™ìƒì˜ ì§„í–‰ ìƒíƒœë¥¼ íŒë‹¨í•œ ê²°ê³¼â€ë§Œì„ ì±…ì„ì§„ë‹¤.
ê³„ì‚°ì€ ì„œë²„, í”„ë¡ íŠ¸ëŠ” í‘œì‹œë§Œ í•œë‹¤.