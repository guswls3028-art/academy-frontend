EXAMS DOMAIN
COMPLETE SPECIFICATION (100% FINAL)

ê¸°ì¤€: apps/domains/exams ì „ì²´ ì½”ë“œ
ìƒíƒœ: SEALED / PRODUCTION FINAL
ëª©ì : ì‹œí—˜ ì •ì˜Â·ìì‚°Â·êµ¬ì¡°ì— ëŒ€í•œ ë‹¨ì¼ ì§„ì‹¤

0. ë„ë©”ì¸ ì¡´ì¬ ì´ìœ  (í•œ ì¤„)

examsëŠ” â€œì‹œí—˜ì˜ ì •ì˜ì™€ êµ¬ì¡°â€ë§Œ ì±…ì„ì§„ë‹¤.
ì‘ì‹œ, ì œì¶œ, ì ìˆ˜, í•©ë¶ˆ, ì§„í–‰ë¥ ì€ ì ˆëŒ€ ì´ ë„ë©”ì¸ì˜ ì±…ì„ì´ ì•„ë‹ˆë‹¤.

1. ìµœìƒìœ„ ì„¤ê³„ ì›ì¹™ (ì ˆëŒ€ ìœ„ë°˜ ê¸ˆì§€)

ì‹œí—˜ì˜ ì •ì²´ì„±ì€ Exam.id

ì‹œí—˜ êµ¬ì¡°ì˜ ë‹¨ì¼ ì§„ì‹¤ì€ template exam

ìš´ì˜ ì‹œí—˜ì€ template ë³µì œ ê¸°ë°˜

ì‹œí—˜ì€ Sessionê³¼ N:M ê´€ê³„

ì‹œí—˜ ì‘ì‹œ ëŒ€ìƒìëŠ” ExamEnrollment

ì‹œí—˜ ìì‚°/ë¬¸í•­/ì •ë‹µì€ templateë§Œ ìˆ˜ì • ê°€ëŠ¥

ì ìˆ˜Â·ì±„ì Â·í•©ë¶ˆ íŒë‹¨ âŒ (results ë„ë©”ì¸)

2. Exam ê°œë… ëª¨ë¸
2.1 Exam (ì‹œí—˜ ì •ì˜)
ì˜ë¯¸

ì‹œí—˜ â€œìì²´â€ë¥¼ ì‹ë³„í•˜ëŠ” ì—”í‹°í‹°

ë™ì¼í•œ ì‹œí—˜ì„ ì—¬ëŸ¬ ì„¸ì…˜ì—ì„œ ì¬ì‚¬ìš© ê°€ëŠ¥

Exam
- id
- title
- description
- subject
- exam_type (template | regular)
- sessions (N:M)
- template_exam
- allow_retake
- max_attempts
- pass_score
- open_at
- close_at
- is_active

exam_type (í•µì‹¬)
íƒ€ì…	ì˜ë¯¸
template	ì‹œí—˜ ì›ë³¸ / êµ¬ì¡° ì •ì˜ ì „ìš©
regular	ì‹¤ì œ ìš´ì˜ ì‹œí—˜
template exam ê·œì¹™

subject í•„ìˆ˜

ì‘ì‹œ âŒ

ì œì¶œ âŒ

ê²°ê³¼ âŒ

ëŒ€ìƒì âŒ

êµ¬ì¡° ìˆ˜ì • ê°€ëŠ¥ (ë‹¨, ë´‰ì¸ ì¡°ê±´ ì „)

regular exam ê·œì¹™

ë°˜ë“œì‹œ template_exam ì°¸ì¡°

subjectëŠ” templateì—ì„œ ìë™ ìƒì†

ì‘ì‹œ/ì œì¶œ/ê²°ê³¼ ëŒ€ìƒ

êµ¬ì¡° ì§ì ‘ ìˆ˜ì • âŒ

template_exam (ë‹¨ì¼ ì§„ì‹¤ ë°”ì¸ë”©)

regular â†’ ë°˜ë“œì‹œ template_exam ì¡´ì¬

template â†’ template_exam = null

DB ì œì•½:

templateì€ template_exam ê°€ì§ˆ ìˆ˜ ì—†ìŒ

regularëŠ” template_exam ë°˜ë“œì‹œ í•„ìš”

effective_template_exam_id (ì¤‘ìš”)
if template â†’ self.id
if regular  â†’ template_exam.id


ğŸ‘‰ ëª¨ë“  êµ¬ì¡° ì¡°íšŒëŠ” ì´ resolver ê¸°ì¤€

3. Session â†” Exam ê´€ê³„
êµ¬ì¡°
Session : Exam = N : M


í•˜ë‚˜ì˜ ì‹œí—˜ì„ ì—¬ëŸ¬ ì°¨ì‹œì— ë¶™ì¼ ìˆ˜ ìˆìŒ

í•œ ì°¨ì‹œì— ì—¬ëŸ¬ ì‹œí—˜ ê°€ëŠ¥

ë‹¨ì¼ ì§„ì‹¤

Session â†” Exam ë§¤í•‘ì€ Exam.sessions

results / progressëŠ” ì´ ë§¤í•‘ì„ ê¸°ì¤€ìœ¼ë¡œ ë™ì‘

4. ì‹œí—˜ êµ¬ì¡° ì—”í‹°í‹° (Template ì „ìš©)
4.1 Sheet
ì˜ë¯¸

ì‹œí—˜ì§€ 1ì¥

OMR / ì˜¨ë¼ì¸ ê³µí†µ ê¸°ì¤€

Sheet
- exam (OneToOne, template only)
- name (default: MAIN)
- total_questions
- file (optional)


ê·œì¹™:

1 Exam : 1 Sheet

regular examì€ sheet ì§ì ‘ ë³´ìœ  âŒ

í•­ìƒ templateì—ì„œ resolve

4.2 ExamQuestion
ì˜ë¯¸

ì‹œí—˜ì§€ ìœ„ ë¬¸í•­ ìœ„ì¹˜ + ì ìˆ˜ ë‹¨ìœ„

ì±„ì /ì •ì˜¤ íŒë‹¨ âŒ

ExamQuestion
- id
- sheet
- number
- score
- image
- region_meta (bbox)


í•µì‹¬ ê·œì¹™:

ë¬¸í•­ ì˜ë¯¸ ì‹ë³„ = number

ë‹¨ì¼ ì°¸ì¡° ID = ExamQuestion.id

submissions / resultsëŠ” exam_question_idë§Œ ì‚¬ìš©

region_meta:

OMR / Vision Worker bbox ê²°ê³¼

ì˜¤ë‹µë…¸íŠ¸ / í•˜ì´ë¼ì´íŠ¸ í•„ìˆ˜

4.3 AnswerKey
ì˜ë¯¸

ì •ë‹µ ì •ì˜

ì±„ì  ê¸°ì¤€

AnswerKey
- exam (template only)
- answers { exam_question_id: correct_answer }


ê·œì¹™:

template examì—ë§Œ ì¡´ì¬

regular examì€ template_examì„ í†µí•´ resolve

templateì´ ì‚¬ìš© ì¤‘ì´ë©´ ìˆ˜ì • âŒ

4.4 ExamAsset
ì˜ë¯¸

ì‹œí—˜ ë°°í¬ íŒŒì¼ ìì‚°

ExamAsset
- exam (template)
- asset_type
- file_key
- file_type
- file_size


asset_type:

ê°’	ì˜ë¯¸
problem_pdf	ë¬¸ì œì§€
omr_sheet	OMR ë‹µì•ˆì§€

ê·œì¹™:

exam + asset_type = ìœ ì¼

íŒŒì¼ì€ R2ì—ë§Œ ì¡´ì¬

regularì—ì„œëŠ” ì§ì ‘ ì—…ë¡œë“œ âŒ

template ì‚¬ìš© ì¤‘ì´ë©´ êµì²´ âŒ

5. ì‹œí—˜ ì‘ì‹œ ëŒ€ìƒì
5.1 ExamEnrollment
ì˜ë¯¸

ì‹œí—˜ë³„ ì‘ì‹œ ëŒ€ìƒì

ì„¸ì…˜ ë“±ë¡ì˜ ë¶€ë¶„ì§‘í•©

ExamEnrollment
- exam
- enrollment


ê·œì¹™:

SessionEnrollmentì— ì†í•œ enrollmentë§Œ ê°€ëŠ¥

ì‹œí—˜ë§ˆë‹¤ ì‘ì‹œìƒ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ

6. ì‹œí—˜ ìƒì„± ê³„ì•½ (API)
6.1 Template ìƒì„±

POST /exams/

{
  "title": "ì¤‘ê°„ê³ ì‚¬",
  "subject": "Math",
  "exam_type": "template"
}


ê·œì¹™:

subject í•„ìˆ˜

session_id âŒ

template_exam_id âŒ

6.2 Regular ìƒì„±

POST /exams/

{
  "title": "ì¤‘ê°„ê³ ì‚¬ 3ì£¼ì°¨",
  "exam_type": "regular",
  "template_exam_id": 10,
  "session_id": 5
}


ê·œì¹™:

template_exam_id í•„ìˆ˜

session_id í•„ìˆ˜

subject ì…ë ¥ âŒ (ìë™ ìƒì†)

ì‘ë‹µ:

í•­ìƒ read serializer

id í¬í•¨ (í”„ë¡ íŠ¸ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥)

7. ì‹œí—˜ ìˆ˜ì • ê³„ì•½
í—ˆìš© í•„ë“œ

title

description

is_active

allow_retake

max_attempts

pass_score

open_at

close_at

ê¸ˆì§€ í•„ë“œ (ì¦‰ì‹œ 400)

exam_type

subject

template_exam

template_exam_id

8. ì‹œí—˜ ìì‚° API

GET /exams/{id}/assets/

regular â†’ template resolve

ë¡œê·¸ì¸ë§Œ í•„ìš”

POST /exams/{id}/assets/

Teacher/Admin

template only

template ì‚¬ìš© ì¤‘ì´ë©´ âŒ

9. ì‹œí—˜ ë¬¸í•­ API

ëª¨ë“  ì¡°íšŒëŠ” regular â†’ template resolve

ìˆ˜ì •/ì‚­ì œëŠ” template + ë¯¸ì‚¬ìš© ìƒíƒœë§Œ í—ˆìš©

ìë™ ë¬¸í•­ ìƒì„±:

POST /exams/sheets/{sheet_id}/auto-questions/

segmentation boxes ê¸°ë°˜

idempotent

êµ¬ì¡° ë³€ê²½ = templateë§Œ ê°€ëŠ¥

10. ì‹œí—˜ ëŒ€ìƒì ê´€ë¦¬ API

GET /exams/{exam_id}/enrollments/?session_id=

session_id í•„ìˆ˜

exam.sessionsì— í¬í•¨ëœ sessionë§Œ í—ˆìš©

UIìš© is_selected í¬í•¨

PUT /exams/{exam_id}/enrollments/?session_id=

enrollment_ids ì™„ì „ ì¹˜í™˜

ì„¸ì…˜ ë“±ë¡ í•™ìƒë§Œ í—ˆìš©

11. í•™ìƒ ì‹œí—˜ ëª©ë¡ API

GET /exams/me/available/

ë…¸ì¶œ ì¡°ê±´:

regular exam

ExamEnrollmentì— í¬í•¨

is_active = true

open_at / close_at ê¸°ê°„ ë§Œì¡±

12. ë´‰ì¸ ê·œì¹™ ìš”ì•½ (ìš´ì˜ ì‚¬ê³  ì°¨ë‹¨)
êµ¬ì¡° ë´‰ì¸

template examì´ derived_examsë¥¼ í•˜ë‚˜ë¼ë„ ê°€ì§€ë©´:

Sheet ìˆ˜ì • âŒ

Question ìˆ˜ì • âŒ

AnswerKey ìˆ˜ì • âŒ

Asset êµì²´ âŒ

AutoQuestions âŒ

13. í”„ë¡ íŠ¸ ì ˆëŒ€ ê¸ˆì§€ ëª©ë¡

âŒ regular examì— êµ¬ì¡° ìˆ˜ì • ì‹œë„
âŒ subject ì§ì ‘ ìˆ˜ì •
âŒ template ìš°íšŒ ì ‘ê·¼
âŒ asset/question/answerë¥¼ regularì— ë‹¬ê¸°
âŒ ì‹œí—˜ ì ìˆ˜ ê³„ì‚°
âŒ í•©ë¶ˆ íŒë‹¨

14. ë„ë©”ì¸ ì±…ì„ ë¶„ë¦¬ ìš”ì•½
ë„ë©”ì¸	ì±…ì„
exams	ì‹œí—˜ ì •ì˜/êµ¬ì¡°/ìì‚°
submissions	ì œì¶œ ì´ë²¤íŠ¸
results	ì±„ì /ì ìˆ˜
progress	í†µê³¼/ì§‘ê³„
enrollment	ìˆ˜ê°•ìƒ
15. ìµœì¢… í•œ ì¤„ ìš”ì•½

examsëŠ” â€œì‹œí—˜ì´ ë¬´ì—‡ì¸ê°€â€ë§Œ ì •ì˜í•œë‹¤.
ì‹œí—˜ì„ ì–´ë–»ê²Œ ë³´ê³ , ì–´ë–»ê²Œ ì±„ì í•˜ê³ , ì–´ë–»ê²Œ í†µê³¼í•˜ëŠ”ì§€ëŠ” ì´ ë„ë©”ì¸ì˜ ì¼ì´ ì•„ë‹ˆë‹¤.