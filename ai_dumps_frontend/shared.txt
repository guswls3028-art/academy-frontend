====================================================================================================
# FRONTEND FOLDER: shared
# ROOT PATH: C:\academyfront\src\shared
====================================================================================================


==========================================================================================
# FILE: api/axios.ts
==========================================================================================
// PATH: src/shared/api/axios.ts
import axios, {
  AxiosError,
  AxiosInstance,
  AxiosRequestConfig,
  AxiosResponse,
} from "axios";

type RetryConfig = AxiosRequestConfig & {
  _retry?: boolean;
};

type RefreshResponse = { access: string };

const API_BASE = String(import.meta.env.VITE_API_BASE_URL || "").trim();

// ë””ë²„ê·¸ìš© (ì›ë³¸ ìœ ì§€)
console.log("VITE_API_BASE_URL =", import.meta.env.VITE_API_BASE_URL);

function getAccessToken(): string | null {
  try {
    const t = localStorage.getItem("access");
    return t ? t : null;
  } catch {
    return null;
  }
}

function getRefreshToken(): string | null {
  try {
    const t = localStorage.getItem("refresh");
    return t ? t : null;
  } catch {
    return null;
  }
}

function setAccessToken(token: string) {
  try {
    localStorage.setItem("access", token);
  } catch {
    // ignore
  }
}

function clearTokens() {
  try {
    localStorage.removeItem("access");
    localStorage.removeItem("refresh");
  } catch {
    // ignore
  }
}

/**
 * Enterprise Refresh Concurrency Control
 * - multiple requests may fail with 401 simultaneously
 * - refresh only once, queue others, then replay
 */
let isRefreshing = false;
let refreshQueue: Array<(token: string | null) => void> = [];

function enqueueRefresh(cb: (token: string | null) => void) {
  refreshQueue.push(cb);
}

function flushRefreshQueue(token: string | null) {
  const q = [...refreshQueue];
  refreshQueue = [];
  q.forEach((cb) => cb(token));
}

function shouldSkipAuth(url?: string) {
  const u = String(url || "");
  return u.includes("/token/") || u.includes("/token/refresh/");
}

function isAxiosError(e: any): e is AxiosError {
  return !!e?.isAxiosError;
}

const api: AxiosInstance = axios.create({
  baseURL: `${API_BASE}/api/v1`,
  timeout: 20_000,
  // JWT-only contract: do NOT rely on cookies
  withCredentials: false,
});

/**
 * Request interceptor
 * - attach JWT Bearer (if available)
 * - attach operational headers
 *
 * âŒ Tenant header injection removed (Backend resolves tenant by host)
 */
api.interceptors.request.use((config) => {
  const cfg = config;

  // Attach Authorization if access exists (JWT)
  if (!shouldSkipAuth(cfg.url)) {
    const access = getAccessToken();
    if (access) {
      cfg.headers = cfg.headers ?? {};
      (cfg.headers as any).Authorization = `Bearer ${access}`;
    }
  }

  // Optional operational headers
  cfg.headers = cfg.headers ?? {};
  (cfg.headers as any)["X-Client"] = "academyfront";
  (cfg.headers as any)["X-Client-Version"] = String(
    import.meta.env.VITE_APP_VERSION || "dev"
  );

  return cfg;
});

/**
 * Refresh token (raw axios instance without interceptors to avoid loops)
 */
async function refreshAccessToken(): Promise<string | null> {
  const refresh = getRefreshToken();
  if (!refresh) return null;

  try {
    const res = await axios.post<RefreshResponse>(
      `${API_BASE}/api/v1/token/refresh/`,
      { refresh },
      { timeout: 20_000, withCredentials: false }
    );

    const newAccess = String(res.data?.access || "").trim();
    if (!newAccess) return null;

    setAccessToken(newAccess);
    return newAccess;
  } catch {
    return null;
  }
}

/**
 * Response interceptor
 * - 401: attempt refresh ONCE, then replay original request
 * - 403: do not refresh (membership/role), fail-fast
 */
api.interceptors.response.use(
  (res: AxiosResponse) => res,
  async (err: any) => {
    if (!isAxiosError(err)) throw err;

    const status = err.response?.status;
    const original = err.config as RetryConfig | undefined;

    if (!original) throw err;

    if (status === 403) {
      throw err;
    }

    if (status === 401 && !original._retry && !shouldSkipAuth(original.url)) {
      original._retry = true;

      if (isRefreshing) {
        return new Promise((resolve, reject) => {
          enqueueRefresh((token) => {
            if (!token) {
              clearTokens();
              reject(err);
              return;
            }
            original.headers = original.headers ?? {};
            (original.headers as any).Authorization = `Bearer ${token}`;
            resolve(api.request(original));
          });
        });
      }

      isRefreshing = true;
      const newAccess = await refreshAccessToken();
      isRefreshing = false;

      flushRefreshQueue(newAccess);

      if (!newAccess) {
        clearTokens();
        throw err;
      }

      original.headers = original.headers ?? {};
      (original.headers as any).Authorization = `Bearer ${newAccess}`;
      return api.request(original);
    }

    throw err;
  }
);

export default api;


==========================================================================================
# FILE: appConfig/api.ts
==========================================================================================
// PATH: src/shared/appConfig/api.ts
import api from "@/shared/api/axios";
import type { AppConfig } from "./types";

/**
 * âŒ DEPRECATED / LOCKED
 *
 * Backend SSOT ê¸°ì¤€:
 * - AppConfig ë‹¨ë… ì—”ë“œí¬ì¸íŠ¸ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
 * - Program SSOTëŠ” /core/program/ ë‹¨ì¼ ì§„ì‹¤ì´ë‹¤.
 *
 * ì´ í•¨ìˆ˜ëŠ” ê³¼ê±° ì‹¤í—˜ í”ì ìœ¼ë¡œ ìœ ì§€ë˜ë©°,
 * í˜¸ì¶œë  ê²½ìš° ì¦‰ì‹œ ì‹¤íŒ¨í•˜ë„ë¡ ë´‰ì¸í•œë‹¤.
 *
 * âš ï¸ ì ˆëŒ€ ë³µêµ¬/í™•ì¥ ê¸ˆì§€
 */
export async function fetchAppConfig(): Promise<AppConfig> {
  throw new Error(
    "[SSOT VIOLATION] fetchAppConfig() is deprecated. Use /core/program/ only."
  );
}


==========================================================================================
# FILE: appConfig/types.ts
==========================================================================================
// PATH: src/shared/appConfig/types.ts

/**
 * âŒ DEPRECATED TYPE
 *
 * ë³¸ íƒ€ì…ì€ ê³¼ê±° AppConfig ì‹¤í—˜ ë‹¨ê³„ì—ì„œ ì‚¬ìš©ë˜ì—ˆìœ¼ë©°,
 * í˜„ì¬ Backend SSOT (Program)ì™€ ê°œë…ì ìœ¼ë¡œ ì¤‘ë³µëœë‹¤.
 *
 * - ì‹¤ì œ UI/Feature/Brand ì„¤ì •ì€ Program SSOTì—ì„œë§Œ ì œê³µëœë‹¤.
 * - ì‹ ê·œ ì½”ë“œì—ì„œ ì´ íƒ€ì… ì‚¬ìš© ê¸ˆì§€
 *
 * âš ï¸ ì‚­ì œ ëŒ€ì‹  ë´‰ì¸ ìœ ì§€ (ê³¼ê±° import ì•ˆì •ì„± ëª©ì )
 */
export type AppConfig = {
  programName: string;
  logoUrl?: string;
  primaryColor?: string;

  login: {
    title: string;
    subtitle?: string;
  };

  features?: {
    [key: string]: boolean;
  };
};


==========================================================================================
# FILE: constants/api.ts
==========================================================================================
// src/shared/constants/api.ts
export const API = {
  ATTENDANCE: "/lectures/attendance/",
};


==========================================================================================
# FILE: docs/HakwonPlus Admin Design System.md
==========================================================================================
# HakwonPlus Admin Design System

> **Code-First / SSOT ê¸°ë°˜ ì—”í„°í”„ë¼ì´ì¦ˆ ë””ìì¸ ì‹œìŠ¤í…œ**

ì´ ë¬¸ì„œëŠ” **ë””ìì´ë„ˆì™€ ê°œë°œìê°€ ë™ì¼í•œ ê·œì¹™ìœ¼ë¡œ UIë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ë‹¨ì¼ ê¸°ì¤€(Single Source of Truth)**ì´ë‹¤.
Figma ë˜ëŠ” ì™¸ë¶€ ë””ìì¸ íˆ´ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ì´ ë¬¸ì„œì™€ CSS í† í°ë§Œìœ¼ë¡œ ëª¨ë“  UI ì˜ì‚¬ê²°ì •ì„ ì™„ë£Œí•  ìˆ˜ ìˆë‹¤.

---

## 1. ì´ ë””ìì¸ ì‹œìŠ¤í…œì˜ í•µì‹¬ ì² í•™

### 1.1 Code-First (ë„êµ¬ ë…ë¦½)

* ë””ìì¸ì˜ ìµœì¢… ê²°ê³¼ë¬¼ì€ **ì½”ë“œ(CSS Token)**ì´ë‹¤
* ì‹œê° ë„êµ¬(Figma ë“±)ëŠ” ì„ íƒ ì‚¬í•­ì´ë©°, ë³¸ ì‹œìŠ¤í…œì€ **íˆ´ ì—†ì´ë„ ì™„ê²°**ëœë‹¤

### 1.2 SSOT (Single Source of Truth)

* ìƒ‰ìƒ, ë°€ë„, íƒ€ì´í¬, ì¸í„°ë™ì…˜ì€ **ê°ê° í•˜ë‚˜ì˜ ì§„ì‹¤ë§Œ ì¡´ì¬**í•œë‹¤
* ì»´í¬ë„ŒíŠ¸ëŠ” ì ˆëŒ€ ê°’ì„ ì •ì˜í•˜ì§€ ì•Šê³  **í•­ìƒ í† í°ë§Œ ì°¸ì¡°**í•œë‹¤

### 1.3 ì—­í•  ë¶„ë¦¬

* **Scale**: ìƒ‰ì˜ ì›ì¬ë£Œ (ì§ì ‘ ì‚¬ìš© ê¸ˆì§€)
* **Role**: ì˜ë¯¸ ìˆëŠ” ìƒ‰ (ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ìš©í•˜ëŠ” ìœ ì¼í•œ ìƒ‰)
* **Surface / Area / Layer**: í™”ë©´ êµ¬ì¡°ì™€ ê¹Šì´
* **Pattern**: ë°˜ë³µë˜ëŠ” UI ì¡°í•©
* **Component**: ì‹¤ì œ React UI

---

## 2. ë””ë ‰í† ë¦¬ êµ¬ì¡°ì™€ ì±…ì„

```
styles/design-system/
â”œâ”€ colors/
â”‚  â”œâ”€ scale/        # âŒ ì§ì ‘ ì‚¬ìš© ê¸ˆì§€
â”‚  â”œâ”€ role/         # âœ… ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ìš©í•˜ëŠ” ìƒ‰
â”‚  â””â”€ themes/       # í…Œë§ˆë³„ scale ì¬ì •ì˜
â”‚
â”œâ”€ density/         # spacing / radius / size
â”œâ”€ typography/      # font / size / weight
â”œâ”€ state/           # hover / active / focus / motion
â”œâ”€ surface/         # layer / area / elevation
â”œâ”€ patterns/        # panel / button / table / layout
â””â”€ antd/            # AntD control override
```

---

## 3. ìƒ‰ìƒ ì‚¬ìš© ê·œì¹™ (ì¤‘ìš”)

### 3.1 ì ˆëŒ€ ê¸ˆì§€ ì‚¬í•­

* âŒ `--scale-*` í† í°ì„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì§ì ‘ ì‚¬ìš©
* âŒ HEX / RGB / ìƒ‰ìƒ ë¦¬í„°ëŸ´ ì‚¬ìš©
* âŒ í…Œë§ˆ ìƒ‰ì„ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ë¶„ê¸° ì²˜ë¦¬

### 3.2 í—ˆìš© ê·œì¹™

* âœ… ì»´í¬ë„ŒíŠ¸ëŠ” **role tokenë§Œ ì‚¬ìš©**

ì˜ˆ:

```
--color-text-primary
--color-bg-surface
--color-border-divider
--color-brand-primary
```

---

## 4. í…Œë§ˆ ì‹œìŠ¤í…œ ê·œì¹™

### 4.1 í…Œë§ˆì˜ ì—­í• 

* í…Œë§ˆëŠ” **ê³µê°„(space)** ì„ ì •ì˜í•œë‹¤
* Page / Header / Sidebar / Panel ìƒ‰ì€ ëª¨ë‘ í…Œë§ˆ ì±…ì„

### 4.2 í…Œë§ˆ ìˆ˜

* Light: 8
* Dark: 4
* Brand: 4 (Kakao / Naver / Samsung / Purple)

### 4.3 ì»´í¬ë„ŒíŠ¸ ê·œì¹™

* ì»´í¬ë„ŒíŠ¸ëŠ” í…Œë§ˆë¥¼ **ì ˆëŒ€ ì¸ì§€í•˜ì§€ ì•ŠëŠ”ë‹¤**
* ê°™ì€ ì»´í¬ë„ŒíŠ¸ëŠ” ëª¨ë“  í…Œë§ˆì—ì„œ ë™ì¼í•œ ì½”ë“œë¡œ ë™ì‘í•œë‹¤

---

## 5. Area / Layer / Surface ê°œë…

### 5.1 Area (ê°•ì œ ìƒ‰ ë¶„ë¦¬)

* Page / Section / Panelì€ **ë¬´ì¡°ê±´ ë‹¤ë¥¸ ìƒ‰**ì´ì–´ì•¼ í•œë‹¤
* ë™ì¼ ìƒ‰ì´ë©´ ì„¤ê³„ ì˜¤ë¥˜

### 5.2 Layer (ì˜ë¯¸ ë ˆë²¨)

* `layer-page` : í˜ì´ì§€ ë°”ë‹¥
* `layer-panel` : ì¼ë°˜ ì‘ì—… ì˜ì—­
* `layer-focus` : í•œ í™”ë©´ 1ê°œ í•µì‹¬ ì‘ì—…

### 5.3 Dark Theme ë³´ì •

* Dark í…Œë§ˆì—ì„œëŠ” ë‹¨ê³„(step)ë¥¼ ê±´ë„ˆë›°ì–´ ëŒ€ë¹„ í™•ë³´

---

## 6. Button ì‚¬ìš© ê°€ì´ë“œ (ë””ìì´ë„ˆ í•µì‹¬)

### Intent ê·œì¹™

* `primary` : í™”ë©´ ë‚´ **1ê°œ** ê¶Œì¥ (ëª…ì‹œì  CTA)
* `secondary` : ì¼ë°˜ ì‘ì—…
* `ghost` : ì €ê°•ë„ ë³´ì¡° ì•¡ì…˜
* `danger` : íŒŒê´´ì  ì•¡ì…˜

### ê¸ˆì§€

* âŒ primary ë²„íŠ¼ ë‚¨ìš©
* âŒ dangerë¥¼ ê°•ì¡°ìƒ‰ì²˜ëŸ¼ ì‚¬ìš©

---

## 7. Panel / Section ê·œì¹™

* Primary Panel (`panel--focus`) : í•œ í™”ë©´ 1ê°œ
* Card Panel : ë³´ì¡° ì •ë³´
* Panel ìƒ‰ì€ ì ˆëŒ€ ì§ì ‘ ì§€ì •í•˜ì§€ ì•ŠëŠ”ë‹¤

---

## 8. Sidebar / Header ê·œì¹™

* Sidebar ìƒ‰ì€ **layout token ì „ìš©**
* Componentì—ì„œ sidebar ìƒ‰ ë³€ê²½ ê¸ˆì§€
* Brand í…Œë§ˆëŠ” sidebarê°€ ë¸Œëœë“œ ë©´

---

## 9. Ant Design ì‚¬ìš© ì›ì¹™

* AntDëŠ” **ê¸°ëŠ¥ ì»´í¬ë„ŒíŠ¸**ì¼ ë¿
* ì‹œê° ìŠ¤íƒ€ì¼ì€ ë””ìì¸ ì‹œìŠ¤í…œì´ ë®ì–´ì“´ë‹¤
* AntD ê¸°ë³¸ ìƒ‰ìƒ/ìŠ¤íƒ€ì¼ ì‹ ë¢° âŒ

---

## 10. QA ì²´í¬ë¦¬ìŠ¤íŠ¸ (ì¶œì‹œ ì „)

* [ ] Page / Section / Panel ìƒ‰ì´ ëª…í™•íˆ êµ¬ë¶„ë˜ëŠ”ê°€
* [ ] Sidebar activeê°€ 1ì´ˆ ë‚´ ì¸ì§€ë˜ëŠ”ê°€
* [ ] Primary ë²„íŠ¼ì´ ê³¼ë„í•˜ì§€ ì•Šì€ê°€
* [ ] Dark í…Œë§ˆì—ì„œ Panel êµ¬ë¶„ì´ ë˜ëŠ”ê°€
* [ ] Brand í…Œë§ˆ ê·œì¹™ ìœ„ë°˜ ì—†ìŒ

---

## 11. ì´ ì‹œìŠ¤í…œì˜ ëª©í‘œ

* ë””ìì´ë„ˆ ì—†ì´ë„ ìœ ì§€ ê°€ëŠ¥
* ì‹ ê·œ ì¸ì› íˆ¬ì… ì‹œ ì‚¬ê³  ë°©ì§€
* í…Œë§ˆ 20ê°œë¡œ í™•ì¥ ê°€ëŠ¥
* AI / ìë™í™” ë„êµ¬ê°€ ì‹¤ìˆ˜í•˜ì§€ ì•Šê²Œ ê°€ë“œ

---

**ì´ ë¬¸ì„œëŠ” ë³€ê²½ ì‹œ ë°˜ë“œì‹œ ì•„í‚¤í…íŠ¸ ìŠ¹ì¸ í•„ìš”**

â€” HakwonPlus Design System


==========================================================================================
# FILE: docs/KOREAN_ADMIN_DS_SEAL.md
==========================================================================================
# KOREAN ADMIN DESIGN SYSTEM â€” SEALED

## Core Principle
ìƒ‰ì€ ì¥ì‹ì´ ì•„ë‹ˆë‹¤.
í•œêµ­í˜• Adminì—ì„œ ìƒ‰ì€ "ì—…ë¬´ ìƒíƒœ ì‹ í˜¸"ë‹¤.

## Area Ownership
ë°°ê²½ìƒ‰ì€ ì˜¤ì§ Area Ownerë§Œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.

Allowed:
- Page
- Section
- WorkZone
- MetaZone

Forbidden:
- Panel
- Card
- Table
- Form
- KPI

## Area Role Mapping
roleë§Œ ì„ ì–¸í•œë‹¤. ìƒ‰ì€ ìë™ì´ë‹¤.

- work â†’ ì‘ì—… ì˜ì—­
- kpi â†’ ìš”ì•½ / ì„±ê³¼
- log â†’ ê¸°ë¡ / ë³´ì¡° ì •ë³´

## Violation Policy
Area ì—†ì´ ë°°ê²½ì„ ê°€ì§€ë©´
â†’ ì‹œê°ì  íŒ¨í„´ìœ¼ë¡œ ì‹¤íŒ¨ë¥¼ ë“œëŸ¬ë‚¸ë‹¤.

## This Rule Is FINAL
- ë””ìì´ë„ˆ ì·¨í–¥ìœ¼ë¡œ ë³€ê²½ ë¶ˆê°€
- ê°œë°œì í¸ì˜ë¡œ ì˜ˆì™¸ ë¶ˆê°€
- AI ìë™ ìƒì„± ì½”ë“œë„ ì´ ê·œì¹™ì„ ë”°ë¥¸ë‹¤


==========================================================================================
# FILE: docs/MODAL CREATION RULES â€” SSOT (SEALED).md
==========================================================================================
ğŸ“˜ MODAL CREATION RULES â€” SSOT (SEALED)
ëª©ì 

ì´ ë¬¸ì„œëŠ” **ê´€ë¦¬ì(Admin) UIì—ì„œ ìƒì„±ë˜ëŠ” ëª¨ë“  ëª¨ë‹¬ì˜ ë‹¨ì¼ ìƒì„± ê·œì¹™(Single Source of Truth)**ì„ ì •ì˜í•œë‹¤.
í•™ìƒ(Student) ë„ë©”ì¸ì—ì„œ ì‚¬ìš© ì¤‘ì¸ ëª¨ë‹¬ êµ¬í˜„ì„ **í‘œì¤€(reference implementation)**ìœ¼ë¡œ ì‚¼ìœ¼ë©°,
ìŠ¤íƒœí”„Â·ê°•ì˜Â·ì‹œí—˜Â·ê¸°íƒ€ ëª¨ë“  ë„ë©”ì¸ì€ ì´ë¥¼ ê·¸ëŒ€ë¡œ ë”°ë¥¸ë‹¤.

ğŸ”’ ìµœìƒìœ„ ì„ ì–¸ (FINAL)

ëª¨ë‹¬ì€ í•™ìƒì´ í‘œì¤€ì´ë‹¤.
ëª¨ë“  Admin ëª¨ë‹¬ì€ í•™ìƒ ë„ë©”ì¸ì—ì„œ ì‚¬ìš© ì¤‘ì¸
AdminModal + ModalHeader + ModalBody + ModalFooter íŒ¨í„´ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•œë‹¤.

ì˜ˆì™¸, ì»¤ìŠ¤í…€, ì¬í•´ì„ ë¶ˆê°€.

1. ì ìš© ë²”ìœ„

ë‹¤ìŒì— í•´ë‹¹í•˜ëŠ” UIëŠ” ì „ë¶€ ë³¸ ê·œì¹™ì„ ë”°ë¥¸ë‹¤.

ìƒì„±(Create)

ìˆ˜ì •(Edit)

ìƒì„¸(Inspect)

ì‚­ì œ(Delete)

í™•ì¸(Confirm)

ìƒíƒœ ë³€ê²½ / ë¹„í™œì„±í™” / ë³µêµ¬ ë“± ë˜ëŒë¦´ ìˆ˜ ì—†ëŠ” ì•¡ì…˜

2. í•„ìˆ˜ ì‚¬ìš© ì»´í¬ë„ŒíŠ¸ (ê°•ì œ)
âœ… ë°˜ë“œì‹œ import í•´ì„œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì»´í¬ë„ŒíŠ¸
import {
  AdminModal,
  ModalHeader,
  ModalBody,
  ModalFooter,
} from "@/shared/ui/modal";


âŒ ê¸ˆì§€:

antd Modal ì§ì ‘ ì‚¬ìš©

footer/header ì§ì ‘ êµ¬í˜„

padding / border / shadow ê°œë³„ ì •ì˜

3. ê¸°ë³¸ êµ¬ì¡° (ë³€ê²½ ë¶ˆê°€)

ëª¨ë“  ëª¨ë‹¬ì€ ì•„ë˜ êµ¬ì¡°ë¥¼ ë°˜ë“œì‹œ ìœ ì§€í•´ì•¼ í•œë‹¤.

<AdminModal open={open} onClose={onClose} type="action | confirm | inspect">
  <ModalHeader
    type="action | confirm | inspect"
    title="ëª¨ë‹¬ ì œëª©"
    description="ì„ íƒ ì„¤ëª…"
  />

  <ModalBody>
    {/* ì‹¤ì œ í¼ / ì»¨í…ì¸  */}
  </ModalBody>

  <ModalFooter
    left={optional}
    right={required}
  />
</AdminModal>


ModalHeader âŒ ìƒëµ ë¶ˆê°€

ModalFooter âŒ ìƒëµ ë¶ˆê°€ (ë²„íŠ¼ì€ ì—¬ê¸°ë§Œ ìœ„ì¹˜)

4. ëª¨ë‹¬ íƒ€ì… ê·œì¹™
4.1 Action ëª¨ë‹¬ (ê¸°ë³¸)

ìƒì„± / ìˆ˜ì • / ì¼ë°˜ ì‘ì—…

ê¸°ë³¸ê°’

<AdminModal type="action" />
<ModalHeader type="action" />

4.2 Confirm ëª¨ë‹¬ (íŒŒê´´ì  ì•¡ì…˜)

ì‚­ì œ, ë¹„í™œì„±í™”, ë³µêµ¬ ë¶ˆê°€ ì‘ì—…ì€ ë¬´ì¡°ê±´ confirm.

<AdminModal type="confirm" />
<ModalHeader type="confirm" />


confirm íƒ€ì… íš¨ê³¼:

ESC âŒ

mask click âŒ

ë¹¨ê°„ accent rail

â€œë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤â€ ê²½ê³  ìë™ í‘œì‹œ

âŒ confirm ì—†ì´ delete ë²„íŠ¼ ë°°ì¹˜ ê¸ˆì§€

4.3 Inspect ëª¨ë‹¬

ì¡°íšŒ/ë¯¸ë¦¬ë³´ê¸°/ì½ê¸° ì „ìš©

<AdminModal type="inspect" />
<ModalHeader type="inspect" />

5. ë²„íŠ¼ ê·œì¹™ (SSOT)
5.1 ë²„íŠ¼ ìœ„ì¹˜

âŒ ModalBody ì•ˆì— ë²„íŠ¼ ë°°ì¹˜ ê¸ˆì§€

âŒ ì„ì˜ ìœ„ì¹˜ ë²„íŠ¼ ê¸ˆì§€

âœ… ModalFooter ì•ˆì—ì„œë§Œ ë²„íŠ¼ ë°°ì¹˜

5.2 ë²„íŠ¼ ì»´í¬ë„ŒíŠ¸
ê¸°ë³¸ ì›ì¹™

í•™ìƒ ë„ë©”ì¸ê³¼ ë™ì¼í•˜ê²Œ ì‚¬ìš©

DS ë²„íŠ¼ë§Œ í—ˆìš©

import { ActionButton } from "@/shared/ui/ds";


ë˜ëŠ” (í•™ìƒê³¼ ë™ì¼í•œ ê²½ìš°):

import { Button } from "@/shared/ui/ds";


âŒ antd Button ì§ì ‘ ì‚¬ìš© ê¸ˆì§€

5.3 ActionButton ë§¤í•‘ (ê¶Œì¥)
í–‰ìœ„	ActionButton
ìƒì„±	action="create"
ìˆ˜ì •	action="edit"
ì‚­ì œ	action="delete"
ë‹«ê¸°/ì·¨ì†Œ	action="close"
ê´€ë¦¬	action="manage"

ë¼ë²¨ ë³€ê²½ì€ í—ˆìš©:

<ActionButton action="create">ì§ì› ë“±ë¡</ActionButton>

6. ì…ë ¥ í•„ë“œ ê·œì¹™ (ì¤‘ìš”)
6.1 ì…ë ¥ ì»´í¬ë„ŒíŠ¸

í•™ìƒ ëª¨ë‹¬ ê¸°ì¤€ì„ ê·¸ëŒ€ë¡œ ë”°ë¥¸ë‹¤.

<input className="ds-input" />
<select className="ds-input" />
<textarea className="ds-textarea" />


âŒ .input, .form-control ë“± legacy class ì‚¬ìš© ê¸ˆì§€

6.2 í•„ìˆ˜ í•„ë“œ í‘œì‹œ
<input
  className="ds-input"
  data-required="true"
  data-invalid="true | false"
/>


í•„ìˆ˜ í•„ë“œëŠ” ë°˜ë“œì‹œ data-required="true"

ê²€ì¦ ì‹¤íŒ¨ ì‹œ data-invalid="true"

7. ê¸°ëŠ¥ ë³´ì¡´ ì›ì¹™ (ì ˆëŒ€ ê·œì¹™)

ëª¨ë‹¬ ë¦¬íŒ©í„°ë§ ì‹œ ë‹¤ìŒì€ ì ˆëŒ€ ë³€ê²½ ê¸ˆì§€:

API í˜¸ì¶œ

mutation ë¡œì§

ê¶Œí•œ ì²´í¬

validation ë¡œì§

alert / error ë©”ì‹œì§€ ë‚´ìš©

í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ë™ì‘

ğŸ‘‰ ê»ë°ê¸°(UI)ë§Œ êµì²´í•œë‹¤.

8. ê¸ˆì§€ ì‚¬í•­ ìš”ì•½ (ìœ„ë°˜ ì‹œ ë¡¤ë°±)

âŒ í•™ìƒê³¼ ë‹¤ë¥¸ ëª¨ë‹¬ ë ˆì´ì•„ì›ƒ

âŒ ë„ë©”ì¸ë³„ ì»¤ìŠ¤í…€ ëª¨ë‹¬ ê·œì¹™

âŒ â€œì´ ëª¨ë‹¬ì€ ì˜ˆì™¸ì…ë‹ˆë‹¤â€ ì£¼ì¥

âŒ AdminModal ì™¸ ëª¨ë‹¬ ë„ì…

9. ê¸°ì¤€ êµ¬í˜„ (Reference)

src/features/students/components/StudentCreateModal.tsx

ì´ íŒŒì¼ì´ **ëª¨ë“  ëª¨ë‹¬ì˜ ê¸°ì¤€ êµ¬í˜„(reference implementation)**ì´ë‹¤.
ì˜ì‹¬ë  ê²½ìš° í•­ìƒ ì´ íŒŒì¼ì„ ë¨¼ì € ë³¸ë‹¤.

10. ë³€ê²½ ì •ì±… (SEALED)

ë³¸ ë¬¸ì„œëŠ” ì•„í‚¤í…íŠ¸ ìŠ¹ì¸ ì—†ì´ ë³€ê²½ ë¶ˆê°€

ë””ìì¸ ì·¨í–¥, ê°œì¸ ì„ í˜¸, ë‹¨ê¸° í¸ì˜ ì‚¬ìœ ë¡œ ì˜ˆì™¸ ë¶ˆê°€

AI ìë™ ìƒì„± ì½”ë“œë„ ì´ ê·œì¹™ì„ ê°•ì œ ì ìš©

END OF DOCUMENT â€” MODAL CREATION RULES (SSOT)


==========================================================================================
# FILE: program/index.tsx
==========================================================================================
// PATH: src/shared/program/index.tsx
import React, { createContext, useContext, useEffect, useState } from "react";
import api from "@/shared/api/axios";

export type Program = {
  tenantCode: string;
  display_name: string;

  ui_config: {
    logo_url?: string;
    primary_color?: string;
    login_title?: string;
    login_subtitle?: string;
  };

  feature_flags: Record<string, boolean>;
  is_active: boolean;
};

type ProgramState = {
  program: Program | null;
  isLoading: boolean;
  refetch: () => Promise<void>;
};

const ProgramContext = createContext<ProgramState | null>(null);

export function ProgramProvider({ children }: { children: React.ReactNode }) {
  const [program, setProgram] = useState<Program | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  const load = async () => {
    try {
      const res = await api.get<Program>("/core/program/");
      setProgram(res.data ?? null);
    } catch {
      setProgram(null);
    }
  };

  useEffect(() => {
    (async () => {
      try {
        await load();
      } finally {
        setIsLoading(false);
      }
    })();
  }, []);

  return (
    <ProgramContext.Provider value={{ program, isLoading, refetch: load }}>
      {children}
    </ProgramContext.Provider>
  );
}

export function useProgram() {
  const ctx = useContext(ProgramContext);
  if (!ctx) {
    throw new Error("useProgram must be used within ProgramProvider");
  }
  return ctx;
}


==========================================================================================
# FILE: tenant/index.ts
==========================================================================================
// PATH: src/shared/tenant/index.ts
/**
 * Tenant Resolution SSOT (Enterprise / Backend-First)
 *
 * âœ… Backend SSOT:
 * - Tenant is resolved by request host (request.get_host()).
 * - Tenant.code must match host (normalized, without port).
 * - No backend fallback resolver.
 *
 * âœ… Frontend SSOT:
 * - Do NOT invent tenant codes (no aliases like "default", "2_limglish").
 * - Canonical tenant code in production = current hostname (normalized).
 *
 * Allowed explicit overrides (dev/bootstrap only):
 * - Local storage override (TENANT_STORAGE_KEY)
 * - VITE_TENANT_CODE (explicit dev override)
 *
 * Notes:
 * - Even if backend ignores X-Tenant-Code (host-based resolution), sending it is harmless
 *   and helps transitional tooling / diagnostics.
 */

export const TENANT_STORAGE_KEY = "tenant_code";

export type TenantResolveResult =
  | { ok: true; code: string; source: "storage" | "env" | "hostname" }
  | { ok: false; reason: "missing" | "invalid_host" };

function normalizeHost(host: string): string {
  const v = String(host || "").trim().toLowerCase();
  if (!v) return "";
  return v.split(":")[0].trim();
}

function safeGetHostname(): string {
  try {
    return normalizeHost(window.location.hostname || "");
  } catch {
    return "";
  }
}

export function getTenantCodeFromStorage(): string | null {
  try {
    const v = localStorage.getItem(TENANT_STORAGE_KEY);
    const code = String(v || "").trim();
    return code ? code : null;
  } catch {
    return null;
  }
}

export function setTenantCodeToStorage(code: string) {
  const v = String(code || "").trim();
  if (!v) return;
  try {
    localStorage.setItem(TENANT_STORAGE_KEY, v);
  } catch {
    // ignore
  }
}

export function clearTenantCodeFromStorage() {
  try {
    localStorage.removeItem(TENANT_STORAGE_KEY);
  } catch {
    // ignore
  }
}

export function getTenantCodeFromEnv(): string | null {
  const code = String(import.meta.env.VITE_TENANT_CODE || "").trim();
  return code ? code : null;
}

/**
 * Canonical hostname contract (prod):
 * - If hostname exists and is not local/dev-like: tenant code == hostname.
 * - For localhost/dev preview domains: require explicit override (storage/env).
 */
export function getTenantCodeFromHostname(hostname?: string): TenantResolveResult {
  const host = normalizeHost(hostname ?? safeGetHostname());
  if (!host) return { ok: false, reason: "invalid_host" };

  // Local/dev hosts: require explicit override (avoid guessing).
  if (host === "localhost" || host === "127.0.0.1") {
    return { ok: false, reason: "missing" };
  }

  // Preview/temporary domains: require explicit override unless you truly use them as tenant codes.
  if (host.endsWith(".pages.dev") || host.endsWith(".trycloudflare.com")) {
    return { ok: false, reason: "missing" };
  }

  return { ok: true, code: host, source: "hostname" };
}

/**
 * Resolve tenant in deterministic priority order:
 * 1) storage (operator choice)
 * 2) env (explicit dev setting)
 * 3) hostname (prod canonical)
 */
export function resolveTenantCode(): TenantResolveResult {
  const stored = getTenantCodeFromStorage();
  if (stored) return { ok: true, code: stored, source: "storage" };

  const env = getTenantCodeFromEnv();
  if (env) return { ok: true, code: env, source: "env" };

  const fromHost = getTenantCodeFromHostname();
  if (fromHost.ok) return fromHost;

  return { ok: false, reason: "missing" };
}

/**
 * Header helper (API layer use):
 * - Must be deterministic and non-magical.
 * - Prefer explicit sources; do not infer from hostname here.
 */
export function getTenantCodeForHeader(): string | null {
  const stored = getTenantCodeFromStorage();
  if (stored) return stored;

  const env = getTenantCodeFromEnv();
  if (env) return env;

  return null;
}


==========================================================================================
# FILE: ui/badges/AttendanceStatusBadge.tsx
==========================================================================================
// PATH: src/shared/ui/badges/AttendanceStatusBadge.tsx
import React from "react";

type AttendanceStatus =
  | "PRESENT"
  | "LATE"
  | "ONLINE"
  | "SUPPLEMENT"
  | "EARLY_LEAVE"
  | "ABSENT"
  | "RUNAWAY"
  | "MATERIAL"
  | "INACTIVE"
  | "SECESSION";

const STATUS_META: Record<
  AttendanceStatus,
  { label: string; style: React.CSSProperties }
> = {
  PRESENT: {
    label: "í˜„ì¥",
    style: { backgroundColor: "var(--color-primary)", color: "white" },
  },
  LATE: {
    label: "ì§€ê°",
    style: {
      backgroundColor: "color-mix(in srgb, var(--color-primary) 75%, var(--color-bg-surface))",
      color: "white",
    },
  },
  ONLINE: {
    label: "ì˜ìƒ",
    style: {
      backgroundColor: "color-mix(in srgb, var(--color-primary) 65%, var(--color-bg-surface))",
      color: "white",
    },
  },
  SUPPLEMENT: {
    label: "ë³´ê°•",
    style: {
      backgroundColor: "color-mix(in srgb, var(--color-primary) 55%, var(--color-bg-surface))",
      color: "white",
    },
  },
  EARLY_LEAVE: {
    label: "ì¡°í‡´",
    style: {
      backgroundColor: "color-mix(in srgb, var(--color-primary) 45%, var(--color-bg-surface))",
      color: "white",
    },
  },
  ABSENT: {
    label: "ê²°ì„",
    style: { backgroundColor: "var(--color-error)", color: "white" },
  },
  RUNAWAY: {
    label: "ì¶œíŠ€",
    style: {
      backgroundColor: "color-mix(in srgb, var(--color-error) 85%, var(--color-bg-surface))",
      color: "white",
    },
  },
  MATERIAL: {
    label: "ìë£Œ",
    style: {
      backgroundColor: "var(--color-bg-surface-soft)",
      color: "var(--color-text-secondary)",
    },
  },
  INACTIVE: {
    label: "ë¶€ì¬",
    style: {
      backgroundColor: "var(--color-bg-surface-soft)",
      color: "var(--color-text-muted)",
    },
  },
  SECESSION: {
    label: "í‡´ì›",
    style: {
      backgroundColor: "color-mix(in srgb, var(--color-text-muted) 40%, var(--color-bg-surface))",
      color: "white",
    },
  },
};

export default function AttendanceStatusBadge({
  status,
}: {
  status: AttendanceStatus;
}) {
  const meta = STATUS_META[status];
  if (!meta) return null;

  return (
    <span
      className="inline-flex items-center rounded-full px-2 py-0.5 text-xs font-semibold"
      style={meta.style}
    >
      {meta.label}
    </span>
  );
}


==========================================================================================
# FILE: ui/badges/index.ts
==========================================================================================
// PATH: src/shared/ui/badges/index.ts
export { default as AttendanceStatusBadge } from "./AttendanceStatusBadge";


==========================================================================================
# FILE: ui/domain/DomainLayout.tsx
==========================================================================================
// PATH: src/shared/ui/domain/DomainLayout.tsx
// Students ë„ë©”ì¸ UI SSOT â€” ëª¨ë“  ë„ë©”ì¸ ê³µí†µ ë ˆì´ì•„ì›ƒ (í—¤ë” + íƒ­ + íŒ¨ë„)

import { ReactNode } from "react";
import { useNavigate, useLocation } from "react-router-dom";

import DomainTabs, { type DomainTab } from "./DomainTabs";
import DomainPanel from "./DomainPanel";

export type { DomainTab } from "./DomainTabs";

type DomainLayoutProps = {
  title: string;
  description?: string;
  tabs?: DomainTab[];
  children: ReactNode;
};

export default function DomainLayout({
  title,
  description,
  tabs,
  children,
}: DomainLayoutProps) {
  const navigate = useNavigate();
  const location = useLocation();

  return (
    <div className="min-h-full bg-[var(--bg-page)]" data-app="admin">
      {/* DOMAIN HEADER â€” ì€ì€í•œ primary í†¤ + ì¢Œì¸¡ ì•¡ì„¼íŠ¸ */}
      <div
        className="relative"
        style={{
          background: "color-mix(in srgb, var(--color-primary) 8%, var(--bg-surface))",
          borderBottom: "1px solid var(--color-border-divider-strong)",
          paddingLeft: "var(--space-6)",
          paddingRight: "var(--space-6)",
          paddingTop: "var(--space-7)",
          paddingBottom: "var(--space-4)",
        }}
      >
        <div className="relative">
          <div
            className="absolute left-0 top-1 rounded-full bg-[var(--color-primary)]"
            style={{ width: 4, height: 24 }}
            aria-hidden
          />
          <div style={{ paddingLeft: "var(--space-4)" }}>
            <div
              className="text-2xl tracking-tight"
              style={{ fontWeight: 700, color: "var(--color-text-primary)" }}
            >
              {title}
            </div>
            {description != null && (
              <div
                className="text-base mt-1"
                style={{
                  color: "var(--color-text-muted)",
                  opacity: 0.9,
                }}
              >
                {description}
              </div>
            )}
          </div>
        </div>

        {tabs != null && tabs.length > 0 && (
          <div style={{ marginTop: "var(--space-4)" }}>
            <DomainTabs
              tabs={tabs}
              pathname={location.pathname}
              onNavigate={(path) => navigate(path)}
            />
          </div>
        )}
      </div>

      {/* DOMAIN CONTENT (ds-panel) */}
      <div
        style={{
          padding: "var(--space-6)",
        }}
      >
        <DomainPanel>{children}</DomainPanel>
      </div>
    </div>
  );
}


==========================================================================================
# FILE: ui/domain/DomainPanel.tsx
==========================================================================================
// PATH: src/shared/ui/domain/DomainPanel.tsx
// ë„ë©”ì¸ ì½˜í…ì¸  ìŠ¤í…Œì´ì§€ â€” ì¹´ë“œê°€ ì•„ë‹Œ â€œë°”ë‹¥â€. í…Œë‘ë¦¬Â·ê·¸ë¦¼ì ì—†ì´ ë°°ê²½ë§Œ.

import { ReactNode } from "react";

type DomainPanelProps = {
  children: ReactNode;
};

export default function DomainPanel({ children }: DomainPanelProps) {
  return (
    <div
      className="domain-panel"
      style={{
        background: "transparent",
      }}
    >
      {children}
    </div>
  );
}


==========================================================================================
# FILE: ui/domain/DomainTable.tsx
==========================================================================================
// PATH: src/shared/ui/domain/DomainTable.tsx
// Students ë„ë©”ì¸ UI SSOT â€” ds-table-wrap + table.ds-table ê³µí†µ ë˜í¼

import { ReactNode, CSSProperties } from "react";

type DomainTableProps = {
  children: ReactNode;
  /** tableì— ì¶”ê°€í•  className */
  tableClassName?: string;
  /** table ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ (ì˜ˆ: tableLayout: "fixed") */
  tableStyle?: CSSProperties;
};

export default function DomainTable({
  children,
  tableClassName,
  tableStyle,
}: DomainTableProps) {
  return (
    <div className="ds-table-wrap" style={{ overflow: "hidden" }}>
      <table
        className={`ds-table w-full ${tableClassName ?? ""}`.trim()}
        style={tableStyle}
      >
        {children}
      </table>
    </div>
  );
}


==========================================================================================
# FILE: ui/domain/DomainTabs.tsx
==========================================================================================
// PATH: src/shared/ui/domain/DomainTabs.tsx
// Students ë„ë©”ì¸ UI SSOT â€” ds-tabs ê³µí†µ ì»´í¬ë„ŒíŠ¸

export type DomainTab = {
  key: string;
  label: string;
  path?: string;
  locked?: boolean;
  /** trueë©´ pathì™€ ì™„ì „ ì¼ì¹˜í•  ë•Œë§Œ active */
  exact?: boolean;
};

const LOCKED_TAB_CLASS =
  "opacity-40 cursor-not-allowed pointer-events-none";

type DomainTabsProps = {
  tabs: DomainTab[];
  pathname: string;
  onNavigate: (path: string) => void;
};

export default function DomainTabs({
  tabs,
  pathname,
  onNavigate,
}: DomainTabsProps) {
  return (
    <div className="ds-tabs">
      {tabs.map((tab) =>
        tab.locked ? (
          <button
            key={tab.key}
            type="button"
            disabled
            title="ì¤€ë¹„ ì¤‘ì¸ ê¸°ëŠ¥ì…ë‹ˆë‹¤"
            className={`ds-tab ${LOCKED_TAB_CLASS}`}
          >
            {tab.label}
          </button>
        ) : (
          <button
            key={tab.key}
            type="button"
            className={`ds-tab ${
              tab.path != null &&
              (tab.exact
                ? pathname === tab.path || pathname === tab.path + "/"
                : pathname === tab.path ||
                  pathname.startsWith(tab.path + "/"))
                ? "is-active"
                : ""
            }`}
            onClick={() => tab.path != null && onNavigate(tab.path)}
          >
            {tab.label}
          </button>
        )
      )}
    </div>
  );
}


==========================================================================================
# FILE: ui/domain/index.ts
==========================================================================================
// src/shared/ui/domain/index.ts
// ë„ë©”ì¸ ê³µí†µ UI (Students SSOT ê¸°ì¤€)

export { default as DomainLayout } from "./DomainLayout";
export { default as DomainTabs } from "./DomainTabs";
export { default as DomainPanel } from "./DomainPanel";
export { default as DomainTable } from "./DomainTable";
export type { DomainTab } from "./DomainTabs";


==========================================================================================
# FILE: ui/ds/Button.tsx
==========================================================================================
// PATH: src/shared/ui/ds/Button.tsx
import React from "react";

export type ButtonIntent = "primary" | "secondary" | "danger" | "ghost";
export type ButtonSize = "sm" | "md" | "lg";

type ButtonProps = Omit<React.ButtonHTMLAttributes<HTMLButtonElement>, "color"> & {
  intent?: ButtonIntent;
  size?: ButtonSize;

  iconOnly?: boolean;
  leftIcon?: React.ReactNode;
  rightIcon?: React.ReactNode;

  loading?: boolean;
  className?: string;
};

function cx(...xs: Array<string | false | null | undefined>) {
  return xs.filter(Boolean).join(" ");
}

export default function Button({
  intent = "secondary",
  size = "md",
  iconOnly,
  leftIcon,
  rightIcon,
  loading,
  disabled,
  className,
  children,
  ...props
}: ButtonProps) {
  const isDisabled = !!disabled || !!loading;

  return (
    <button
      {...props}
      type={(props.type as any) ?? "button"}
      disabled={isDisabled}
      className={cx("ds-button", className)}
      data-intent={intent}
      data-size={size}
      data-icon-only={iconOnly ? "true" : "false"}
      data-loading={loading ? "true" : "false"}
      data-disabled={isDisabled ? "true" : "false"}
    >
      {loading && <span className="ds-button__spinner" aria-hidden />}

      {!loading && leftIcon && (
        <span className="ds-button__left" aria-hidden>
          {leftIcon}
        </span>
      )}

      {!iconOnly && <span className="ds-button__label">{children}</span>}

      {!loading && rightIcon && (
        <span className="ds-button__right" aria-hidden>
          {rightIcon}
        </span>
      )}
    </button>
  );
}


==========================================================================================
# FILE: ui/ds/EmptyState.tsx
==========================================================================================
// PATH: src/shared/ui/ds/EmptyState.tsx
import React from "react";

export type EmptyStateTone = "empty" | "error" | "loading";
export type EmptyStateScope = "page" | "panel" | "modal";
export type EmptyStateMode = "panel" | "embedded";

type EmptyStateProps = {
  title?: string;
  description?: string;
  tone?: EmptyStateTone;
  scope?: EmptyStateScope;

  mode?: EmptyStateMode;
  actions?: React.ReactNode;
  extra?: React.ReactNode;
  showIcon?: boolean;
  className?: string;
};

function cx(...xs: Array<string | false | null | undefined>) {
  return xs.filter(Boolean).join(" ");
}

function Icon({ tone }: { tone: EmptyStateTone }) {
  const common = {
    width: 18,
    height: 18,
    viewBox: "0 0 24 24",
    fill: "none" as const,
  };

  if (tone === "loading") {
    return (
      <svg {...common}>
        <path
          d="M12 3a9 9 0 1 0 9 9"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
        />
      </svg>
    );
  }

  if (tone === "error") {
    return (
      <svg {...common}>
        <path
          d="M12 9v4"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
        />
        <path
          d="M12 17h0"
          stroke="currentColor"
          strokeWidth="3"
          strokeLinecap="round"
        />
        <path
          d="M10.3 4.4 2.5 18a2 2 0 0 0 1.7 3h15.6a2 2 0 0 0 1.7-3L13.7 4.4a2 2 0 0 0-3.4 0Z"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinejoin="round"
        />
      </svg>
    );
  }

  return (
    <svg {...common}>
      <path
        d="M4 7h16M6 11h12M8 15h8"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
      <path
        d="M6 19h12"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
        opacity="0.6"
      />
    </svg>
  );
}

export default function EmptyState({
  title = "ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤",
  description,
  tone = "empty",
  scope = "panel",
  mode = "panel",
  actions,
  extra,
  showIcon = true,
  className,
}: EmptyStateProps) {
  const isError = tone === "error";
  const isLoading = tone === "loading";

  const padY = scope === "page" ? 34 : scope === "modal" ? 26 : 22;
  const titleSize = scope === "page" ? 15 : 14;
  const descSize = scope === "page" ? 13 : 12;

  const toneText = "var(--color-text-primary)";
  const toneMuted = isError
    ? "var(--color-text-secondary)"
    : "var(--color-text-muted)";

  const iconColor = isError
    ? "var(--color-error)"
    : isLoading
    ? "var(--color-text-muted)"
    : "var(--color-text-secondary)";

  const outerStyle: React.CSSProperties =
    mode === "panel"
      ? {
          borderRadius: "var(--radius-xl)",
          border: "1px solid var(--color-border-divider)",
          background: "var(--ui-log-bg)",
          boxShadow: "var(--elevation-1)",
          overflow: "hidden",
        }
      : {};

  const innerStyle: React.CSSProperties = {
    padding: `${padY}px var(--space-7)`,
    textAlign: "center",
    background: "transparent",
  };

  const badgeStyle: React.CSSProperties = {
    display: "inline-flex",
    alignItems: "center",
    justifyContent: "center",
    width: 36,
    height: 36,
    borderRadius: 12,
    border: "1px solid var(--color-border-divider)",
    background: "var(--bg-surface-soft)",
    color: iconColor,
    boxShadow: "var(--elevation-1)",
  };

  const titleStyle: React.CSSProperties = {
    marginTop: showIcon ? 12 : 0,
    fontSize: titleSize,
    fontWeight: "var(--font-title)",
    letterSpacing: "-0.18px",
    color: toneText,
  };

  const descStyle: React.CSSProperties = {
    marginTop: 8,
    fontSize: descSize,
    fontWeight: "var(--font-meta)",
    color: toneMuted,
    lineHeight: 1.55,
    whiteSpace: "pre-line",
  };

  const actionsStyle: React.CSSProperties = {
    marginTop: 16,
    display: "flex",
    justifyContent: "center",
  };

  const extraStyle: React.CSSProperties = {
    marginTop: 12,
    fontSize: 11,
    fontWeight: "var(--font-meta)",
    color: "var(--color-text-muted)",
  };

  const content = (
    <div style={innerStyle} className={cx("ds-empty", className)}>
      {showIcon && (
        <div style={{ display: "flex", justifyContent: "center" }}>
          <div style={badgeStyle}>
            <Icon tone={tone} />
          </div>
        </div>
      )}

      <div style={titleStyle}>{title}</div>
      {!!description && <div style={descStyle}>{description}</div>}
      {!!actions && <div style={actionsStyle}>{actions}</div>}
      {!!extra && <div style={extraStyle}>{extra}</div>}
    </div>
  );

  if (mode === "embedded") return content;

  return (
    <div className="ds-empty-panel" style={outerStyle}>
      {content}
    </div>
  );
}


==========================================================================================
# FILE: ui/ds/KPI.tsx
==========================================================================================
// PATH: src/shared/ui/ds/KPI.tsx
/**
 * ======================================================
 * KPI (SSOT)
 * - ê´€ë¦¬ì í™ˆ/ë¦¬í¬íŠ¸ì—ì„œ "ìˆ«ì ì¹´ë“œ"ë¥¼ í†µì¼
 * ======================================================
 */
export default function KPI({
  label,
  value,
  hint,
}: {
  label: string;
  value: string | number;
  hint?: string;
}) {
  return (
    <div className="kpi ds-kpi" data-kpi="true">
      <div
        className="kpi-label"
        style={{
          fontSize: "var(--text-sm)",
          color: "var(--color-text-muted)",
          fontWeight: "var(--font-title)",
        }}
      >
        {label}
      </div>

      <div
        className="kpi-value"
        style={{
          marginTop: 6,
          fontSize: "var(--text-2xl)",
          fontWeight: 700,
          letterSpacing: "-0.4px",
          color: "var(--color-text-primary)",
        }}
      >
        {value}
      </div>

      {hint && (
        <div
          style={{
            marginTop: 8,
            fontSize: "var(--text-sm)",
            fontWeight: "var(--font-meta)",
            color: "var(--color-text-secondary)",
          }}
        >
          {hint}
        </div>
      )}
    </div>
  );
}


==========================================================================================
# FILE: ui/ds/Page.tsx
==========================================================================================
// PATH: src/shared/ui/ds/Page.tsx
import React from "react";

function cx(...xs: Array<string | false | null | undefined>) {
  return xs.filter(Boolean).join(" ");
}

export type PageDensity = "focus" | "browse" | "inspect";

type PageProps = React.PropsWithChildren<{
  width?: "default" | "wide" | "full";
  padding?: "default" | "compact";
  background?: "app" | "transparent";
  density?: PageDensity;
  className?: string;
}>;

export default function Page({
  width = "default",
  padding = "default",
  background = "transparent",
  density = "inspect",
  className,
  children,
}: PageProps) {
  const widthCls =
    width === "full"
      ? "max-w-none"
      : width === "wide"
      ? "max-w-[1440px]"
      : "max-w-[1200px]";

  const padCls = padding === "compact" ? "px-5 py-5" : "px-6 py-6";
  const bgCls = background === "app" ? "bg-[var(--bg-app)]" : "";

  const densityGap =
    density === "focus"
      ? "space-y-8"
      : density === "browse"
      ? "space-y-6"
      : "space-y-5";

  return (
    <div
      className={cx("ds-page", bgCls, className)}
      data-page-density={density}
      data-page-width={width}
      data-page-padding={padding}
      data-page-background={background}
    >
      <div className={cx("mx-auto w-full", widthCls, padCls)}>
        <div className={densityGap}>{children}</div>
      </div>
    </div>
  );
}


==========================================================================================
# FILE: ui/ds/PageHeader.tsx
==========================================================================================
// PATH: src/shared/ui/ds/PageHeader.tsx
import React from "react";

function cx(...xs: Array<string | false | null | undefined>) {
  return xs.filter(Boolean).join(" ");
}

type PageHeaderProps = {
  title: React.ReactNode;
  description?: React.ReactNode;
  badge?: React.ReactNode;
  actions?: React.ReactNode;
  meta?: React.ReactNode;
  bottom?: React.ReactNode;

  variant?: "hero" | "card" | "plain";
  importance?: "primary" | "normal";
  sticky?: boolean;
  className?: string;
};

export default function PageHeader({
  title,
  description,
  badge,
  actions,
  meta,
  bottom,
  variant = "hero",
  importance = "primary",
  sticky,
  className,
}: PageHeaderProps) {
  const isHero = variant === "hero";
  const isCard = variant === "card";

  const shell =
    isHero || isCard
      ? cx(
          "border border-[var(--border-divider)] bg-[var(--bg-surface)]",
          isHero ? "rounded-3xl shadow-sm" : "rounded-2xl"
        )
      : "";

  const pad = isHero ? "px-8 py-8" : isCard ? "px-6 py-5" : "px-0 py-0";

  const titleCls =
    importance === "primary"
      ? "text-2xl font-bold tracking-[-0.35px]"
      : "text-xl font-semibold tracking-[-0.25px]";

  const stickyCls = sticky
    ? "sticky top-0 z-30 backdrop-blur supports-[backdrop-filter]:bg-[color-mix(in_srgb,var(--bg-surface)_82%,transparent)]"
    : "";

  const heroStyle: React.CSSProperties | undefined = isHero
    ? { background: "var(--bg-surface)" }
    : undefined;

  return (
    <div className={cx(shell, stickyCls, className)} style={heroStyle}>
      <div className={pad}>
        <div className="flex items-start justify-between gap-6">
          <div className="min-w-0 space-y-2">
            <div className="flex items-center gap-2 min-w-0">
              <div className={cx(titleCls, "text-[var(--text-primary)] truncate")}>
                {title}
              </div>
              {badge}
            </div>

            {!!description && (
              <div className="text-sm text-[var(--text-muted)] leading-relaxed">
                {description}
              </div>
            )}
          </div>

          {!!actions && <div className="shrink-0">{actions}</div>}
        </div>

        {!!meta && (
          <div className="mt-5 text-[11px] font-semibold text-[var(--text-muted)]">
            {meta}
          </div>
        )}
      </div>

      {!!bottom && (
        <div className="border-t border-[var(--border-divider)] px-8 py-5">
          {bottom}
        </div>
      )}
    </div>
  );
}


==========================================================================================
# FILE: ui/ds/Panel.tsx
==========================================================================================
// PATH: src/shared/ui/ds/Panel.tsx
import React from "react";

function cx(...xs: Array<string | false | null | undefined>) {
  return xs.filter(Boolean).join(" ");
}

export type PanelVariant = "primary" | "default" | "subtle";
export type PanelDensity = "default" | "compact";

type PanelProps = React.PropsWithChildren<{
  title?: React.ReactNode;
  description?: React.ReactNode;
  right?: React.ReactNode;
  footer?: React.ReactNode;

  variant?: PanelVariant;
  density?: PanelDensity;
  className?: string;
}>;

export default function Panel({
  title,
  description,
  right,
  footer,
  variant = "default",
  density = "default",
  className,
  children,
}: PanelProps) {
  const pad = density === "compact" ? "px-5 py-4" : "px-6 py-5";

  const headerBorder =
    variant === "primary"
      ? "border-b border-[color-mix(in_srgb,var(--color-brand-primary)_18%,var(--border-divider))]"
      : "border-b border-[var(--border-divider)]";

  return (
    <div
      className={cx("ds-panel", className)}
      data-panel-variant={variant}
      data-variant={variant}
      data-panel-density={density}
      data-density={density}
    >
      {(title || description || right) && (
        <div className={cx(pad, headerBorder)}>
          <div className="flex items-start justify-between gap-4">
            <div className="min-w-0 space-y-1">
              {!!title && (
                <div className="text-sm font-semibold text-[var(--text-primary)] tracking-[-0.15px]">
                  {title}
                </div>
              )}
              {!!description && (
                <div className="text-xs font-medium text-[var(--text-muted)]">
                  {description}
                </div>
              )}
            </div>
            {!!right && <div className="shrink-0">{right}</div>}
          </div>
        </div>
      )}

      <div className={cx(pad)}>
        <div className="space-y-4">{children}</div>
      </div>

      {!!footer && (
        <div className="border-t border-[var(--border-divider)] px-6 py-4">
          {footer}
        </div>
      )}
    </div>
  );
}


==========================================================================================
# FILE: ui/ds/Section.tsx
==========================================================================================
// PATH: src/shared/ui/ds/Section.tsx
import React from "react";

function cx(...xs: Array<string | false | null | undefined>) {
  return xs.filter(Boolean).join(" ");
}

export type SectionLevel = "primary" | "secondary" | "tertiary";

type SectionProps = React.PropsWithChildren<{
  title?: React.ReactNode;
  description?: React.ReactNode;
  right?: React.ReactNode;
  hint?: React.ReactNode;

  level?: SectionLevel;
  className?: string;
}>;

export default function Section({
  title,
  description,
  right,
  hint,
  level = "secondary",
  className,
  children,
}: SectionProps) {
  const gap =
    level === "primary"
      ? "space-y-6"
      : level === "secondary"
      ? "space-y-4"
      : "space-y-3";

  const titleCls =
    level === "primary"
      ? "text-lg font-semibold tracking-[-0.25px]"
      : level === "secondary"
      ? "text-sm font-semibold tracking-[-0.15px]"
      : "text-xs font-semibold tracking-[-0.1px]";

  const metaTextCls =
    level === "tertiary"
      ? "text-[11px] text-[var(--text-muted)]"
      : "text-xs text-[var(--text-muted)]";

  return (
    <section
      className={cx("ds-section", gap, className)}
      data-section-level={level}
      data-level={level}
    >
      {(title || description || right || hint) && (
        <div
          className="ds-section__header"
          style={{
            paddingTop: "var(--space-7)",
            paddingLeft: "var(--space-7)",
            paddingRight: "var(--space-7)",
          }}
        >
          <div className="flex items-start justify-between gap-4">
            <div className="min-w-0 space-y-1">
              {!!title && (
                <div className={cx(titleCls, "text-[var(--text-primary)]")}>
                  {title}
                </div>
              )}
              {!!description && <div className={metaTextCls}>{description}</div>}
              {!!hint && (
                <div className="text-[11px] font-medium text-[var(--text-muted)]">
                  {hint}
                </div>
              )}
            </div>

            {!!right && <div className="shrink-0">{right}</div>}
          </div>
        </div>
      )}

      <div
        className="ds-section__body"
        style={{
          paddingBottom: "var(--space-7)",
          paddingLeft: "var(--space-7)",
          paddingRight: "var(--space-7)",
        }}
      >
        <div className={gap}>{children}</div>
      </div>
    </section>
  );
}


==========================================================================================
# FILE: ui/ds/SectionHeader.tsx
==========================================================================================
// PATH: src/shared/ui/ds/SectionHeader.tsx
import React from "react";

function cx(...xs: Array<string | false | null | undefined>) {
  return xs.filter(Boolean).join(" ");
}

type SectionHeaderProps = {
  title: React.ReactNode;
  description?: React.ReactNode;
  navigation?: React.ReactNode;
  actions?: React.ReactNode;
  className?: string;
};

export default function SectionHeader({
  title,
  description,
  navigation,
  actions,
  className,
}: SectionHeaderProps) {
  return (
    <div
      className={cx("ds-section-header", className)}
      style={{
        borderRadius: "var(--radius-2xl)",
        border: "1px solid var(--color-border-divider)",
        background: "color-mix(in srgb, var(--color-primary) 6%, var(--bg-surface))",
        boxShadow: "var(--elevation-1)",
      }}
    >
      <div
        style={{
          padding: "var(--space-7) var(--space-8)",
          display: "flex",
          alignItems: "flex-start",
          justifyContent: "space-between",
          gap: "var(--space-6)",
        }}
      >
        <div style={{ minWidth: 0 }}>
          <div
            style={{
              fontSize: 20,
              fontWeight: "var(--font-title)",
              letterSpacing: "-0.35px",
              color: "var(--color-text-primary)",
            }}
          >
            {title}
          </div>

          {description && (
            <div
              style={{
                marginTop: 6,
                fontSize: 13,
                fontWeight: "var(--font-meta)",
                color: "var(--color-text-muted)",
                lineHeight: 1.5,
              }}
            >
              {description}
            </div>
          )}
        </div>

        {actions && <div style={{ flexShrink: 0 }}>{actions}</div>}
      </div>

      {navigation && (
        <div
          style={{
            borderTop: "1px solid var(--color-border-divider)",
            padding: "12px 20px",
            background: "var(--color-bg-surface)",
          }}
        >
          {navigation}
        </div>
      )}
    </div>
  );
}


==========================================================================================
# FILE: ui/ds/Tabs.tsx
==========================================================================================
// PATH: src/shared/ui/ds/Tabs.tsx
import React from "react";

export interface TabItem {
  key: string;
  label: React.ReactNode;
  disabled?: boolean;
}

interface TabsProps {
  value: string;
  items: TabItem[];
  onChange: (key: string) => void;
}

export function Tabs({ value, items, onChange }: TabsProps) {
  return (
    <div className="ds-tabs" role="tablist" aria-orientation="horizontal">
      {items.map((t) => {
        const active = value === t.key;
        return (
          <button
            key={t.key}
            type="button"
            role="tab"
            aria-selected={active}
            aria-disabled={t.disabled || false}
            disabled={t.disabled}
            onClick={() => !t.disabled && onChange(t.key)}
            className={`ds-tab ${active ? "is-active" : ""}`}
          >
            {t.label}
          </button>
        );
      })}
    </div>
  );
}


==========================================================================================
# FILE: ui/ds/index.ts
==========================================================================================
// PATH: src/shared/ui/ds/index.ts

/* ===============================
 * DS GLOBAL STYLES (SSOT)
 * =============================== */
import "./styles/input.css";
import "./styles/action-bar.css";
import "./styles/panel.css";
import "./styles/page.css";
import "./styles/page-header.css";
import "./styles/status.css";
import "./styles/list-page.css";

/* ===============================
 * DS COMPONENT EXPORTS
 * =============================== */
export { default as Page } from "./Page";
export { default as PageHeader } from "./PageHeader";
export { default as SectionHeader } from "./SectionHeader";
export { default as Section } from "./Section";
export { default as Panel } from "./Panel";
export { default as EmptyState } from "./EmptyState";
export { default as KPI } from "./KPI";
export { default as Button } from "./Button";
export * from "./Tabs";

export { default as ActionBar } from "./components/ActionBar";
export { default as ActionButton } from "./components/ActionButton";
export { default as StatusBadge } from "./components/StatusBadge";
export { default as StatusToggle } from "./components/StatusToggle";
// PATH: src/shared/ui/ds/index.ts


==========================================================================================
# FILE: ui/ds/components/ActionBar.tsx
==========================================================================================
// PATH: src/shared/ui/ds/components/ActionBar.tsx
import { ReactNode } from "react";

export default function ActionBar({
  children,
  align = "right",
}: {
  children: ReactNode;
  align?: "left" | "right";
}) {
  return (
    <div
      className="ds-action-bar"
      data-align={align}
    >
      {children}
    </div>
  );
}


==========================================================================================
# FILE: ui/ds/components/ActionButton.tsx
==========================================================================================
// PATH: src/shared/ui/ds/components/ActionButton.tsx
import { Button } from "@/shared/ui/ds";
import type { ButtonIntent, ButtonSize } from "@/shared/ui/ds/Button";

type Action =
  | "create"
  | "edit"
  | "delete"
  | "close"
  | "manage";

const ACTION_PRESET: Record<
  Action,
  { intent: ButtonIntent; label: string }
> = {
  create: { intent: "primary", label: "ìƒì„±" },
  edit: { intent: "secondary", label: "ìˆ˜ì •" },
  manage: { intent: "secondary", label: "ê´€ë¦¬" },
  close: { intent: "ghost", label: "ë‹«ê¸°" },
  delete: { intent: "danger", label: "ì‚­ì œ" },
};

export default function ActionButton({
  action,
  size = "md",
  children,
  ...props
}: {
  action: Action;
  size?: ButtonSize;
} & React.ComponentProps<typeof Button>) {
  const preset = ACTION_PRESET[action];

  return (
    <Button
      intent={preset.intent}
      size={size}
      {...props}
    >
      {children ?? preset.label}
    </Button>
  );
}


==========================================================================================
# FILE: ui/ds/components/StatusBadge.tsx
==========================================================================================
// PATH: src/shared/ui/ds/components/StatusBadge.tsx
export type Status = "active" | "inactive" | "archived";

const LABEL: Record<Status, string> = {
  active: "í™œì„±",
  inactive: "ë¹„í™œì„±",
  archived: "ì¢…ë£Œ",
};

export default function StatusBadge({ status }: { status: Status }) {
  return (
    <span
      className="ds-status-badge"
      data-status={status}
    >
      {LABEL[status]}
    </span>
  );
}


==========================================================================================
# FILE: ui/ds/components/StatusToggle.tsx
==========================================================================================
// PATH: src/shared/ui/ds/components/StatusToggle.tsx
import { Button } from "@/shared/ui/ds";

export default function StatusToggle({
  active,
  onToggle,
  disabled,
}: {
  active: boolean;
  onToggle: () => void;
  disabled?: boolean;
}) {
  return (
    <Button
      intent={active ? "secondary" : "ghost"}
      size="sm"
      aria-pressed={active}
      disabled={disabled}
      onClick={onToggle}
    >
      {active ? "í™œì„±" : "ë¹„í™œì„±"}
    </Button>
  );
}


==========================================================================================
# FILE: ui/ds/styles/action-bar.css
==========================================================================================
/* PATH: src/shared/ui/ds/styles/action-bar.css */

.ds-action-bar {
  display: flex;
  align-items: center;
  gap: 8px;
}

.ds-action-bar[data-align="right"] {
  justify-content: flex-end;
}

.ds-action-bar[data-align="left"] {
  justify-content: flex-start;
}


==========================================================================================
# FILE: ui/ds/styles/input.css
==========================================================================================
/* ======================================================
   DS INPUT â€” REQUIRED / PRIMARY EMPHASIS
   ====================================================== */

/* ê¸°ë³¸ ì…ë ¥ í•„ë“œ */
.ds-input {
  appearance: none;
  width: 100%;
  height: 36px;
  padding: 0 12px;

  font-size: 13px;
  font-weight: 500;
  color: var(--color-text-primary);

  background: var(--color-bg-surface);
  border: 1px solid var(--color-border-divider);
  border-radius: var(--radius-md);

  outline: none;
  transition:
    border-color 120ms ease,
    box-shadow 120ms ease,
    background-color 120ms ease;
}

/* placeholder */
.ds-input::placeholder {
  color: var(--color-text-muted);
  font-weight: 400;
}

/* hover */
.ds-input:hover:not(:disabled) {
  border-color: var(--color-border-strong, var(--color-border-divider));
}

/* focus (ì¼ë°˜ ì…ë ¥) */
.ds-input:focus:not([data-required="true"]) {
  border-color: color-mix(
    in srgb,
    var(--color-text-secondary) 60%,
    var(--color-border-divider)
  );
}

/* ======================================================
   REQUIRED (PRIMARY COLOR)
   ====================================================== */

/* í•„ìˆ˜ í•„ë“œ â€” ê¸°ë³¸ ìƒíƒœ (ì—ëŸ¬ ì•„ë‹˜) */
.ds-input[data-required="true"] {
  border-color: color-mix(
    in srgb,
    var(--color-brand-primary) 38%,
    var(--color-border-divider)
  );
}

/* í•„ìˆ˜ í•„ë“œ hover */
.ds-input[data-required="true"]:hover:not(:disabled) {
  border-color: color-mix(
    in srgb,
    var(--color-brand-primary) 55%,
    var(--color-border-divider)
  );
}

/* í•„ìˆ˜ í•„ë“œ focus */
.ds-input[data-required="true"]:focus {
  border-color: var(--color-brand-primary);
  box-shadow: 0 0 0 1px color-mix(
    in srgb,
    var(--color-brand-primary) 35%,
    transparent
  );
}

/* ======================================================
   DISABLED
   ====================================================== */

.ds-input:disabled {
  background: var(--color-bg-surface-soft);
  color: var(--color-text-disabled);
  cursor: not-allowed;
}


==========================================================================================
# FILE: ui/ds/styles/list-page.css
==========================================================================================
/* PATH: src/shared/ui/ds/styles/list-page.css */

/* í•„í„° / ì»¨íŠ¸ë¡¤ ì˜ì—­ */
.ui-control {
  background: var(--ui-control-bg);
  border: 1px solid var(--ui-control-border);
  border-radius: var(--radius-xl);
}


==========================================================================================
# FILE: ui/ds/styles/page-header.css
==========================================================================================
/* PATH: src/shared/ui/ds/styles/page-header.css */

.page-header[data-variant="hero"] {
  background: var(--ui-hero-bg);
  border: 1px solid var(--ui-hero-border);
}


==========================================================================================
# FILE: ui/ds/styles/page.css
==========================================================================================
/* PATH: src/shared/ui/ds/styles/page.css */

[data-page-root] {
  background: var(--ui-page-bg);
}


==========================================================================================
# FILE: ui/ds/styles/panel.css
==========================================================================================
/* PATH: src/shared/ui/ds/styles/panel.css */
/* íŒ¨ë„ ê³µí†µ: í…Œë‘ë¦¬Â·ê¹Šì´ë¡œ ì˜ì—­ êµ¬ë¶„ */

.ds-panel {
  border: 1px solid var(--color-border-divider);
  border-radius: var(--radius-xl);
  box-shadow: var(--elevation-1);
  overflow: hidden;
}

.ds-panel[data-panel-variant="default"] {
  background: var(--ui-work-bg);
  border-color: var(--ui-work-border);
}

.ds-panel[data-panel-variant="subtle"] {
  background: var(--ui-meta-bg);
  border-color: var(--ui-meta-border);
}

.ds-panel[data-panel-variant="primary"] {
  background: var(--ui-hero-bg);
  border-color: var(--ui-hero-border);
}


==========================================================================================
# FILE: ui/ds/styles/status.css
==========================================================================================
/* PATH: src/shared/ui/ds/styles/status.css */

.ds-status-badge {
  padding: 4px 10px;
  font-size: 12px;
  font-weight: var(--font-title);
  border-radius: 999px;
  border: 1px solid var(--color-border-divider);
  background: var(--color-bg-surface-soft);
  color: var(--color-text-secondary);
}

.ds-status-badge[data-status="active"] {
  color: var(--color-success);
  border-color: color-mix(in srgb, var(--color-success) 40%, var(--color-border-divider));
  background: color-mix(in srgb, var(--color-success) 8%, var(--color-bg-surface));
}


==========================================================================================
# FILE: ui/ds/styles/tabs.css
==========================================================================================
/* í”„ë¦¬ë¯¸ì—„ ì–¸ë”ë¼ì¸ íƒ­ (ë„ë©”ì¸ ê³µí†µ) */
.ds-tabs {
  display: flex;
  gap: var(--space-1);
  padding: 0;
  background: transparent;
  border-radius: 0;
}

.ds-tab {
  padding: var(--space-2) var(--space-4);
  font-size: 14px;
  font-weight: var(--font-title);
  color: var(--color-text-secondary);
  border-radius: 0;
  border-bottom: 2px solid transparent;
  transition: color var(--motion-base) var(--ease-out),
    border-color var(--motion-base) var(--ease-out),
    background-color var(--motion-base) var(--ease-out);
}

.ds-tab:hover:not(.is-active):not(:disabled) {
  color: var(--color-text-primary);
  background: color-mix(in srgb, var(--color-primary) 6%, transparent);
}

.ds-tab.is-active {
  color: var(--color-primary);
  font-weight: 600;
  border-bottom: 2px solid var(--color-primary);
  background: color-mix(in srgb, var(--color-primary) 14%, var(--color-bg-surface-soft));
}


==========================================================================================
# FILE: ui/feedback/feedback.ts
==========================================================================================
// PATH: src/shared/ui/feedback/feedback.ts
import { message } from "antd";

message.config({
  duration: 2,
  maxCount: 3,
});

export const feedback = {
  success(text: string) {
    message.success({ content: text });
  },
  error(text: string) {
    message.error({ content: text });
  },
  info(text: string) {
    message.info({ content: text });
  },
};


==========================================================================================
# FILE: ui/feedback/index.ts
==========================================================================================
// PATH: src/shared/ui/feedback/index.ts
export { feedback } from "./feedback";


==========================================================================================
# FILE: ui/layout/AppLayout.tsx
==========================================================================================
// PATH: src/shared/ui/layout/AppLayout.tsx
import { Outlet } from "react-router-dom";
import { ConfigProvider } from "antd";
import Sidebar from "./Sidebar";
import Header from "./Header";
import { ThemeProvider } from "@/context/ThemeContext";
import { ProgramProvider } from "@/shared/program";
import { NoticeProvider } from "@/features/notice/context/NoticeContext";

export default function AppLayout() {
  return (
    <ThemeProvider>
      <ProgramProvider>
        <NoticeProvider>
          <ConfigProvider
            theme={{
              algorithm: false,
              token: {
                colorPrimary: "var(--color-brand-primary)",

                colorBgBase: "var(--layout-canvas-bg)",
                colorBgLayout: "var(--layout-page-bg)",
                colorBgContainer: "var(--color-bg-surface)",
                colorBgElevated: "var(--color-bg-surface)",

                colorBorder: "var(--color-border-divider)",

                colorText: "var(--color-text-primary)",
                colorTextSecondary: "var(--color-text-secondary)",
                colorTextTertiary: "var(--color-text-muted)",
                colorTextQuaternary: "var(--color-text-disabled)",
                colorTextPlaceholder: "var(--color-text-muted)",

                colorFillSecondary: "var(--color-bg-surface-hover)",
                colorFillTertiary: "var(--color-bg-surface-hover)",
              },
              components: {
                Segmented: {
                  itemColor: "var(--color-text-secondary)",
                  itemHoverColor: "var(--color-text-primary)",
                  itemSelectedColor: "var(--color-text-inverse)",
                  itemSelectedBg: "var(--color-brand-primary)",
                  trackBg: "var(--color-bg-surface-hover)",
                  borderRadius: 10,
                },
                Button: {
                  colorPrimary: "var(--color-brand-primary)",
                  colorTextLightSolid: "var(--color-text-inverse)",
                  borderRadius: 10,
                },
                Checkbox: {
                  colorPrimary: "var(--color-brand-primary)",
                },
                Table: {
                  headerBg: "var(--color-bg-surface-hover)",
                  headerColor: "var(--color-text-secondary)",
                  headerSplitColor: "var(--color-border-divider)",
                  rowHoverBg: "var(--color-bg-surface-hover)",
                  borderColor: "var(--color-border-divider)",
                },
              },
            }}
          >
            <div
              data-app="admin"
              style={{
                minHeight: "100vh",
                background: "var(--layout-canvas-bg)",
                color: "var(--color-text-primary)",
              }}
            >
              {/* ===== ROOT GRID ===== */}
              <div
                style={{
                  display: "grid",
                  gridTemplateColumns: "var(--sidebar-width) 1fr",
                  gridTemplateRows: "auto 1fr",
                  minHeight: "100vh",
                }}
              >
                {/* ===== HEADER (GLOBAL / FULL WIDTH) ===== */}
                <header
                  style={{
                    gridColumn: "1 / -1",
                    position: "sticky",
                    top: 0,
                    zIndex: 80,
                    background:
                      "color-mix(in srgb, var(--layout-header-bg) 92%, transparent)",
                    backdropFilter: "blur(14px)",
                    WebkitBackdropFilter: "blur(14px)",
                  }}
                >
                  <Header />
                </header>

                {/* ===== SIDEBAR ===== */}
                <aside
                  className="sidebar"
                  style={{
                    gridRow: "2",
                    position: "sticky",
                    top: "var(--panel-header)",
                    height: "calc(100vh - var(--panel-header))",
                    overflow: "hidden",
                  }}
                >
                  <Sidebar />
                </aside>

                {/* ===== MAIN ===== */}
                <main
                  style={{
                    gridRow: "2",
                    minWidth: 0,
                    minHeight: 0,
                    overflow: "auto",
                    overscrollBehavior: "contain",
                    background: "var(--layout-page-bg)",
                  }}
                >
                  <div
                    style={{
                      padding: "var(--space-6)",
                      maxWidth: 1520,
                      margin: "0 auto",
                    }}
                  >
                    <Outlet />
                  </div>
                </main>
              </div>
            </div>
          </ConfigProvider>
        </NoticeProvider>
      </ProgramProvider>
    </ThemeProvider>
  );
}


==========================================================================================
# FILE: ui/layout/DomainLayout.tsx
==========================================================================================
// PATH: src/shared/ui/layout/DomainLayout.tsx
// Re-export from domain (SSOT) â€” ê¸°ì¡´ import ê²½ë¡œ ìœ ì§€

export { DomainLayout as default } from "@/shared/ui/domain";
export type { DomainTab } from "@/shared/ui/domain";


==========================================================================================
# FILE: ui/layout/Header.tsx
==========================================================================================
// PATH: src/shared/ui/layout/Header.tsx
import { useMemo, useState, useEffect } from "react";
import { useLocation, useNavigate } from "react-router-dom";
import { Dropdown, Input, Badge } from "antd";
import ThemeOverlay from "@/features/settings/overlays/ThemeOverlay";
import NoticeOverlay from "@/features/notice/overlays/NoticeOverlay";
import { useNotices } from "@/features/notice/context/NoticeContext";
import { useProgram } from "@/shared/program";
import { Button } from "@/shared/ui/ds";

type Crumb = { label: string; to?: string };

function IconMenu() {
  return (
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
      <path
        d="M4 6h16M4 12h16M4 18h16"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
    </svg>
  );
}

function IconSearch() {
  return (
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
      <path
        d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"
        stroke="currentColor"
        strokeWidth="2"
      />
      <path
        d="M16.5 16.5 21 21"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
    </svg>
  );
}

function IconPlus() {
  return (
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
      <path
        d="M12 5v14M5 12h14"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
    </svg>
  );
}

function IconUser() {
  return (
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
      <path
        d="M20 21a8 8 0 1 0-16 0"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
      <path
        d="M12 13a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z"
        stroke="currentColor"
        strokeWidth="2"
      />
    </svg>
  );
}

function IconBell() {
  return (
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
      <path
        d="M18 8a6 6 0 1 0-12 0c0 7-3 7-3 7h18s-3 0-3-7Z"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinejoin="round"
      />
      <path
        d="M13.73 21a2 2 0 0 1-3.46 0"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
    </svg>
  );
}

function IconPalette() {
  return (
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
      <path
        d="M12 22a10 10 0 1 1 7.07-17.07c1.38 1.38.43 3.74-1.52 3.74H15a3 3 0 0 0 0 6h1.56c1.62 0 2.66 1.72 1.86 3.14A10 10 0 0 1 12 22Z"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinejoin="round"
      />
      <path
        d="M7.5 10.5h0"
        stroke="currentColor"
        strokeWidth="3"
        strokeLinecap="round"
      />
      <path
        d="M10.5 7.5h0"
        stroke="currentColor"
        strokeWidth="3"
        strokeLinecap="round"
      />
      <path
        d="M13.5 7.5h0"
        stroke="currentColor"
        strokeWidth="3"
        strokeLinecap="round"
      />
      <path
        d="M16.5 10.5h0"
        stroke="currentColor"
        strokeWidth="3"
        strokeLinecap="round"
      />
    </svg>
  );
}

function stripAdminPrefix(pathname: string) {
  const p = pathname.split("?")[0] || "";
  if (p === "/admin") return "/";
  if (p.startsWith("/admin/")) return p.slice("/admin".length);
  return p;
}

function deriveCrumbs(pathname: string): Crumb[] {
  const p = stripAdminPrefix(pathname);
  if (p === "/" || p === "/dashboard") return [{ label: "ëŒ€ì‹œë³´ë“œ" }];
  if (p.startsWith("/lectures")) return [{ label: "ê°•ì˜", to: "/admin/lectures" }];
  if (p.startsWith("/students")) return [{ label: "í•™ìƒ", to: "/admin/students" }];
  if (p.startsWith("/exams")) return [{ label: "ì‹œí—˜", to: "/admin/exams" }];
  if (p.startsWith("/results")) return [{ label: "ê²°ê³¼", to: "/admin/results" }];
  if (p.startsWith("/clinic")) return [{ label: "í´ë¦¬ë‹‰", to: "/admin/clinic" }];
  if (p.startsWith("/staff")) return [{ label: "ì§ì›", to: "/admin/staff" }];
  if (p.startsWith("/videos")) return [{ label: "ì˜ìƒ", to: "/admin/videos" }];
  if (p.startsWith("/community"))
    return [{ label: "ì»¤ë®¤ë‹ˆí‹°", to: "/admin/community" }];
  if (p.startsWith("/messages"))
    return [{ label: "ë©”ì‹œì§€", to: "/admin/messages" }];
  if (p.startsWith("/profile"))
    return [{ label: "ì„¤ì •", to: "/admin/profile/account" }];
  return [{ label: "ì›Œí¬ìŠ¤í˜ì´ìŠ¤" }];
}

export default function Header() {
  const loc = useLocation();
  const nav = useNavigate();
  const crumbs = useMemo(() => deriveCrumbs(loc.pathname), [loc.pathname]);
  const { program } = useProgram();

  const [q, setQ] = useState("");
  const [openTheme, setOpenTheme] = useState(false);
  const [openNotice, setOpenNotice] = useState(false);
  const { unreadCount } = useNotices();









// ë°ëª¨ì°¾ê¸°
  /** ğŸ”’ Header-level override (ì„ì‹œ ê³ ì •ìš©) */
  const [academyName, setAcademyName] = useState<string | null>(null);

  useEffect(() => {
    if (academyName === null) {
      // ğŸ‘‡ ì—¬ê¸° ì›í•˜ëŠ” ì´ë¦„
      setAcademyName("ë°•ì²  ê³¼í•™");
    }
  }, [academyName]);


  // ì´ê±°ë³µêµ¬
  // const academyName = program?.display_name || "HakwonPlus";
  
  









  
  
  const logoUrl = program?.ui_config?.logo_url;

  const userMenu = {
    items: [
      { key: "profile", label: "ë‚´ ê³„ì • / ì„¤ì •" },
      { key: "divider-1", type: "divider" as const },
      { key: "logout", label: "ë¡œê·¸ì•„ì›ƒ" },
    ],
    onClick: ({ key }: { key: string }) => {
      if (key === "profile") nav("/admin/profile/account");
      if (key === "logout") nav("/login");
    },
  };

  const quickMenu = {
    items: [
      { key: "student", label: "í•™ìƒ ë“±ë¡" },
      { key: "lecture", label: "ê°•ì˜ ìƒì„±" },
      { key: "exam", label: "ì‹œí—˜ ìƒì„±" },
      { key: "divider-1", type: "divider" as const },
      { key: "clinic", label: "í´ë¦¬ë‹‰ ìƒì„±" },
    ],
    onClick: ({ key }: { key: string }) => {
      if (key === "student") nav("/admin/students");
      if (key === "lecture") nav("/admin/lectures");
      if (key === "exam") nav("/admin/exams");
      if (key === "clinic") nav("/admin/clinic");
    },
  };

  return (
    <>
      <div className="app-header">
        {/* LEFT */}
        <div className="app-header__left">
          <Button
            intent="ghost"
            size="lg"
            iconOnly
            className="app-header__iconBtn"
            onClick={() => document.dispatchEvent(new Event("ui:sidebar:toggle"))}
            aria-label="ì‚¬ì´ë“œë°” í† ê¸€"
            leftIcon={<IconMenu />}
          />

          <div className="app-header__brand">
            <span className="app-header__brandMark" aria-hidden>
              {logoUrl ? (
                <img src={logoUrl} alt="logo" />
              ) : (
                <span style={{ width: 8, height: 8, borderRadius: 999 }} />
              )}
            </span>
            <span className="app-header__brandName">{academyName}</span>
          </div>

          <div className="app-header__crumbs">
            {crumbs.map((c, idx) => {
              const isLast = idx === crumbs.length - 1;
              return (
                <div
                  key={`${c.label}-${idx}`}
                  className={[
                    "app-header__crumb",
                    isLast ? "app-header__crumb--active" : "app-header__crumb--muted",
                  ].join(" ")}
                >
                  {c.to ? (
                    <span
                      style={{ cursor: "pointer" }}
                      onClick={() => nav(c.to!)}
                      title={c.label}
                    >
                      {c.label}
                    </span>
                  ) : (
                    <span title={c.label} style={{ overflow: "hidden", textOverflow: "ellipsis" }}>
                      {c.label}
                    </span>
                  )}

                  {!isLast && <span className="app-header__crumbSep">â€º</span>}
                </div>
              );
            })}
          </div>
        </div>

        {/* CENTER */}
        <div className="app-header__center">
          <div style={{ width: "min(720px, 100%)" }}>
            <Input
              value={q}
              onChange={(e) => setQ(e.target.value)}
              placeholder="ì „ì²´ ê²€ìƒ‰ (í•™ìƒ/ê°•ì˜/ì‹œí—˜/í´ë¦¬ë‹‰/ì§ì›)â€¦"
              allowClear
              prefix={
                <span style={{ color: "var(--color-text-muted)" }}>
                  <IconSearch />
                </span>
              }
              onPressEnter={() =>
                nav(`/admin/dashboard?search=${encodeURIComponent(q.trim())}`)
              }
              style={{
                borderRadius: 999,
                height: 40,
              }}
            />
          </div>
        </div>

        {/* RIGHT */}
        <div className="app-header__right">
          <Dropdown menu={quickMenu} trigger={["click"]} placement="bottomRight">
            <span>
              <Button
                intent="secondary"
                size="lg"
                className="app-header__menuBtn"
                leftIcon={<IconPlus />}
              >
                ë§Œë“¤ê¸°
              </Button>
            </span>
          </Dropdown>

          <Button
            intent="secondary"
            size="lg"
            iconOnly
            className="app-header__iconBtn"
            onClick={() => setOpenNotice(true)}
            aria-label="ê³µì§€"
            leftIcon={
              <Badge count={unreadCount} size="small">
                <IconBell />
              </Badge>
            }
          />

          <Button
            intent="secondary"
            size="lg"
            iconOnly
            className="app-header__iconBtn"
            onClick={() => setOpenTheme(true)}
            aria-label="í…Œë§ˆ"
            leftIcon={<IconPalette />}
          />

          <Dropdown menu={userMenu} trigger={["click"]} placement="bottomRight">
            <span>
              <Button
                intent="secondary"
                size="lg"
                iconOnly
                className="app-header__iconBtn"
                aria-label="ë‚´ ê³„ì •"
                leftIcon={<IconUser />}
              />
            </span>
          </Dropdown>
        </div>
      </div>

      {openTheme && <ThemeOverlay onClose={() => setOpenTheme(false)} />}
      {openNotice && <NoticeOverlay onClose={() => setOpenNotice(false)} />}
    </>
  );
}


==========================================================================================
# FILE: ui/layout/MetaZone.tsx
==========================================================================================
// PATH: src/shared/ui/layout/MetaZone.tsx
import { PropsWithChildren } from "react";

export function MetaZone({ children }: PropsWithChildren) {
  return (
    <aside data-area="meta">
      {children}
    </aside>
  );
}


==========================================================================================
# FILE: ui/layout/Sidebar.tsx
==========================================================================================
// PATH: src/shared/ui/layout/Sidebar.tsx
import { NavLink, useLocation } from "react-router-dom";
import { useEffect, useMemo, useState } from "react";

const BASE = "/admin";
const SIDEBAR_STORAGE_KEY = "ui.sidebar.collapsed";

type NavItem = {
  to: string;
  label: string;
  icon: React.ReactNode;
};

type NavGroup = {
  title?: string;
  items: NavItem[];
};

function Icon({ d }: { d: string }) {
  return (
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
      <path
        d={d}
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
        strokeLinejoin="round"
      />
    </svg>
  );
}

function safeGetCollapsed(): boolean {
  try {
    const v = localStorage.getItem(SIDEBAR_STORAGE_KEY);
    return v === "1";
  } catch {
    return false;
  }
}

function safeSetCollapsed(v: boolean) {
  try {
    localStorage.setItem(SIDEBAR_STORAGE_KEY, v ? "1" : "0");
  } catch {
    // ignore
  }
}

function applySidebarLayout(collapsed: boolean) {
  const root = document.documentElement;
  root.setAttribute("data-sidebar", collapsed ? "collapsed" : "expanded");
  root.style.setProperty(
    "--sidebar-width",
    collapsed ? "var(--sidebar-width-collapsed)" : "260px"
  );
}

export default function Sidebar() {
  const loc = useLocation();
  const [collapsed, setCollapsed] = useState<boolean>(() => safeGetCollapsed());

  useEffect(() => {
    applySidebarLayout(collapsed);
    safeSetCollapsed(collapsed);
  }, [collapsed]);

  useEffect(() => {
    const onToggle = () => setCollapsed((v) => !v);
    document.addEventListener("ui:sidebar:toggle", onToggle);
    return () => document.removeEventListener("ui:sidebar:toggle", onToggle);
  }, []);

  const groups: NavGroup[] = useMemo(
    () => [
      {
        items: [
          {
            to: `${BASE}/dashboard`,
            label: "ëŒ€ì‹œë³´ë“œ",
            icon: <Icon d="M3 11l9-7 9 7v9H3z" />,
          },
          {
            to: `${BASE}/students`,
            label: "í•™ìƒ",
            icon: (
              <Icon d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm-7 8a7 7 0 0 1 14 0" />
            ),
          },
          {
            to: `${BASE}/lectures`,
            label: "ê°•ì˜",
            icon: <Icon d="M4 4h16v12H4zM8 20h8" />,
          },
        ],
      },
      {
        items: [
          {
            to: `${BASE}/exams`,
            label: "ì‹œí—˜",
            icon: <Icon d="M7 3h10v18H7zM9 7h6M9 11h6M9 15h4" />,
          },
          {
            to: `${BASE}/results`,
            label: "ì„±ì ",
            icon: <Icon d="M4 18h16M6 15V9M12 15V5M18 15v-7" />,
          },
          {
            to: `${BASE}/clinic`,
            label: "í´ë¦¬ë‹‰",
            icon: (
              <Icon d="M12 21s7-4 7-10a7 7 0 0 0-14 0c0 6 7 10 7 10Z" />
            ),
          },
        ],
      },
      {
        items: [
          {
            to: `${BASE}/staff`,
            label: "ì§ì›ê´€ë¦¬",
            icon: (
              <Icon d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm-7 8a7 7 0 0 1 14 0" />
            ),
          },
          {
            to: `${BASE}/videos`,
            label: "ì˜ìƒ",
            icon: <Icon d="M3 6h14v12H3zM17 10l4-2v8l-4-2z" />,
          },
          {
            to: `${BASE}/community`,
            label: "ì»¤ë®¤ë‹ˆí‹°",
            icon: <Icon d="M4 4h16v12H7l-3 3z" />,
          },
          {
            to: `${BASE}/messages`,
            label: "ë©”ì‹œì§€",
            icon: (
              <Icon d="M21 15a4 4 0 0 1-4 4H8l-5 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z" />
            ),
          },
        ],
      },
      {
        items: [
          {
            to: `${BASE}/settings`,
            label: "ì‹œìŠ¤í…œ ì„¤ì •",
            icon: (
              <Icon d="M12 15.5a3.5 3.5 0 1 0 0-7M19.4 15a8 8 0 0 0 0-6l2-1-2-4-2.3.5a8 8 0 0 0-3.4-2L11 1h-4l-.7 2.5a8 8 0 0 0-3.4 2L1.6 5l-2 4 2 1a8 8 0 0 0 0 6l-2 1 2 4 2.3-.5a8 8 0 0 0 3.4 2L7 23h4l.7-2.5a8 8 0 0 0 3.4-2l2.3.5 2-4Z" />
            ),
          },
          {
            to: `${BASE}/profile/account`,
            label: "ë‚´ ê³„ì •",
            icon: (
              <Icon d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm-7 8a7 7 0 0 1 14 0" />
            ),
          },
        ],
      },
    ],
    []
  );

  const isActive = (to: string) =>
    loc.pathname === to || loc.pathname.startsWith(to + "/");

  return (
    <aside
      className="sidebar sidebar-shell"
      style={{
        height: "100vh",
        display: "flex",
        flexDirection: "column",
        overflow: "hidden",
        background:
          "linear-gradient(180deg, var(--sidebar-bg), color-mix(in srgb, var(--sidebar-bg) 78%, var(--layout-canvas-bg)))",
      }}
    >
      <div style={{ flex: 1, overflow: "hidden", padding: "12px" }}>
        <div className="nav">
          {groups.map((g, gi) => (
            <div key={gi} className="sidebar-group">
              {g.title ? (
                <div className="sidebar-group-title">{g.title}</div>
              ) : null}

              {g.items.map((it) => {
                const active = isActive(it.to);

                return (
                  <NavLink
                    key={it.to}
                    to={it.to}
                    className={`nav-item ${active ? "active" : ""}`}
                    title={it.label}
                  >
                    <span
                      style={{
                        display: "grid",
                        placeItems: "center",
                        width: 22,
                        flex: "0 0 auto",
                      }}
                    >
                      {it.icon}
                    </span>

                    {!collapsed && (
                      <span className="label" style={{ minWidth: 0 }}>
                        {it.label}
                      </span>
                    )}
                  </NavLink>
                );
              })}
            </div>
          ))}
        </div>
      </div>
    </aside>
  );
}


==========================================================================================
# FILE: ui/layout/index.ts
==========================================================================================
// src/shared/ui/layout/index.ts

/**
 * ======================================================
 * Layout Exports (SSOT)
 *
 * â— Layout ì€ ë ˆì´ì•„ì›ƒë§Œ export í•œë‹¤
 * â— Design System(ds)ì€ ì ˆëŒ€ ì—¬ê¸°ì„œ export í•˜ì§€ ì•ŠëŠ”ë‹¤
 *
 * - Sidebar
 * - Header
 * - AppLayout
 * ======================================================
 */

export { default as AppLayout } from "./AppLayout";
export { default as Sidebar } from "./Sidebar";
export { default as Header } from "./Header";
export { default as DomainLayout } from "./DomainLayout";
export type { DomainTab } from "./DomainLayout";


==========================================================================================
# FILE: ui/modal/AdminModal.tsx
==========================================================================================
// PATH: src/shared/ui/modal/AdminModal.tsx
import { Modal } from "antd";
import React from "react";

export type AdminModalType = "action" | "confirm" | "inspect";

type AdminModalProps = {
  open: boolean;
  onClose: () => void;
  type?: AdminModalType;
  width?: number;
  children: React.ReactNode;
};

export default function AdminModal({
  open,
  onClose,
  type = "action",
  width = 520,
  children,
}: AdminModalProps) {
  const isConfirm = type === "confirm";

  return (
    <Modal
      open={open}
      onCancel={onClose}
      footer={null}
      width={width}
      centered
      destroyOnHidden
      maskClosable={!isConfirm}
      closable={!isConfirm}
      keyboard={!isConfirm}
      styles={{
        content: {
          padding: 0,
          borderRadius: "var(--radius-xl)",
          overflow: "hidden",
          border: isConfirm
            ? "1px solid color-mix(in srgb, var(--color-error) 28%, var(--color-border-divider))"
            : "1px solid var(--color-border-divider)",
          boxShadow: "var(--elevation-3)",
          background: "var(--color-bg-surface)",
        },
        mask: {
          backdropFilter: "blur(3px)",
          backgroundColor: isConfirm ? "rgba(0,0,0,0.58)" : "rgba(0,0,0,0.42)",
        },
      }}
      className={`admin-modal admin-modal--${type}`}
    >
      {children}
    </Modal>
  );
}


==========================================================================================
# FILE: ui/modal/ModalBody.tsx
==========================================================================================
// PATH: src/shared/ui/modal/ModalBody.tsx
import React from "react";

export default function ModalBody({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <div
      style={{
        padding: "20px 24px",
        background: "var(--color-bg-surface)",
      }}
    >
      {children}
    </div>
  );
}


==========================================================================================
# FILE: ui/modal/ModalFooter.tsx
==========================================================================================
// PATH: src/shared/ui/modal/ModalFooter.tsx
import React from "react";

export default function ModalFooter({
  left,
  right,
}: {
  left?: React.ReactNode;
  right?: React.ReactNode;
}) {
  return (
    <div
      style={{
        padding: "16px 24px",
        borderTop: "1px solid var(--color-border-divider)",
        display: "flex",
        alignItems: "center",
        justifyContent: "space-between",
        background: "var(--color-bg-surface)",
      }}
    >
      <div>{left}</div>
      <div style={{ display: "flex", gap: 8 }}>{right}</div>
    </div>
  );
}


==========================================================================================
# FILE: ui/modal/ModalHeader.tsx
==========================================================================================
// PATH: src/shared/ui/modal/ModalHeader.tsx
import React from "react";

type ModalHeaderProps = {
  title: React.ReactNode;
  description?: React.ReactNode;
  type?: "action" | "confirm" | "inspect";
};

function Icon({ type }: { type: "action" | "confirm" | "inspect" }) {
  const common = {
    width: 18,
    height: 18,
    viewBox: "0 0 24 24",
    fill: "none" as const,
  };

  if (type === "confirm") {
    return (
      <svg {...common}>
        <path
          d="M12 9v4"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
        />
        <path
          d="M12 17h0"
          stroke="currentColor"
          strokeWidth="3"
          strokeLinecap="round"
        />
        <path
          d="M10.3 4.4 2.5 18a2 2 0 0 0 1.7 3h15.6a2 2 0 0 0 1.7-3L13.7 4.4a2 2 0 0 0-3.4 0Z"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinejoin="round"
        />
      </svg>
    );
  }

  if (type === "inspect") {
    return (
      <svg {...common}>
        <path
          d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"
          stroke="currentColor"
          strokeWidth="2"
        />
        <path
          d="M16.5 16.5 21 21"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
        />
      </svg>
    );
  }

  return (
    <svg {...common}>
      <path
        d="M12 3v18"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
        opacity="0.25"
      />
      <path
        d="M7 12h10"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
      <path
        d="M12 7v10"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
      />
    </svg>
  );
}

export default function ModalHeader({
  title,
  description,
  type = "action",
}: ModalHeaderProps) {
  const isConfirm = type === "confirm";

  const accentColor =
    type === "confirm"
      ? "var(--color-error)"
      : type === "inspect"
      ? "var(--color-text-muted)"
      : "var(--color-brand-primary)";

  const bg =
    type === "confirm"
      ? "color-mix(in srgb, var(--color-error) 12%, var(--bg-surface))"
      : type === "inspect"
      ? "var(--bg-surface-soft)"
      : "var(--bg-surface)";

  return (
    <div
      style={{
        padding: "18px 24px",
        background: bg,
        borderBottom: "1px solid var(--color-border-divider)",
        position: "relative",
      }}
    >
      {/* top accent rail (very thin, enterprise) */}
      <div
        aria-hidden
        style={{
          position: "absolute",
          left: 0,
          top: 0,
          right: 0,
          height: 2,
          background: accentColor,
          opacity: isConfirm ? 0.9 : 0.55,
        }}
      />

      <div style={{ display: "flex", alignItems: "flex-start", gap: 12 }}>
        <div
          aria-hidden
          style={{
            width: 34,
            height: 34,
            borderRadius: 12,
            display: "grid",
            placeItems: "center",
            border: "1px solid var(--color-border-divider)",
            background: "var(--color-bg-surface)",
            color: accentColor,
            boxShadow: "var(--elevation-1)",
            flex: "0 0 auto",
          }}
        >
          <Icon type={type} />
        </div>

        <div style={{ minWidth: 0, flex: 1 }}>
          <div
            style={{
              fontSize: 15,
              fontWeight: "var(--font-title)",
              letterSpacing: "-0.28px",
              color: "var(--color-text-primary)",
              lineHeight: 1.25,
            }}
          >
            {title}
          </div>

          {description && (
            <div
              style={{
                marginTop: 6,
                fontSize: 13,
                fontWeight: "var(--font-meta)",
                color: isConfirm ? "var(--color-text-secondary)" : "var(--color-text-muted)",
                lineHeight: 1.5,
              }}
            >
              {description}
            </div>
          )}

          {/* confirm-only: subtle warning cue */}
          {isConfirm && (
            <div
              style={{
                marginTop: 10,
                display: "inline-flex",
                alignItems: "center",
                gap: 8,
                padding: "8px 10px",
                borderRadius: 12,
                border:
                  "1px solid color-mix(in srgb, var(--color-error) 22%, var(--color-border-divider))",
                background:
                  "color-mix(in srgb, var(--color-error) 6%, var(--color-bg-surface))",
                color: "var(--color-text-secondary)",
                fontSize: 12,
                fontWeight: "var(--font-meta)",
                letterSpacing: "-0.12px",
              }}
            >
              <span
                aria-hidden
                style={{
                  width: 8,
                  height: 8,
                  borderRadius: 999,
                  background: "var(--color-error)",
                  boxShadow:
                    "0 0 0 3px color-mix(in srgb, var(--color-error) 14%, transparent)",
                }}
              />
              ë³€ê²½ ì‚¬í•­ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
            </div>
          )}
        </div>
      </div>
    </div>
  );
}


==========================================================================================
# FILE: ui/modal/index.ts
==========================================================================================
// PATH: src/shared/ui/modal/index.ts
export { default as AdminModal } from "./AdminModal";
export { default as ModalHeader } from "./ModalHeader";
export { default as ModalBody } from "./ModalBody";
export { default as ModalFooter } from "./ModalFooter";


==========================================================================================
# FILE: ui/overlays/InspectOverlayShell.tsx
==========================================================================================
import { ReactNode, useEffect } from "react";
import { createPortal } from "react-dom";
import { Panel } from "@/shared/ui/ds";

type InspectOverlayShellProps = {
  title: string;
  description?: string;
  width?: number;
  onClose: () => void;

  /** NEW */
  sidebar?: ReactNode;
  tabs?: ReactNode;
  children: ReactNode;
};

export default function InspectOverlayShell({
  title,
  description,
  width = 1080,
  onClose,
  sidebar,
  tabs,
  children,
}: InspectOverlayShellProps) {
  useEffect(() => {
    function onKeyDown(e: KeyboardEvent) {
      if (e.key === "Escape") onClose();
    }
    window.addEventListener("keydown", onKeyDown);
    return () => window.removeEventListener("keydown", onKeyDown);
  }, [onClose]);

  return createPortal(
    <div
      data-overlay="inspect"
      style={{
        position: "fixed",
        inset: 0,
        zIndex: 50,
        background: "rgba(0,0,0,0.45)",
        display: "flex",
        justifyContent: "center",
        alignItems: "flex-start",
        padding: 32,
        overflow: "auto",
      }}
      onClick={onClose}
    >
      <div
        style={{ width: "100%", maxWidth: width }}
        onClick={(e) => e.stopPropagation()}
      >
        <Panel title={title} description={description}>
          <div
            style={{
              display: "grid",
              gridTemplateColumns: sidebar ? "320px 1fr" : "1fr",
              gap: 24,
            }}
          >
            {/* ===== LEFT : META / SUMMARY ===== */}
            {sidebar && (
              <Panel variant="subtle" density="compact">
                {sidebar}
              </Panel>
            )}

            {/* ===== RIGHT : WORK ===== */}
            <div style={{ minWidth: 0 }}>
              {tabs && <div style={{ marginBottom: 12 }}>{tabs}</div>}

              <div>{children}</div>
            </div>
          </div>
        </Panel>
      </div>
    </div>,
    document.body
  );
}


==========================================================================================
# FILE: ui/overlays/index.ts
==========================================================================================
export { default as InspectOverlayShell } from "./InspectOverlayShell";


==========================================================================================
# FILE: ui/state/ModalState.tsx
==========================================================================================
// PATH: src/shared/ui/state/ModalState.tsx
export default function ModalState({
  message = "ì²˜ë¦¬ ì¤‘ì…ë‹ˆë‹¤â€¦",
}: {
  message?: string;
}) {
  return (
    <div
      style={{
        padding: "32px 24px",
        textAlign: "center",
        fontSize: 13,
        fontWeight: "var(--font-meta)",
        color: "var(--color-text-muted)",
      }}
    >
      {message}
    </div>
  );
}


==========================================================================================
# FILE: ui/state/PageState.tsx
==========================================================================================
// PATH: src/shared/ui/state/PageState.tsx
import React from "react";
import EmptyState, { EmptyStateTone } from "@/shared/ui/ds/EmptyState";

export type PageStateType = "empty" | "loading" | "error";

export default function PageState({
  type,
  title,
  description,
}: {
  type: PageStateType;
  title?: string;
  description?: string;
}) {
  const tone: EmptyStateTone =
    type === "loading" ? "loading" : type === "error" ? "error" : "empty";

  const fallbackTitle =
    type === "loading"
      ? title ?? "ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦"
      : type === "error"
      ? title ?? "ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"
      : title ?? "í‘œì‹œí•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤";

  const fallbackDesc =
    type === "loading"
      ? description ?? "ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”."
      : type === "error"
      ? description ?? "ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."
      : description;

  // Page context: do NOT render a nested panel container.
  // Place this under hero or as page content section.
  return (
    <div
      style={{
        borderRadius: "var(--radius-xl)",
        border: "1px solid var(--color-border-divider)",
        background: "var(--color-bg-surface)",
        boxShadow: "var(--elevation-1)",
      }}
    >
      <EmptyState
        mode="embedded"
        scope="page"
        tone={tone}
        title={fallbackTitle}
        description={fallbackDesc}
      />
    </div>
  );
}


==========================================================================================
# FILE: ui/state/PanelState.tsx
==========================================================================================
// PATH: src/shared/ui/state/PanelState.tsx
import React from "react";
import EmptyState from "@/shared/ui/ds/EmptyState";

export default function PanelState({
  title,
  description,
  tone = "empty",
}: {
  title?: string;
  description?: string;
  tone?: "empty" | "error" | "loading";
}) {
  // PanelBody ë‚´ë¶€ì—ì„œ ì“°ì´ë¯€ë¡œ "panel card"ë¥¼ ì¤‘ì²©í•˜ì§€ ì•ŠëŠ”ë‹¤.
  return (
    <div style={{ padding: "var(--space-2) 0" }}>
      <EmptyState
        mode="embedded"
        scope="panel"
        tone={tone}
        title={title ?? "ë°ì´í„° ì—†ìŒ"}
        description={description}
      />
    </div>
  );
}


==========================================================================================
# FILE: ui/state/index.ts
==========================================================================================
// PATH: src/shared/ui/state/index.ts
export { default as PageState } from "./PageState";
export { default as PanelState } from "./PanelState";
export { default as ModalState } from "./ModalState";


==========================================================================================
# FILE: ui/templates/ListPage.tsx
==========================================================================================
// PATH: src/shared/ui/templates/ListPage.tsx
import React from "react";
import { Page, Panel, SectionHeader } from "@/shared/ui/ds";

export default function ListPage({
  title,
  description,
  actions,
  navigation,
  filters,
  children,
}: {
  title: React.ReactNode;
  description?: React.ReactNode;
  actions?: React.ReactNode;
  navigation?: React.ReactNode;
  filters?: React.ReactNode;
  children: React.ReactNode;
}) {
  return (
    <Page density="browse">
      {/* ===== SECTION HEADER (GLOBAL) ===== */}
      <SectionHeader
        title={title}
        description={description}
        actions={actions}
        navigation={navigation}
      />

      {/* ===== FILTER ZONE ===== */}
      {filters && (
        <div
          style={{
            marginTop: 20,
            borderRadius: "var(--radius-xl)",
            border: "1px solid var(--color-border-divider)",
            background: "var(--color-bg-surface)",
            boxShadow: "var(--elevation-1)",
            overflow: "hidden",
          }}
        >
          <div
            style={{
              padding: "14px 16px",
              background: "var(--bg-surface)",
              borderBottom: "1px solid var(--color-border-divider)",
              display: "flex",
              alignItems: "center",
              justifyContent: "space-between",
            }}
          >
            <div
              style={{
                fontSize: 12,
                fontWeight: "var(--font-title)",
                letterSpacing: "-0.12px",
                color: "var(--color-text-secondary)",
              }}
            >
              í•„í„°
            </div>
          </div>

          <div style={{ padding: 16 }}>{filters}</div>
        </div>
      )}

      {/* ===== WORK CUT (ì¤‘ìš”) ===== */}
      <div
        aria-hidden
        style={{
          margin: "28px 0 18px",
          height: 1,
          background:
            "linear-gradient(90deg, transparent, var(--color-border-divider), transparent)",
        }}
      />

      {/* ===== WORK PANEL ===== */}
      <Panel variant="default" density="default">
        {children}
      </Panel>
    </Page>
  );
}


==========================================================================================
# FILE: ui/templates/index.ts
==========================================================================================
// PATH: src/shared/ui/templates/index.ts
export { default as ListPage } from "./ListPage";
