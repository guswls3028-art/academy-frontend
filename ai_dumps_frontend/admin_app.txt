====================================================================================================
# FRONTEND FOLDER: admin_app
# ROOT PATH: C:\academyfront\src\admin_app
====================================================================================================


==========================================================================================
# FILE: api/branding.ts
==========================================================================================
// PATH: src/admin_app/api/branding.ts
// Tenant branding: logo/image upload (R2) and ui_config. Backend API TBD.

import api from "@/shared/api/axios";

export type TenantBrandingDto = {
  tenantId: number;
  loginTitle?: string;
  loginSubtitle?: string;
  logoUrl?: string;
  windowTitle?: string;
  displayName?: string;
};

/** GET tenant branding (from Program.ui_config or Tenant). Backend TBD. */
export async function getTenantBranding(
  tenantId: number
): Promise<TenantBrandingDto | null> {
  try {
    const res = await api.get<TenantBrandingDto>(
      `/core/tenant-branding/${tenantId}/`
    );
    return res.data ?? null;
  } catch {
    return null;
  }
}

/** POST upload logo image for tenant. Backend uploads to R2, returns logoUrl. */
export async function uploadTenantLogo(
  tenantId: number,
  file: File
): Promise<{ logoUrl: string }> {
  const form = new FormData();
  form.append("file", file);
  const res = await api.post<{ logoUrl: string }>(
    `/core/tenant-branding/${tenantId}/upload-logo/`,
    form,
    {
      headers: { "Content-Type": "multipart/form-data" },
    }
  );
  return res.data;
}

/** PATCH tenant branding (loginTitle, logoUrl, etc.). Backend TBD. */
export async function patchTenantBranding(
  tenantId: number,
  payload: Partial<TenantBrandingDto>
): Promise<TenantBrandingDto> {
  const res = await api.patch<TenantBrandingDto>(
    `/core/tenant-branding/${tenantId}/`,
    payload
  );
  return res.data;
}


==========================================================================================
# FILE: api/tenants.ts
==========================================================================================
// PATH: src/admin_app/api/tenants.ts
// Tenant management API

import api from "@/shared/api/axios";

export type TenantDto = {
  id: number;
  code: string;
  name: string;
  isActive: boolean;
  primaryDomain: string | null;
  domains: string[];
};

export type TenantDetailDto = TenantDto & {
  domains: Array<{ host: string; isPrimary: boolean }>;
  hasProgram: boolean;
};

export type CreateTenantDto = {
  code: string;
  name: string;
  domain?: string;
};

export type TenantOwnerDto = {
  tenantId?: number;
  tenantCode?: string;
  userId: number;
  username: string;
  name: string;
  phone?: string;
  role: string;
};

/** GET all tenants */
export async function getTenants(): Promise<TenantDto[]> {
  const res = await api.get<TenantDto[]>("/core/tenants/");
  return res.data;
}

/** GET tenant detail */
export async function getTenant(tenantId: number): Promise<TenantDetailDto> {
  const res = await api.get<TenantDetailDto>(`/core/tenants/${tenantId}/`);
  return res.data;
}

/** POST create tenant */
export async function createTenant(payload: CreateTenantDto): Promise<TenantDto> {
  const res = await api.post<TenantDto>("/core/tenants/create/", payload);
  return res.data;
}

/** PATCH update tenant */
export async function updateTenant(
  tenantId: number,
  payload: Partial<Pick<TenantDto, "name" | "isActive">>
): Promise<TenantDetailDto> {
  const res = await api.patch<TenantDetailDto>(`/core/tenants/${tenantId}/`, payload);
  return res.data;
}

/** GET list of owners for a tenant */
export async function getTenantOwners(tenantId: number): Promise<TenantOwnerDto[]> {
  const res = await api.get<TenantOwnerDto[]>(`/core/tenants/${tenantId}/owners/`);
  return res.data;
}

/** POST register owner for tenant */
export async function registerTenantOwner(
  tenantId: number,
  payload: {
    username: string;
    password?: string;
    name?: string;
    phone?: string;
  }
): Promise<TenantOwnerDto> {
  const res = await api.post<TenantOwnerDto>(`/core/tenants/${tenantId}/owner/`, payload);
  return res.data;
}

/** PATCH update owner (name, phone) */
export async function updateTenantOwner(
  tenantId: number,
  userId: number,
  payload: { name?: string; phone?: string }
): Promise<TenantOwnerDto> {
  const res = await api.patch<TenantOwnerDto>(
    `/core/tenants/${tenantId}/owners/${userId}/`,
    payload
  );
  return res.data;
}

/** DELETE remove owner from tenant (membership deactivated) */
export async function removeTenantOwner(
  tenantId: number,
  userId: number
): Promise<void> {
  await api.delete(`/core/tenants/${tenantId}/owners/${userId}/`);
}


==========================================================================================
# FILE: components/AdminOwnerBottomSheet.tsx
==========================================================================================
// PATH: src/admin_app/components/AdminOwnerBottomSheet.tsx
// Owner ë“±ë¡ â€” ì»´íŒ©íŠ¸ í¼ + ë²„íŠ¼ ì•„ë˜ ê³ ì • ê²°ê³¼ (í† ìŠ¤íŠ¸ ëŒ€ì‹ )

import OwnerFormCompact from "@/admin_app/components/OwnerFormCompact";

type Props = {
  open: boolean;
  onClose: () => void;
  tenantId: number;
  tenantName: string;
  onSuccess?: () => void;
};

export default function AdminOwnerBottomSheet({ open, onClose, tenantId, tenantName, onSuccess }: Props) {
  if (!open) return null;

  return (
    <>
      <div className="fixed inset-0 bg-black/40 z-40" onClick={onClose} aria-hidden />
      <div className="fixed left-0 right-0 bottom-0 z-50 bg-white rounded-t-2xl shadow-xl max-h-[85vh] flex flex-col pb-8">
        <div className="shrink-0 flex items-center justify-between p-4 border-b border-slate-200">
          <h2 className="text-lg font-semibold text-slate-900">ì›ì¥ ê³„ì • ìƒì„±</h2>
          <button type="button" onClick={onClose} className="p-2 -m-2 rounded-lg text-slate-500 min-w-[48px] min-h-[48px] flex items-center justify-center" aria-label="ë‹«ê¸°">âœ•</button>
        </div>
        <div className="flex-1 min-h-0 overflow-auto p-4">
          <p className="text-sm text-slate-600 mb-4">{tenantName}</p>
          <OwnerFormCompact
            tenantId={tenantId}
            tenantName={tenantName}
            showResultBelow={true}
            onSuccess={() => {
              onSuccess?.();
            }}
          />
        </div>
      </div>
    </>
  );
}


==========================================================================================
# FILE: components/AdminToast.tsx
==========================================================================================
// PATH: src/admin_app/components/AdminToast.tsx
// ìƒë‹¨ ê³ ì • í† ìŠ¤íŠ¸ â€” 3ì´ˆ í›„ í˜ì´ë“œ, success/error

import { useEffect } from "react";

export type ToastKind = "success" | "error";

type Props = {
  message: string;
  kind?: ToastKind;
  visible: boolean;
  onClose: () => void;
  duration?: number;
};

export default function AdminToast({ message, kind = "success", visible, onClose, duration = 3000 }: Props) {
  useEffect(() => {
    if (!visible || !message) return;
    const t = setTimeout(onClose, duration);
    return () => clearTimeout(t);
  }, [visible, message, duration, onClose]);

  if (!visible || !message) return null;

  const isSuccess = kind === "success";
  return (
    <div
      role="alert"
      className={`fixed left-4 right-4 top-4 z-[100] flex items-center justify-center gap-2 rounded-xl border px-4 py-3 text-sm font-medium shadow-lg transition-opacity duration-200 ${
        isSuccess ? "bg-emerald-50 text-emerald-800 border-emerald-200" : "bg-red-50 text-red-800 border-red-200"
      }`}
    >
      {isSuccess && <span aria-hidden>âœ“</span>}
      <span className="whitespace-pre-line">{message}</span>
    </div>
  );
}


==========================================================================================
# FILE: components/OwnerFormCompact.tsx
==========================================================================================
// PATH: src/admin_app/components/OwnerFormCompact.tsx
// ë°€ë„ ë†’ì€ í•œ ì¤„ ë¼ë²¨ + Enter ë‹¤ìŒ í•„ë“œ ì´ë™ + ë²„íŠ¼ ì•„ë˜ ê³ ì • ê²°ê³¼

import { useRef, useCallback, useState } from "react";
import { registerTenantOwner } from "@/admin_app/api/tenants";
import "@/styles/design-system/index.css";
import "@/styles/design-system/ds/input.css";

type Props = {
  tenantId: number;
  tenantName: string;
  onSuccess?: () => void;
  /** ìƒì„± í›„ ê²°ê³¼ë¥¼ ë²„íŠ¼ ì•„ë˜ ê³ ì • í‘œì‹œ (í† ìŠ¤íŠ¸ ëŒ€ì‹ ) */
  showResultBelow?: boolean;
};

const LABELS = [
  { key: "username" as const, label: "ID", type: "text", placeholder: "admin97" },
  { key: "password" as const, label: "PW", type: "password", placeholder: "ë¹„ë°€ë²ˆí˜¸" },
  { key: "name" as const, label: "ì´ë¦„", type: "text", placeholder: "í™ê¸¸ë™" },
  { key: "phone" as const, label: "ì „í™”", type: "text", placeholder: "01012345678" },
];

export default function OwnerFormCompact({
  tenantId,
  tenantName,
  onSuccess,
  showResultBelow = true,
}: Props) {
  const refs = [
    useRef<HTMLInputElement>(null),
    useRef<HTMLInputElement>(null),
    useRef<HTMLInputElement>(null),
    useRef<HTMLInputElement>(null),
  ];
  const [username, setUsername] = useState("");
  const [password, setPassword] = useState("");
  const [name, setName] = useState("");
  const [phone, setPhone] = useState("");
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [result, setResult] = useState<{ username: string } | null>(null);

  const values = [username, password, name, phone];
  const setters = [setUsername, setPassword, setName, setPhone];

  const handleKeyDown = useCallback(
    (e: React.KeyboardEvent, index: number) => {
      if (e.key !== "Enter") return;
      e.preventDefault();
      if (index < refs.length - 1) {
        refs[index + 1].current?.focus();
      } else {
        (e.target as HTMLInputElement).form?.requestSubmit();
      }
    },
    []
  );

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!username.trim()) { setError("IDë¥¼ ì…ë ¥í•˜ì„¸ìš”."); return; }
    if (!password) { setError("PWë¥¼ ì…ë ¥í•˜ì„¸ìš”."); return; }
    setError(null);
    setResult(null);
    setLoading(true);
    try {
      await registerTenantOwner(tenantId, {
        username: username.trim(),
        password,
        name: name.trim() || undefined,
        phone: phone.trim() || undefined,
      });
      const created = username.trim();
      setUsername("");
      setPassword("");
      setName("");
      setPhone("");
      setResult({ username: created });
      onSuccess?.();
      refs[0].current?.focus();
    } catch (err: unknown) {
      const detail = (err as { response?: { data?: { detail?: string } } })?.response?.data?.detail;
      setError(detail || "ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
    } finally {
      setLoading(false);
    }
  };

  return (
    <form onSubmit={handleSubmit} className="space-y-3">
      {LABELS.map(({ key, label, type, placeholder }, i) => (
        <div key={key} className="flex items-center gap-3">
          <label className="w-10 shrink-0 text-sm font-medium text-slate-600">{label}</label>
          <input
            ref={refs[i]}
            type={type}
            value={values[i]}
            onChange={(e) => setters[i](e.target.value)}
            onKeyDown={(e) => handleKeyDown(e, i)}
            placeholder={placeholder}
            className="ds-input flex-1 py-2.5 rounded-lg min-h-[44px] text-base"
            autoComplete={key === "password" ? "new-password" : "off"}
          />
        </div>
      ))}
      <button
        type="submit"
        disabled={loading}
        className="w-full ds-button min-h-[48px] rounded-xl mt-1"
        data-intent="primary"
        data-size="md"
      >
        {loading ? "ìƒì„± ì¤‘â€¦" : "ì›ì¥ ê³„ì • ìƒì„±"}
      </button>
      {showResultBelow && result && (
        <div className="mt-3 p-3 rounded-xl bg-emerald-50 border border-emerald-200 text-sm text-emerald-800">
          âœ“ ìƒì„± ì™„ë£Œ â€” <strong>{result.username}</strong> (OWNER)
        </div>
      )}
      {error && (
        <div className="mt-3 p-3 rounded-xl bg-red-50 border border-red-200 text-sm text-red-800">
          {error}
        </div>
      )}
    </form>
  );
}


==========================================================================================
# FILE: components/StickySaveBar.tsx
==========================================================================================
// PATH: src/admin_app/components/StickySaveBar.tsx
// ëª¨ë°”ì¼ í•˜ë‹¨ ê³ ì • ì €ì¥ ë°” â€” Dirty ì‹œì—ë§Œ í‘œì‹œ

type Props = {
  visible: boolean;
  onDiscard: () => void;
  onSave: () => void;
  saving?: boolean;
};

export default function StickySaveBar({ visible, onDiscard, onSave, saving }: Props) {
  if (!visible) return null;

  return (
    <div className="fixed left-0 right-0 bottom-0 z-30 p-4 bg-white border-t border-slate-200 shadow-[0_-4px_12px_rgba(0,0,0,0.08)] safe-area-pb">
      <div className="text-xs text-slate-500 mb-2">ë³€ê²½ ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤</div>
      <div className="flex gap-3">
        <button
          type="button"
          onClick={onDiscard}
          className="flex-1 ds-button min-h-[48px] rounded-xl"
          data-intent="secondary"
          data-size="md"
        >
          ì·¨ì†Œ
        </button>
        <button
          type="button"
          onClick={onSave}
          disabled={saving}
          className="flex-1 ds-button min-h-[48px] rounded-xl"
          data-intent="primary"
          data-size="md"
        >
          {saving ? "ì €ì¥ ì¤‘â€¦" : "ì €ì¥"}
        </button>
      </div>
    </div>
  );
}


==========================================================================================
# FILE: features/tenants/TenantDetailPanel.tsx
==========================================================================================
// PATH: src/admin_app/features/tenants/TenantDetailPanel.tsx
// ìš°ì¸¡ ì›Œí¬ìŠ¤í˜ì´ìŠ¤: íƒ­(Overview, Branding, Domains, Owners) + ë‚´ìš©

import { getTenantBranding, getTenantIdFromCode } from "@/shared/tenant/config";
import type { TenantDto, TenantOwnerDto } from "@/admin_app/api/tenants";
import OverviewTab from "./tabs/OverviewTab";
import BrandingTab from "./tabs/BrandingTab";
import DomainsTab from "./tabs/DomainsTab";
import OwnersTab from "./tabs/OwnersTab";

export type TabId = "overview" | "branding" | "domains" | "owners";

const TABS: { id: TabId; label: string }[] = [
  { id: "overview", label: "Overview" },
  { id: "branding", label: "Branding" },
  { id: "domains", label: "Domains" },
  { id: "owners", label: "Owners" },
];

type BrandingState = {
  logoUrls: Record<number, string>;
  loginTitles: Record<number, string>;
  loginSubtitles: Record<number, string>;
  windowTitles: Record<number, string>;
  displayNames: Record<number, string>;
};

type Props = {
  tenant: TenantDto | null;
  activeTab: TabId;
  onTabChange: (tab: TabId) => void;
  branding: BrandingState;
  uploadingLogoId: number | null;
  ownersList: TenantOwnerDto[];
  ownersLoading: boolean;
  onOpenOwnerSheet: () => void;
  onRemoveOwner: (tenantId: number, userId: number) => Promise<void>;
  onUpdateOwner: (tenantId: number, userId: number, payload: { name?: string; phone?: string }) => Promise<void>;
  onLogoUpload: (tenantId: number, file: File) => void;
  onSaveBranding: (tenantId: number) => void;
  onDisplayNameChange: (tenantId: number, value: string) => void;
  onWindowTitleChange: (tenantId: number, value: string) => void;
  onLoginTitleChange: (tenantId: number, value: string) => void;
  onLoginSubtitleChange: (tenantId: number, value: string) => void;
};

export default function TenantDetailPanel({
  tenant,
  activeTab,
  onTabChange,
  branding,
  uploadingLogoId,
  ownersList,
  ownersLoading,
  onOpenOwnerSheet,
  onRemoveOwner,
  onUpdateOwner,
  onLogoUpload,
  onSaveBranding,
  onDisplayNameChange,
  onWindowTitleChange,
  onLoginTitleChange,
  onLoginSubtitleChange,
}: Props) {
  if (!tenant) {
    return (
      <div className="admin-tenant-detail-panel flex flex-col h-full min-h-0 bg-slate-50/50 flex-1 flex items-center justify-center p-8">
        <p className="text-slate-500 text-sm">
          ì¢Œì¸¡ì—ì„œ í…Œë„ŒíŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš”.
        </p>
      </div>
    );
  }

  const id = tenant.id;
  const logicalId = getTenantIdFromCode(tenant.code);
  const fallback = logicalId != null ? getTenantBranding(logicalId) : undefined;
  const logoUrl = branding.logoUrls[id] ?? fallback?.logoUrl ?? null;
  const loginTitle = branding.loginTitles[id] ?? fallback?.loginTitle ?? "";
  const loginSubtitle = branding.loginSubtitles[id] ?? fallback?.loginSubtitle ?? "";
  const windowTitle = branding.windowTitles[id] ?? "";
  const displayName = branding.displayNames[id] ?? fallback?.displayName ?? tenant.name;

  return (
    <div className="admin-tenant-detail-panel flex flex-col h-full min-h-0 bg-white border border-slate-200 rounded-lg overflow-hidden flex-1">
      <div className="shrink-0 border-b border-slate-200 bg-white">
        <div className="px-4 py-3 border-b border-slate-100">
          <h2 className="text-lg font-semibold text-slate-900">
            {tenant.name}
          </h2>
          <p className="text-sm text-slate-500">
            {tenant.code} Â· ID {tenant.id}
            {tenant.primaryDomain && ` Â· ${tenant.primaryDomain}`}
          </p>
        </div>
        <nav className="flex gap-0 px-2" aria-label="Tenant tabs">
          {TABS.map(({ id: tabId, label }) => (
            <button
              key={tabId}
              type="button"
              onClick={() => onTabChange(tabId)}
              className={`px-4 py-3 text-sm font-medium border-b-2 transition-colors ${
                activeTab === tabId
                  ? "border-slate-800 text-slate-900"
                  : "border-transparent text-slate-500 hover:text-slate-700"
              }`}
            >
              {label}
            </button>
          ))}
        </nav>
      </div>
      <div className="flex-1 min-h-0 overflow-auto p-4">
        {activeTab === "overview" && <OverviewTab tenant={tenant} />}
        {activeTab === "branding" && (
          <BrandingTab
            tenantId={id}
            tenantName={tenant.name}
            logoUrl={logoUrl}
            displayName={displayName}
            windowTitle={windowTitle}
            loginTitle={loginTitle}
            loginSubtitle={loginSubtitle}
            uploading={uploadingLogoId === id}
            onLogoChange={(file) => onLogoUpload(id, file)}
            onDisplayNameChange={(v) => onDisplayNameChange(id, v)}
            onWindowTitleChange={(v) => onWindowTitleChange(id, v)}
            onLoginTitleChange={(v) => onLoginTitleChange(id, v)}
            onLoginSubtitleChange={(v) => onLoginSubtitleChange(id, v)}
            onSave={() => onSaveBranding(id)}
          />
        )}
        {activeTab === "domains" && <DomainsTab tenant={tenant} />}
        {activeTab === "owners" && (
          <OwnersTab
            tenantId={id}
            tenantName={tenant.name}
            owners={ownersList}
            loading={ownersLoading}
            onAddOwner={onOpenOwnerSheet}
            onRemoveOwner={onRemoveOwner}
            onUpdateOwner={onUpdateOwner}
          />
        )}
      </div>
    </div>
  );
}


==========================================================================================
# FILE: features/tenants/TenantListPanel.tsx
==========================================================================================
// PATH: src/admin_app/features/tenants/TenantListPanel.tsx
// ì¢Œì¸¡ í…Œë„ŒíŠ¸ ë¦¬ìŠ¤íŠ¸: ê²€ìƒ‰ + ì„ íƒ

import { useState, useMemo } from "react";
import type { TenantDto } from "@/admin_app/api/tenants";

type Props = {
  tenants: TenantDto[];
  selectedId: number | null;
  onSelect: (tenant: TenantDto) => void;
  loading: boolean;
  onCreateClick: () => void;
  showCreateForm: boolean;
};

export default function TenantListPanel({
  tenants,
  selectedId,
  onSelect,
  loading,
  onCreateClick,
  showCreateForm,
}: Props) {
  const [search, setSearch] = useState("");

  const filtered = useMemo(() => {
    if (!search.trim()) return tenants;
    const q = search.trim().toLowerCase();
    return tenants.filter(
      (t) =>
        t.name.toLowerCase().includes(q) ||
        t.code.toLowerCase().includes(q) ||
        (t.primaryDomain && t.primaryDomain.toLowerCase().includes(q))
    );
  }, [tenants, search]);

  return (
    <div className="admin-tenant-list-panel flex flex-col h-full min-h-0 bg-white border-r border-slate-200 md:rounded-l-lg">
      <div className="shrink-0 p-3 border-b border-slate-200 space-y-2">
        <input
          type="search"
          placeholder="í…Œë„ŒíŠ¸ ê²€ìƒ‰..."
          value={search}
          onChange={(e) => setSearch(e.target.value)}
          className="ds-input w-full text-sm"
          aria-label="í…Œë„ŒíŠ¸ ê²€ìƒ‰"
        />
        <button
          type="button"
          onClick={onCreateClick}
          className="ds-button w-full justify-center"
          data-intent={showCreateForm ? "secondary" : "primary"}
          data-size="md"
        >
          {showCreateForm ? "ì·¨ì†Œ" : "+ ìƒˆ í…Œë„ŒíŠ¸"}
        </button>
      </div>
      <div className="flex-1 min-h-0 overflow-auto">
        {loading ? (
          <div className="p-4 space-y-2">
            {[1, 2, 3].map((i) => (
              <div
                key={i}
                className="h-12 rounded-lg bg-slate-100 animate-pulse"
                aria-hidden
              />
            ))}
          </div>
        ) : filtered.length === 0 ? (
          <div className="p-4 text-sm text-slate-500">
            {search.trim() ? "ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ" : "í…Œë„ŒíŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤."}
          </div>
        ) : (
          <ul className="p-2 space-y-0.5" role="list">
            {filtered.map((tenant) => (
              <li key={tenant.id}>
                <button
                  type="button"
                  onClick={() => onSelect(tenant)}
                  className={`w-full flex items-center justify-between gap-2 px-3 py-2.5 rounded-lg text-left transition-colors ${
                    selectedId === tenant.id
                      ? "bg-slate-800 text-white"
                      : "hover:bg-slate-100 text-slate-800"
                  }`}
                >
                  <span className="font-medium truncate">{tenant.name}</span>
                  <span
                    className={`shrink-0 text-xs px-1.5 py-0.5 rounded ${
                      selectedId === tenant.id
                        ? "bg-white/20"
                        : tenant.isActive
                          ? "bg-emerald-100 text-emerald-700"
                          : "bg-slate-200 text-slate-600"
                    }`}
                  >
                    {tenant.isActive ? "í™œì„±" : "ë¹„í™œì„±"}
                  </span>
                </button>
              </li>
            ))}
          </ul>
        )}
      </div>
    </div>
  );
}


==========================================================================================
# FILE: features/tenants/tabs/BrandingTab.tsx
==========================================================================================
// PATH: src/admin_app/features/tenants/tabs/BrandingTab.tsx
// ë¡œê³  ì—…ë¡œë“œ + í‘œì‹œ ì´ë¦„, ë¸Œë¼ìš°ì €/ë¡œê·¸ì¸ íƒ€ì´í‹€

type Props = {
  tenantId: number;
  tenantName: string;
  logoUrl: string | null;
  displayName: string;
  windowTitle: string;
  loginTitle: string;
  loginSubtitle: string;
  uploading: boolean;
  onLogoChange: (file: File) => void;
  onDisplayNameChange: (v: string) => void;
  onWindowTitleChange: (v: string) => void;
  onLoginTitleChange: (v: string) => void;
  onLoginSubtitleChange: (v: string) => void;
  onSave: () => void;
};

export default function BrandingTab({
  tenantId,
  tenantName,
  logoUrl,
  displayName,
  windowTitle,
  loginTitle,
  loginSubtitle,
  uploading,
  onLogoChange,
  onDisplayNameChange,
  onWindowTitleChange,
  onLoginTitleChange,
  onLoginSubtitleChange,
  onSave,
}: Props) {
  return (
    <div className="space-y-6">
      <div>
        <label className="block text-sm font-semibold text-slate-900 mb-2">
          ë¡œê³ 
        </label>
        <div className="flex items-center gap-4">
          {logoUrl ? (
            <img
              src={logoUrl}
              alt={`${tenantName} logo`}
              className="h-20 w-auto object-contain border border-slate-200 rounded-lg"
            />
          ) : (
            <div className="h-20 w-28 border border-dashed border-slate-300 rounded-lg flex items-center justify-center text-slate-400 text-xs bg-slate-50">
              No logo
            </div>
          )}
          <div>
            <input
              type="file"
              accept="image/*"
              className="hidden"
              id={`logo-${tenantId}`}
              onChange={(e) => {
                const f = e.target.files?.[0];
                if (f) onLogoChange(f);
                e.target.value = "";
              }}
            />
            <label
              htmlFor={`logo-${tenantId}`}
              className="inline-block px-3 py-2 bg-slate-700 text-white text-sm rounded-lg cursor-pointer hover:bg-slate-600 disabled:opacity-50"
            >
              {uploading ? "ì—…ë¡œë“œ ì¤‘â€¦" : "Upload logo"}
            </label>
          </div>
        </div>
      </div>

      <div className="space-y-4">
        <div>
          <label className="block text-sm font-semibold text-slate-900 mb-1">
            í‘œì‹œ ì´ë¦„ (í—¤ë”) *
          </label>
          <input
            type="text"
            value={displayName}
            onChange={(e) => onDisplayNameChange(e.target.value)}
            className="ds-input w-full"
            placeholder="ì˜ˆ: ë°•ì²  ê³¼í•™"
          />
        </div>
        <div>
          <label className="block text-sm font-semibold text-slate-900 mb-1">
            ë¸Œë¼ìš°ì € íƒ€ì´í‹€
          </label>
          <input
            type="text"
            value={windowTitle}
            onChange={(e) => onWindowTitleChange(e.target.value)}
            className="ds-input w-full"
            placeholder="ë¹„ì›Œë‘ë©´ í‘œì‹œ ì´ë¦„ ì‚¬ìš©"
          />
        </div>
        <div>
          <label className="block text-sm font-semibold text-slate-900 mb-1">
            ë¡œê·¸ì¸ íƒ€ì´í‹€
          </label>
          <input
            type="text"
            value={loginTitle}
            onChange={(e) => onLoginTitleChange(e.target.value)}
            className="ds-input w-full"
            placeholder="ë¡œê·¸ì¸ í™”ë©´ ìƒë‹¨ ë¬¸êµ¬"
          />
        </div>
        <div>
          <label className="block text-sm font-semibold text-slate-900 mb-1">
            ë¡œê·¸ì¸ ì„œë¸Œíƒ€ì´í‹€
          </label>
          <input
            type="text"
            value={loginSubtitle}
            onChange={(e) => onLoginSubtitleChange(e.target.value)}
            className="ds-input w-full"
            placeholder="ë¡œê·¸ì¸ í™”ë©´ í•˜ë‹¨ ë¬¸êµ¬"
          />
        </div>
        <button
          type="button"
          onClick={onSave}
          className="ds-button"
          data-intent="primary"
          data-size="md"
        >
          ëª¨ë“  ì„¤ì • ì €ì¥
        </button>
      </div>
    </div>
  );
}


==========================================================================================
# FILE: features/tenants/tabs/DomainsTab.tsx
==========================================================================================
// PATH: src/admin_app/features/tenants/tabs/DomainsTab.tsx
// ë„ë©”ì¸ ëª©ë¡ (Active/SSL í‘œì‹œ). ì¶”í›„ API ì—°ë™ ì‹œ ì¶”ê°€/ì‚­ì œ/Primary ì§€ì •.

import type { TenantDto } from "@/admin_app/api/tenants";

type Props = {
  tenant: TenantDto;
};

export default function DomainsTab({ tenant }: Props) {
  const domains = tenant.domains?.length
    ? tenant.domains
    : tenant.primaryDomain
      ? [tenant.primaryDomain]
      : [];

  return (
    <div className="space-y-4">
      <p className="text-sm text-slate-600">
        ì»¤ìŠ¤í…€ ë„ë©”ì¸ì„ ì´ í…Œë„ŒíŠ¸ì— ì—°ê²°í•©ë‹ˆë‹¤. (ë„ë©”ì¸ ì¶”ê°€/ì‚­ì œëŠ” ì¶”í›„ API ì—°ë™)
      </p>
      {domains.length === 0 ? (
        <div className="rounded-lg border border-dashed border-slate-200 p-8 text-center text-slate-500 text-sm">
          ë“±ë¡ëœ ë„ë©”ì¸ì´ ì—†ìŠµë‹ˆë‹¤.
        </div>
      ) : (
        <ul className="divide-y divide-slate-100 rounded-lg border border-slate-200 overflow-hidden bg-white">
          {domains.map((host) => (
            <li
              key={host}
              className="flex items-center justify-between gap-4 px-4 py-3"
            >
              <span className="font-medium text-slate-900">{host}</span>
              <span className="flex items-center gap-2 text-xs">
                <span className="text-emerald-600">Active</span>
                <span className="text-slate-400">Â·</span>
                <span className="text-slate-500">SSL enabled</span>
              </span>
            </li>
          ))}
        </ul>
      )}
    </div>
  );
}


==========================================================================================
# FILE: features/tenants/tabs/OverviewTab.tsx
==========================================================================================
// PATH: src/admin_app/features/tenants/tabs/OverviewTab.tsx
// í…Œë„ŒíŠ¸ ìš”ì•½: ìƒíƒœ, ë„ë©”ì¸, ê¸°ë³¸ ì •ë³´

import type { TenantDto } from "@/admin_app/api/tenants";

type Props = {
  tenant: TenantDto;
};

export default function OverviewTab({ tenant }: Props) {
  const domains = tenant.domains?.length
    ? tenant.domains
    : tenant.primaryDomain
      ? [tenant.primaryDomain]
      : [];

  return (
    <div className="space-y-6">
      <div className="grid gap-4 sm:grid-cols-2">
        <div className="rounded-lg border border-slate-200 bg-slate-50/50 p-4">
          <div className="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-1">
            ìƒíƒœ
          </div>
          <div className="flex items-center gap-2">
            <span
              className={`inline-flex h-2 w-2 rounded-full ${
                tenant.isActive ? "bg-emerald-500" : "bg-slate-400"
              }`}
              aria-hidden
            />
            <span className="font-medium text-slate-900">
              {tenant.isActive ? "í™œì„±" : "ë¹„í™œì„±"}
            </span>
          </div>
        </div>
        <div className="rounded-lg border border-slate-200 bg-slate-50/50 p-4">
          <div className="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-1">
            ì½”ë“œ
          </div>
          <div className="font-mono text-slate-900">{tenant.code}</div>
        </div>
      </div>

      <div className="rounded-lg border border-slate-200 bg-slate-50/50 p-4">
        <div className="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">
          ëŒ€í‘œ ë„ë©”ì¸
        </div>
        <div className="font-medium text-slate-900">
          {tenant.primaryDomain || "â€”"}
        </div>
      </div>

      {domains.length > 0 && (
        <div className="rounded-lg border border-slate-200 p-4">
          <div className="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">
            ë“±ë¡ ë„ë©”ì¸ ({domains.length})
          </div>
          <ul className="space-y-1.5">
            {domains.map((host) => (
              <li
                key={host}
                className="flex items-center justify-between text-sm"
              >
                <span className="text-slate-800">{host}</span>
                <span className="text-xs text-slate-500">Active Â· SSL</span>
              </li>
            ))}
          </ul>
        </div>
      )}

      <div className="text-xs text-slate-500 pt-2">
        ID: {tenant.id}
      </div>
    </div>
  );
}


==========================================================================================
# FILE: features/tenants/tabs/OwnersTab.tsx
==========================================================================================
// PATH: src/admin_app/features/tenants/tabs/OwnersTab.tsx
// Owner ë¦¬ìŠ¤íŠ¸ + ì œê±°/ìˆ˜ì • CRUD, + Owner ì¶”ê°€ëŠ” ë¶€ëª¨(BottomSheet)

import { useState } from "react";
import type { TenantOwnerDto } from "@/admin_app/api/tenants";
import "@/styles/design-system/ds/input.css";

type Props = {
  tenantId: number;
  tenantName: string;
  owners: TenantOwnerDto[];
  loading?: boolean;
  onAddOwner: () => void;
  onRemoveOwner: (tenantId: number, userId: number) => Promise<void>;
  onUpdateOwner: (tenantId: number, userId: number, payload: { name?: string; phone?: string }) => Promise<void>;
};

export default function OwnersTab({
  tenantId,
  tenantName,
  owners,
  loading = false,
  onAddOwner,
  onRemoveOwner,
  onUpdateOwner,
}: Props) {
  const [editingUserId, setEditingUserId] = useState<number | null>(null);
  const [editName, setEditName] = useState("");
  const [editPhone, setEditPhone] = useState("");
  const [removingId, setRemovingId] = useState<number | null>(null);

  const startEdit = (o: TenantOwnerDto) => {
    setEditingUserId(o.userId);
    setEditName(o.name || "");
    setEditPhone(o.phone ?? "");
  };
  const cancelEdit = () => {
    setEditingUserId(null);
    setEditName("");
    setEditPhone("");
  };
  const saveEdit = async () => {
    if (editingUserId == null) return;
    await onUpdateOwner(tenantId, editingUserId, { name: editName || undefined, phone: editPhone || undefined });
    setEditingUserId(null);
    setEditName("");
    setEditPhone("");
  };
  const handleRemove = async (userId: number) => {
    if (!confirm("ì´ í…Œë„ŒíŠ¸ì—ì„œ í•´ë‹¹ Ownerë¥¼ ì œê±°í•©ë‹ˆë‹¤. ë¡œê·¸ì¸ ê¶Œí•œì´ ì‚¬ë¼ì§‘ë‹ˆë‹¤. ê³„ì†í• ê¹Œìš”?")) return;
    setRemovingId(userId);
    try {
      await onRemoveOwner(tenantId, userId);
    } finally {
      setRemovingId(null);
    }
  };

  return (
    <div className="space-y-4">
      <div className="mb-4 p-3 rounded-xl bg-blue-50 border border-blue-200 text-sm text-blue-800">
        ì´ ê³„ì •ì€ <strong>{tenantName}</strong> ì „ìš©ì…ë‹ˆë‹¤.
        ë‹¤ë¥¸ í…Œë„ŒíŠ¸ì—ì„œëŠ” ë¡œê·¸ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
      </div>

      <section className="mb-6">
        <h3 className="text-sm font-semibold text-slate-900 mb-3">
          ğŸ‘¤ Owner ê³„ì • ({owners.length}ëª…)
        </h3>
        {loading ? (
          <div className="space-y-2">
            {[1, 2].map((i) => (
              <div key={i} className="h-14 rounded-xl bg-slate-100 animate-pulse" />
            ))}
          </div>
        ) : owners.length === 0 ? (
          <>
            <div className="p-4 rounded-xl bg-amber-50 border border-amber-200 text-amber-800 text-sm font-medium mb-3">
              âš  Owner ê³„ì •ì´ ì—†ìŠµë‹ˆë‹¤.
              <br />
              ì´ í…Œë„ŒíŠ¸ëŠ” ê´€ë¦¬ìê°€ ë¡œê·¸ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
            </div>
            <p className="text-sm text-slate-500 mb-3">ë“±ë¡ëœ Ownerê°€ ì—†ìŠµë‹ˆë‹¤.</p>
          </>
        ) : (
          <ul className="space-y-2 mb-4">
            {owners.map((o) => (
              <li
                key={o.userId}
                className="flex flex-wrap items-center justify-between gap-2 p-3 rounded-xl bg-slate-50 border border-slate-200"
              >
                {editingUserId === o.userId ? (
                  <>
                    <div className="flex-1 min-w-0 space-y-2">
                      <div className="font-medium text-slate-900">{o.username}</div>
                      <input
                        type="text"
                        value={editName}
                        onChange={(e) => setEditName(e.target.value)}
                        placeholder="ì´ë¦„"
                        className="ds-input w-full py-2 rounded-lg text-sm"
                      />
                      <input
                        type="text"
                        value={editPhone}
                        onChange={(e) => setEditPhone(e.target.value)}
                        placeholder="ì „í™”"
                        className="ds-input w-full py-2 rounded-lg text-sm"
                      />
                    </div>
                    <div className="flex gap-2">
                      <button type="button" onClick={saveEdit} className="ds-button text-sm" data-intent="primary" data-size="sm">ì €ì¥</button>
                      <button type="button" onClick={cancelEdit} className="ds-button text-sm" data-intent="secondary" data-size="sm">ì·¨ì†Œ</button>
                    </div>
                  </>
                ) : (
                  <>
                    <div>
                      <div className="font-medium text-slate-900">{o.username}</div>
                      <div className="text-xs text-slate-500">{o.name || "ì´ë¦„ ì—†ìŒ"}</div>
                    </div>
                    <div className="flex items-center gap-2">
                      <span className="text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded-full">OWNER</span>
                      <button type="button" onClick={() => startEdit(o)} className="text-xs text-slate-600 hover:text-slate-900 px-2 py-1 rounded">ìˆ˜ì •</button>
                      <button
                        type="button"
                        onClick={() => handleRemove(o.userId)}
                        disabled={removingId === o.userId}
                        className="text-xs text-red-600 hover:text-red-800 px-2 py-1 rounded disabled:opacity-50"
                      >
                        {removingId === o.userId ? "ì œê±° ì¤‘â€¦" : "ì œê±°"}
                      </button>
                    </div>
                  </>
                )}
              </li>
            ))}
          </ul>
        )}
        <button
          type="button"
          onClick={onAddOwner}
          className="w-full flex items-center justify-center gap-2 py-3 rounded-xl border-2 border-dashed border-slate-300 text-slate-600 font-medium min-h-[48px] hover:bg-slate-50 active:bg-slate-100"
        >
          + Owner ì¶”ê°€
        </button>
      </section>
    </div>
  );
}


==========================================================================================
# FILE: layout/AdminAppLayout.css
==========================================================================================
/* Mobile-first fullscreen layout for admin_app (dev) */

.admin-app-root {
  --admin-app-header-h: 48px;
  --admin-app-nav-h: 56px;
  --admin-app-safe-top: env(safe-area-inset-top, 0px);
  --admin-app-safe-bottom: env(safe-area-inset-bottom, 0px);

  min-height: 100dvh;
  height: 100%;
  width: 100%;
  max-width: 100vw;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: var(--admin-app-bg, #f1f5f9);
  -webkit-overflow-scrolling: touch;
}

.admin-app-header {
  flex-shrink: 0;
  height: calc(var(--admin-app-header-h) + var(--admin-app-safe-top));
  padding-top: var(--admin-app-safe-top);
  padding-left: max(12px, env(safe-area-inset-left));
  padding-right: max(12px, env(safe-area-inset-right));
  padding-bottom: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #1e293b;
  color: #fff;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
}

.admin-app-title {
  font-size: 0.9375rem;
  font-weight: 600;
  letter-spacing: 0.01em;
}

.admin-app-back {
  font-size: 0.8125rem;
  color: #94a3b8;
  text-decoration: none;
  padding: 6px 10px;
  border-radius: 6px;
  transition: color 0.15s, background 0.15s;
}
.admin-app-back:hover,
.admin-app-back:focus-visible {
  color: #fff;
  background: rgba(255, 255, 255, 0.1);
}

.admin-app-main {
  flex: 1;
  min-height: 0;
  overflow: auto;
  padding: 16px;
  padding-left: max(16px, env(safe-area-inset-left));
  padding-right: max(16px, env(safe-area-inset-right));
  padding-bottom: calc(16px + var(--admin-app-nav-h) + var(--admin-app-safe-bottom));
  -webkit-overflow-scrolling: touch;
}

.admin-app-bottom-nav {
  flex-shrink: 0;
  height: calc(var(--admin-app-nav-h) + var(--admin-app-safe-bottom));
  padding-bottom: var(--admin-app-safe-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  display: flex;
  align-items: flex-start;
  justify-content: center;
  gap: 0;
  background: #1e293b;
  color: #94a3b8;
  box-shadow: 0 -1px 6px rgba(0, 0, 0, 0.08);
}

.admin-app-nav-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  padding: 8px;
  color: inherit;
  text-decoration: none;
  font-size: 0.6875rem;
  font-weight: 500;
  transition: color 0.15s, background 0.15s;
  min-height: var(--admin-app-nav-h);
}
.admin-app-nav-item:hover,
.admin-app-nav-item:focus-visible {
  color: #e2e8f0;
  background: rgba(255, 255, 255, 0.06);
}
.admin-app-nav-item--active {
  color: #38bdf8;
}
.admin-app-nav-item--active:hover,
.admin-app-nav-item--active:focus-visible {
  color: #7dd3fc;
}

.admin-app-nav-icon {
  font-size: 1.25rem;
  line-height: 1;
}
.admin-app-nav-label {
  line-height: 1.2;
}


==========================================================================================
# FILE: layout/AdminAppLayout.tsx
==========================================================================================
// PATH: src/admin_app/layout/AdminAppLayout.tsx
// Mobile-first fullscreen layout: full viewport, bottom nav, no sidebar.

import "./AdminAppLayout.css";
import { Outlet, Link, useLocation } from "react-router-dom";

const NAV = [
  { to: "/dev/home", label: "Home", icon: "âŒ‚" },
  { to: "/dev/branding", label: "Branding", icon: "â—‡" },
];

export default function AdminAppLayout() {
  const location = useLocation();

  return (
    <div className="admin-app-root">
      <header className="admin-app-header">
        <span className="admin-app-title">Academy Dev Admin</span>
        <Link
          to="/admin"
          className="admin-app-back"
          aria-label="Back to Admin"
        >
          Admin
        </Link>
      </header>

      <main className="admin-app-main">
        <Outlet />
      </main>

      <nav className="admin-app-bottom-nav" aria-label="Main navigation">
        {NAV.map(({ to, label, icon }) => (
          <Link
            key={to}
            to={to}
            className={`admin-app-nav-item ${
              location.pathname === to ? "admin-app-nav-item--active" : ""
            }`}
            aria-current={location.pathname === to ? "page" : undefined}
          >
            <span className="admin-app-nav-icon" aria-hidden>{icon}</span>
            <span className="admin-app-nav-label">{label}</span>
          </Link>
        ))}
      </nav>
    </div>
  );
}


==========================================================================================
# FILE: pages/AdminAppHomePage.tsx
==========================================================================================
// PATH: src/admin_app/pages/AdminAppHomePage.tsx
import { Link } from "react-router-dom";

export default function AdminAppHomePage() {
  return (
    <div>
      <h1 className="text-xl font-semibold text-slate-800 mb-2">
        Developer Admin
      </h1>
      <p className="text-slate-600 mb-6">
        Tenant 1 (hakwonplus) ê´€ë¦¬ììš©. í…Œë„ŒíŠ¸ë³„ ë¡œê³ Â·ë¡œê·¸ì¸ í™”ë©´Â·ì´ë¯¸ì§€ ì„¤ì •.
      </p>

      <div className="mb-6 p-4 rounded-xl border-2 border-emerald-200 bg-emerald-50/50">
        <h2 className="text-sm font-semibold text-emerald-800 mb-2">ì„ ìƒìš© ì•± (ìš´ì˜ ì½˜ì†”)</h2>
        <p className="text-sm text-emerald-700 mb-3">
          ê°•ì˜, í•™ìƒ, ì‹œí—˜, í´ë¦¬ë‹‰ ë“± ì‹¤ì œ ê¸°ëŠ¥ì´ ìˆëŠ” ìš´ì˜ ì½˜ì†”ë¡œ ì´ë™í•©ë‹ˆë‹¤.
        </p>
        <Link
          to="/admin"
          className="inline-flex items-center gap-2 px-4 py-3 rounded-xl bg-emerald-600 text-white font-medium text-sm hover:bg-emerald-700 active:bg-emerald-800"
        >
          ìš´ì˜ ì½˜ì†” ì—´ê¸° â†’
        </Link>
      </div>

      <ul className="list-disc list-inside space-y-2 text-slate-700">
        <li>
          <Link to="/dev/branding" className="text-blue-600 hover:underline">
            Tenant branding
          </Link>
          â€” ë¡œê³ , ë¡œê·¸ì¸ íƒ€ì´í‹€, í•™ìƒìš© ì´ë¯¸ì§€ ë“± (R2 ì—°ë™ ì˜ˆì •)
        </li>
      </ul>
    </div>
  );
}


==========================================================================================
# FILE: pages/TenantAdvancedPage.tsx
==========================================================================================
// PATH: src/admin_app/pages/TenantAdvancedPage.tsx
// ê³ ê¸‰ ì„¤ì • â€” isActive í† ê¸€ ì—°ë™

import { useState, useEffect } from "react";
import { useParams, useNavigate } from "react-router-dom";
import { getTenants, updateTenant, type TenantDto } from "@/admin_app/api/tenants";
import AdminToast from "@/admin_app/components/AdminToast";
import "@/styles/design-system/index.css";

export default function TenantAdvancedPage() {
  const { tenantId } = useParams<{ tenantId: string }>();
  const navigate = useNavigate();
  const [tenant, setTenant] = useState<TenantDto | null>(null);
  const [loading, setLoading] = useState(true);
  const [toggling, setToggling] = useState(false);
  const [toast, setToast] = useState<{ message: string; kind: "success" | "error" } | null>(null);

  useEffect(() => {
    const id = tenantId ? parseInt(tenantId, 10) : NaN;
    if (!tenantId || isNaN(id)) {
      setLoading(false);
      return;
    }
    getTenants()
      .then((list) => setTenant(list.find((x) => x.id === id) ?? null))
      .catch(() => setTenant(null))
      .finally(() => setLoading(false));
  }, [tenantId]);

  const handleToggleActive = async () => {
    if (!tenant) return;
    setToggling(true);
    setToast(null);
    try {
      await updateTenant(tenant.id, { isActive: !tenant.isActive });
      setTenant((t) => (t ? { ...t, isActive: !t.isActive } : t));
      setToast({ message: tenant.isActive ? "ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤." : "í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.", kind: "success" });
    } catch {
      setToast({ message: "ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", kind: "error" });
    } finally {
      setToggling(false);
    }
  };

  if (loading) {
    return (
      <div className="pb-24">
        <div className="mb-6 h-6 w-24 rounded bg-slate-100 animate-pulse" />
        <div className="h-20 rounded-xl bg-slate-100 animate-pulse" />
      </div>
    );
  }

  if (!tenant) {
    return (
      <div className="pb-24 flex items-center justify-center min-h-[40vh]">
        <div className="text-slate-500">í…Œë„ŒíŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>
      </div>
    );
  }

  return (
    <div className="pb-24">
      <AdminToast message={toast?.message ?? ""} kind={toast?.kind ?? "success"} visible={!!toast} onClose={() => setToast(null)} />
      <div className="mb-6">
        <button type="button" onClick={() => navigate(`/dev/branding/${tenant.id}`)} className="text-sm text-slate-600 mb-2 flex items-center gap-1">
          â† ì„¤ì •
        </button>
        <h1 className="text-xl font-bold text-slate-900">ê³ ê¸‰ ì„¤ì •</h1>
        <p className="text-sm text-slate-500">{tenant.name}</p>
      </div>
      <div className="p-4 bg-white rounded-xl border border-slate-200 shadow-sm">
        <div className="flex items-center justify-between min-h-[48px] gap-3">
          <span className="font-medium text-slate-900">í…Œë„ŒíŠ¸ ìƒíƒœ</span>
          <button
            type="button"
            onClick={handleToggleActive}
            disabled={toggling}
            className={`relative inline-flex h-8 w-14 shrink-0 rounded-full border-2 transition-colors min-h-[48px] min-w-[56px] ${
              tenant.isActive ? "bg-emerald-500 border-emerald-500" : "bg-slate-200 border-slate-200"
            }`}
            role="switch"
            aria-checked={tenant.isActive}
          >
            <span
              className={`inline-block h-7 w-7 rounded-full bg-white shadow transform transition-transform ${
                tenant.isActive ? "translate-x-7" : "translate-x-0.5"
              }`}
              style={{ marginTop: 2 }}
            />
          </button>
        </div>
        <p className="text-xs text-slate-500 mt-2">{tenant.isActive ? "í™œì„±: ë¡œê·¸ì¸Â·ê°€ì… ê°€ëŠ¥" : "ë¹„í™œì„±: ì‹ ê·œ ì ‘ì† ì œí•œ"}</p>
      </div>
    </div>
  );
}


==========================================================================================
# FILE: pages/TenantBrandingFormPage.tsx
==========================================================================================
// PATH: src/admin_app/pages/TenantBrandingFormPage.tsx
// STEP 3: Branding ì „ìš© í™”ë©´ â€” ë¡œê³  ì¹´ë“œ, 24px ê°„ê²©, Sticky Save Bar, Dirty state

import { useState, useEffect, useCallback } from "react";
import { useParams, useNavigate } from "react-router-dom";
import {
  getTenantBranding as getTenantBrandingApi,
  uploadTenantLogo,
  patchTenantBranding,
} from "@/admin_app/api/branding";
import { getTenants } from "@/admin_app/api/tenants";
import { getTenantBranding, getTenantIdFromCode } from "@/shared/tenant/config";
import StickySaveBar from "@/admin_app/components/StickySaveBar";
import AdminToast from "@/admin_app/components/AdminToast";
import "@/styles/design-system/index.css";
import "@/styles/design-system/ds/input.css";

export default function TenantBrandingFormPage() {
  const { tenantId } = useParams<{ tenantId: string }>();
  const navigate = useNavigate();
  const id = tenantId ? parseInt(tenantId, 10) : NaN;

  const [tenantName, setTenantName] = useState("");
  const [loading, setLoading] = useState(true);
  const [uploading, setUploading] = useState(false);
  const [saving, setSaving] = useState(false);
  const [toast, setToast] = useState<{ message: string; kind: "success" | "error" } | null>(null);

  const [logoUrl, setLogoUrl] = useState<string | null>(null);
  const [displayName, setDisplayName] = useState("");
  const [windowTitle, setWindowTitle] = useState("");
  const [loginTitle, setLoginTitle] = useState("");
  const [loginSubtitle, setLoginSubtitle] = useState("");

  const [initial, setInitial] = useState<{ displayName: string; windowTitle: string; loginTitle: string; loginSubtitle: string } | null>(null);

  const dirty =
    initial != null &&
    (displayName !== initial.displayName ||
      windowTitle !== initial.windowTitle ||
      loginTitle !== initial.loginTitle ||
      loginSubtitle !== initial.loginSubtitle);

  useEffect(() => {
    if (!tenantId || isNaN(id)) {
      setLoading(false);
      return;
    }
    let cancelled = false;
    Promise.all([getTenants(), getTenantBrandingApi(id)])
      .then(([list, branding]) => {
        if (cancelled) return;
        const t = list.find((x) => x.id === id);
        if (t) setTenantName(t.name);
        const code = t?.code;
        const logicalId = code ? getTenantIdFromCode(code) : null;
        const fallback = logicalId != null ? getTenantBranding(logicalId) : undefined;
        const d = branding?.displayName ?? fallback?.displayName ?? t?.name ?? "";
        const w = branding?.windowTitle ?? "";
        const lt = branding?.loginTitle ?? fallback?.loginTitle ?? "";
        const ls = branding?.loginSubtitle ?? fallback?.loginSubtitle ?? "";
        setLogoUrl(branding?.logoUrl ?? fallback?.logoUrl ?? null);
        setDisplayName(d);
        setWindowTitle(w);
        setLoginTitle(lt);
        setLoginSubtitle(ls);
        setInitial({ displayName: d, windowTitle: w, loginTitle: lt, loginSubtitle: ls });
      })
      .catch(() => { if (!cancelled) setToast({ message: "ë¡œë”© ì‹¤íŒ¨", kind: "error" }); })
      .finally(() => { if (!cancelled) setLoading(false); });
    return () => { cancelled = true; };
  }, [tenantId, id]);

  const handleLogoChange = useCallback(
    (e: React.ChangeEvent<HTMLInputElement>) => {
      const file = e.target.files?.[0];
      if (!file || !file.type.startsWith("image/")) {
        setToast({ message: "ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì„ íƒí•˜ì„¸ìš”.", kind: "error" });
        return;
      }
      setUploading(true);
      setToast(null);
      uploadTenantLogo(id, file)
        .then((res) => {
          setLogoUrl(res.logoUrl);
          setToast({ message: "ë¡œê³  ì €ì¥ë¨", kind: "success" });
        })
        .catch(() => setToast({ message: "ì—…ë¡œë“œ ì‹¤íŒ¨", kind: "error" }))
        .finally(() => setUploading(false));
      e.target.value = "";
    },
    [id]
  );

  const handleSave = useCallback(() => {
    if (!dirty || isNaN(id)) return;
    setSaving(true);
    setToast(null);
    patchTenantBranding(id, { displayName, windowTitle, loginTitle, loginSubtitle })
      .then(() => {
        setInitial({ displayName, windowTitle, loginTitle, loginSubtitle });
        setToast({ message: "ì €ì¥ ì™„ë£Œ", kind: "success" });
      })
      .catch(() => setToast({ message: "ì €ì¥ ì‹¤íŒ¨", kind: "error" }))
      .finally(() => setSaving(false));
  }, [id, dirty, displayName, windowTitle, loginTitle, loginSubtitle]);

  const handleDiscard = useCallback(() => {
    if (initial) {
      setDisplayName(initial.displayName);
      setWindowTitle(initial.windowTitle);
      setLoginTitle(initial.loginTitle);
      setLoginSubtitle(initial.loginSubtitle);
    }
  }, [initial]);

  if (isNaN(id)) {
    return (
      <div className="pb-24 flex items-center justify-center min-h-[40vh]">
        <div className="text-slate-500">ì˜ëª»ëœ í…Œë„ŒíŠ¸ì…ë‹ˆë‹¤.</div>
      </div>
    );
  }

  if (loading) {
    return (
      <div className="pb-32">
        <div className="mb-6 h-8 w-32 rounded-lg bg-slate-100 animate-pulse" />
        <div className="mb-6 h-36 rounded-xl bg-slate-100 animate-pulse" />
        <div className="space-y-6">
          {[1, 2, 3, 4].map((i) => (
            <div key={i} className="h-14 rounded-xl bg-slate-100 animate-pulse" />
          ))}
        </div>
      </div>
    );
  }

  return (
    <div className="pb-32">
      <div className="mb-6">
        <button type="button" onClick={() => navigate(`/dev/branding/${id}`)} className="text-sm text-slate-600 mb-2 flex items-center gap-1">
          â† ì„¤ì •
        </button>
        <h1 className="text-xl font-bold text-slate-900">ë¸Œëœë”©</h1>
        <p className="text-sm text-slate-500">{tenantName}</p>
      </div>

      <AdminToast
        message={toast?.message ?? ""}
        kind={toast?.kind ?? "success"}
        visible={!!toast}
        onClose={() => setToast(null)}
      />

      <section className="mb-6">
        <div className="text-sm font-semibold text-slate-900 mb-2">ë¡œê³ </div>
        <label className="relative block rounded-xl border-2 border-dashed border-slate-200 bg-slate-50/50 overflow-hidden min-h-[140px] flex flex-col items-center justify-center cursor-pointer active:bg-slate-100">
          <input type="file" accept="image/*" className="hidden" onChange={handleLogoChange} />
          {logoUrl ? (
            <>
              <img src={logoUrl} alt="ë¡œê³ " className="max-h-32 w-auto object-contain p-4" />
              <span className="text-slate-500 text-xs pb-2">íƒ­í•˜ì—¬ ë³€ê²½</span>
            </>
          ) : (
            <span className="text-slate-500 text-sm py-8">íƒ­í•˜ì—¬ ë¡œê³  ì„ íƒ</span>
          )}
          {uploading && (
            <span className="absolute inset-0 flex items-center justify-center bg-white/80 text-slate-700 text-sm">ì—…ë¡œë“œ ì¤‘â€¦</span>
          )}
        </label>
        <p className="text-xs text-slate-500 mt-1">íƒ­í•˜ì—¬ ë¡œê³  ì´ë¯¸ì§€ ì„ íƒ</p>
      </section>

      <div className="space-y-6">
        <div>
          <label className="block text-sm font-semibold text-slate-900 mb-2">í‘œì‹œ ì´ë¦„ (í—¤ë”) *</label>
          <input
            type="text"
            value={displayName}
            onChange={(e) => setDisplayName(e.target.value)}
            className="ds-input w-full py-3 rounded-xl min-h-[48px] text-base"
            placeholder="ì˜ˆ: ë°•ì²  ê³¼í•™"
          />
        </div>
        <div>
          <label className="block text-sm font-semibold text-slate-900 mb-2">ë¸Œë¼ìš°ì € íƒ€ì´í‹€</label>
          <input
            type="text"
            value={windowTitle}
            onChange={(e) => setWindowTitle(e.target.value)}
            className="ds-input w-full py-3 rounded-xl min-h-[48px] text-base"
            placeholder="ë¹„ì›Œë‘ë©´ í‘œì‹œ ì´ë¦„ ì‚¬ìš©"
          />
        </div>
        <div>
          <label className="block text-sm font-semibold text-slate-900 mb-2">ë¡œê·¸ì¸ íƒ€ì´í‹€</label>
          <input
            type="text"
            value={loginTitle}
            onChange={(e) => setLoginTitle(e.target.value)}
            className="ds-input w-full py-3 rounded-xl min-h-[48px] text-base"
            placeholder="ë¡œê·¸ì¸ í™”ë©´ ìƒë‹¨ ë¬¸êµ¬"
          />
        </div>
        <div>
          <label className="block text-sm font-semibold text-slate-900 mb-2">ë¡œê·¸ì¸ ì„œë¸Œíƒ€ì´í‹€</label>
          <input
            type="text"
            value={loginSubtitle}
            onChange={(e) => setLoginSubtitle(e.target.value)}
            className="ds-input w-full py-3 rounded-xl min-h-[48px] text-base"
            placeholder="ë¡œê·¸ì¸ í™”ë©´ í•˜ë‹¨ ë¬¸êµ¬"
          />
        </div>
      </div>

      <StickySaveBar visible={dirty} onDiscard={handleDiscard} onSave={handleSave} saving={saving} />
    </div>
  );
}


==========================================================================================
# FILE: pages/TenantBrandingPage.tsx
==========================================================================================
// PATH: src/admin_app/pages/TenantBrandingPage.tsx
// Tenant Management: ì¢Œì¸¡ ë¦¬ìŠ¤íŠ¸ + ìš°ì¸¡ íƒ­(Overview, Branding, Domains, Owners).

import { useState, useCallback, useEffect } from "react";
import {
  getTenantBranding as getTenantBrandingApi,
  uploadTenantLogo,
  patchTenantBranding,
} from "@/admin_app/api/branding";
import {
  getTenants,
  getTenantOwners,
  createTenant,
  registerTenantOwner,
  removeTenantOwner,
  updateTenantOwner,
  type TenantDto,
} from "@/admin_app/api/tenants";
import TenantListPanel from "@/admin_app/features/tenants/TenantListPanel";
import TenantDetailPanel, { type TabId } from "@/admin_app/features/tenants/TenantDetailPanel";
import AdminOwnerBottomSheet from "@/admin_app/components/AdminOwnerBottomSheet";
import "@/styles/design-system/index.css";
import "@/styles/design-system/ds/input.css";

export default function TenantBrandingPage() {
  const [tenants, setTenants] = useState<TenantDto[]>([]);
  const [loading, setLoading] = useState(true);
  const [uploading, setUploading] = useState<number | null>(null);
  const [message, setMessage] = useState<string | null>(null);
  const [messageType, setMessageType] = useState<"success" | "error" | null>(null);
  const [logoUrls, setLogoUrls] = useState<Record<number, string>>({});
  const [loginTitles, setLoginTitles] = useState<Record<number, string>>({});
  const [loginSubtitles, setLoginSubtitles] = useState<Record<number, string>>({});
  const [windowTitles, setWindowTitles] = useState<Record<number, string>>({});
  const [displayNames, setDisplayNames] = useState<Record<number, string>>({});
  const [selectedTenantId, setSelectedTenantId] = useState<number | null>(null);
  const [activeTab, setActiveTab] = useState<TabId>("overview");

  const [showCreateForm, setShowCreateForm] = useState(false);
  const [newTenantCode, setNewTenantCode] = useState("");
  const [newTenantName, setNewTenantName] = useState("");
  const [newTenantDomain, setNewTenantDomain] = useState("");
  const [createOwnerWithTenant, setCreateOwnerWithTenant] = useState(false);
  const [newOwnerUsername, setNewOwnerUsername] = useState("");
  const [newOwnerPassword, setNewOwnerPassword] = useState("");
  const [newOwnerName, setNewOwnerName] = useState("");
  const [newOwnerPhone, setNewOwnerPhone] = useState("");

  const [ownersByTenantId, setOwnersByTenantId] = useState<Record<number, Awaited<ReturnType<typeof getTenantOwners>>>>({});
  const [ownersLoadingById, setOwnersLoadingById] = useState<Record<number, boolean>>({});
  const [ownerSheetOpen, setOwnerSheetOpen] = useState(false);

  useEffect(() => {
    loadTenants();
  }, []);

  useEffect(() => {
    if (!loading && tenants.length > 0 && selectedTenantId === null)
      setSelectedTenantId(tenants[0].id);
  }, [loading, tenants, selectedTenantId]);

  const loadOwnersForTenant = useCallback(async (tenantId: number) => {
    setOwnersLoadingById((p) => ({ ...p, [tenantId]: true }));
    try {
      const list = await getTenantOwners(tenantId);
      setOwnersByTenantId((p) => ({ ...p, [tenantId]: list }));
    } catch {
      setOwnersByTenantId((p) => ({ ...p, [tenantId]: [] }));
    } finally {
      setOwnersLoadingById((p) => ({ ...p, [tenantId]: false }));
    }
  }, []);

  useEffect(() => {
    if (selectedTenantId != null && activeTab === "owners") {
      loadOwnersForTenant(selectedTenantId);
    }
  }, [selectedTenantId, activeTab, loadOwnersForTenant]);

  useEffect(() => {
    if (!message || messageType !== "success") return;
    const t = setTimeout(() => {
      setMessage(null);
      setMessageType(null);
    }, 5000);
    return () => clearTimeout(t);
  }, [message, messageType]);

  const loadTenants = async () => {
    try {
      setLoading(true);
      const data = await getTenants();
      setTenants(data);
      data.forEach((tenant) => {
        getTenantBrandingApi(tenant.id).then((branding) => {
          if (!branding) return;
          if (branding.logoUrl) setLogoUrls((p) => ({ ...p, [tenant.id]: branding.logoUrl! }));
          if (branding.loginTitle != null) setLoginTitles((p) => ({ ...p, [tenant.id]: branding.loginTitle! }));
          if (branding.loginSubtitle != null) setLoginSubtitles((p) => ({ ...p, [tenant.id]: branding.loginSubtitle! }));
          if (branding.windowTitle !== undefined) setWindowTitles((p) => ({ ...p, [tenant.id]: branding.windowTitle || "" }));
          if (branding.displayName !== undefined) setDisplayNames((p) => ({ ...p, [tenant.id]: branding.displayName || "" }));
        }).catch(() => {});
      });
    } catch (e) {
      setMessage("í…Œë„ŒíŠ¸ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: " + String(e));
      setMessageType("error");
    } finally {
      setLoading(false);
    }
  };

  const handleCreateTenant = async () => {
    if (!newTenantCode || !newTenantName) {
      setMessage("ì½”ë“œì™€ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
      setMessageType("error");
      return;
    }
    if (createOwnerWithTenant && (!newOwnerUsername || !newOwnerPassword)) {
      setMessage("ì˜¤ë„ˆ ê³„ì • ìƒì„± ì‹œ ì‚¬ìš©ìëª…ê³¼ ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
      setMessageType("error");
      return;
    }
    try {
      const tenant = await createTenant({
        code: newTenantCode,
        name: newTenantName,
        domain: newTenantDomain || undefined,
      });
      if (createOwnerWithTenant && newOwnerUsername && newOwnerPassword) {
        try {
          await registerTenantOwner(tenant.id, {
            username: newOwnerUsername,
            password: newOwnerPassword,
            name: newOwnerName || undefined,
            phone: newOwnerPhone || undefined,
          });
          setMessage(`í…Œë„ŒíŠ¸ ${newTenantName} ìƒì„± ì™„ë£Œ. ì˜¤ë„ˆ ê³„ì •(${newOwnerUsername})ë„ í•¨ê»˜ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.`);
          setMessageType("success");
        } catch (ownerError: unknown) {
          const err = ownerError as { response?: { data?: { detail?: string } } };
          setMessage(`í…Œë„ŒíŠ¸ëŠ” ìƒì„±ë˜ì—ˆì§€ë§Œ ì˜¤ë„ˆ ê³„ì • ìƒì„± ì‹¤íŒ¨: ${err.response?.data?.detail || String(ownerError)}`);
          setMessageType("error");
        }
      } else {
        setMessage(`í…Œë„ŒíŠ¸ ${newTenantName} ìƒì„± ì™„ë£Œ.`);
        setMessageType("success");
      }
      setShowCreateForm(false);
      setNewTenantCode("");
      setNewTenantName("");
      setNewTenantDomain("");
      setCreateOwnerWithTenant(false);
      setNewOwnerUsername("");
      setNewOwnerPassword("");
      setNewOwnerName("");
      setNewOwnerPhone("");
      loadTenants();
      setSelectedTenantId(tenant.id);
    } catch (e: unknown) {
      const err = e as { response?: { data?: { detail?: string } } };
      setMessage("í…Œë„ŒíŠ¸ ìƒì„± ì‹¤íŒ¨: " + (err.response?.data?.detail || String(e)));
      setMessageType("error");
    }
  };

  const handleFile = useCallback(async (tenantId: number, file: File) => {
    if (!file.type.startsWith("image/")) {
      setMessage("ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì„ íƒí•´ ì£¼ì„¸ìš”.");
      setMessageType("error");
      return;
    }
    setUploading(tenantId);
    setMessage(null);
    setMessageType(null);
    try {
      const { logoUrl } = await uploadTenantLogo(tenantId, file);
      setLogoUrls((p) => ({ ...p, [tenantId]: logoUrl }));
      setMessage("ë¡œê³  ì—…ë¡œë“œ ì™„ë£Œ.");
      setMessageType("success");
    } catch (e: unknown) {
      const status = (e as { response?: { status?: number } })?.response?.status;
      setMessage(status === 404 || status === 501
        ? "ë°±ì—”ë“œ tenant-branding upload APIê°€ ì•„ì§ ì—†ìŠµë‹ˆë‹¤."
        : "ì—…ë¡œë“œ ì‹¤íŒ¨: " + String(e));
      setMessageType("error");
    } finally {
      setUploading(null);
    }
  }, []);

  const handleSaveTitle = useCallback(async (tenantId: number) => {
    setMessage(null);
    setMessageType(null);
    try {
      await patchTenantBranding(tenantId, {
        loginTitle: loginTitles[tenantId],
        loginSubtitle: loginSubtitles[tenantId],
        windowTitle: windowTitles[tenantId],
        displayName: displayNames[tenantId],
      });
      setMessage("ë¸Œëœë”© ì„¤ì • ì €ì¥ë¨.");
      setMessageType("success");
    } catch (e: unknown) {
      const status = (e as { response?: { status?: number } })?.response?.status;
      setMessage(status === 404 || status === 501
        ? "ë°±ì—”ë“œ tenant-branding PATCH APIê°€ ì•„ì§ ì—†ìŠµë‹ˆë‹¤."
        : "ì €ì¥ ì‹¤íŒ¨: " + String(e));
      setMessageType("error");
    }
  }, [loginTitles, loginSubtitles, windowTitles, displayNames]);

  const selectedTenant = tenants.find((t) => t.id === selectedTenantId) ?? null;

  if (loading && tenants.length === 0) {
    return (
      <div className="flex items-center justify-center min-h-[40vh]">
        <div className="text-slate-600">í…Œë„ŒíŠ¸ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
      </div>
    );
  }

  return (
    <div className="flex flex-col h-full min-h-0">
      <div className="shrink-0 mb-4">
        <h1 className="text-xl font-bold text-slate-900">Tenant Management</h1>
        <p className="text-sm text-slate-600">í…Œë„ŒíŠ¸ ê´€ë¦¬, ë¸Œëœë”©, ë„ë©”ì¸, Owner ë“±ë¡</p>
      </div>

      {message && (
        <div
          role="alert"
          className={`mb-4 p-4 rounded-lg text-sm flex items-start justify-between gap-3 ${
            messageType === "success"
              ? "bg-emerald-50 text-emerald-800 border border-emerald-200"
              : messageType === "error"
                ? "bg-red-50 text-red-800 border border-red-200"
                : "bg-slate-100 text-slate-800 border border-slate-200"
          }`}
        >
          <span className="flex-1">{message}</span>
          <button
            type="button"
            onClick={() => { setMessage(null); setMessageType(null); }}
            className="shrink-0 p-1 -m-1 rounded text-slate-500 hover:text-slate-700 hover:bg-black/5"
            aria-label="ë‹«ê¸°"
          >
            âœ•
          </button>
        </div>
      )}

      {showCreateForm && (
        <div className="mb-6 bg-white rounded-lg border border-slate-200 p-6 shadow-sm">
          <h2 className="text-lg font-semibold text-slate-900 mb-4">ìƒˆ í…Œë„ŒíŠ¸ ìƒì„±</h2>
          <div className="grid gap-4 sm:grid-cols-3 mb-4">
            <div>
              <label className="block text-sm font-semibold text-slate-900 mb-1">ì½”ë“œ *</label>
              <input type="text" value={newTenantCode} onChange={(e) => setNewTenantCode(e.target.value)} className="ds-input w-full" placeholder="ì˜ˆ: tchul" />
            </div>
            <div>
              <label className="block text-sm font-semibold text-slate-900 mb-1">ì´ë¦„ *</label>
              <input type="text" value={newTenantName} onChange={(e) => setNewTenantName(e.target.value)} className="ds-input w-full" placeholder="ì˜ˆ: ì²œì•ˆí•™ì›" />
            </div>
            <div>
              <label className="block text-sm font-semibold text-slate-900 mb-1">ë„ë©”ì¸ (ì„ íƒ)</label>
              <input type="text" value={newTenantDomain} onChange={(e) => setNewTenantDomain(e.target.value)} className="ds-input w-full" placeholder="ì˜ˆ: tchul.com" />
            </div>
          </div>
          <div className="pt-4 border-t border-slate-200">
            <label className="flex items-center gap-2 mb-3">
              <input type="checkbox" checked={createOwnerWithTenant} onChange={(e) => setCreateOwnerWithTenant(e.target.checked)} className="w-4 h-4" />
              <span className="text-sm font-semibold text-slate-900">í…Œë„ŒíŠ¸ ìƒì„± ì‹œ ì˜¤ë„ˆ ê³„ì •ë„ í•¨ê»˜ ìƒì„±</span>
            </label>
            {createOwnerWithTenant && (
              <div className="ml-6 grid gap-3 sm:grid-cols-2">
                <div><label className="block text-xs font-semibold text-slate-900 mb-1">ì‚¬ìš©ìëª… *</label><input type="text" value={newOwnerUsername} onChange={(e) => setNewOwnerUsername(e.target.value)} className="ds-input w-full" placeholder="ì˜ˆ: admin" /></div>
                <div><label className="block text-xs font-semibold text-slate-900 mb-1">ë¹„ë°€ë²ˆí˜¸ *</label><input type="password" value={newOwnerPassword} onChange={(e) => setNewOwnerPassword(e.target.value)} className="ds-input w-full" placeholder="ë¹„ë°€ë²ˆí˜¸" /></div>
                <div><label className="block text-xs font-semibold text-slate-900 mb-1">ì´ë¦„</label><input type="text" value={newOwnerName} onChange={(e) => setNewOwnerName(e.target.value)} className="ds-input w-full" placeholder="ì˜ˆ: í™ê¸¸ë™" /></div>
                <div><label className="block text-xs font-semibold text-slate-900 mb-1">ì „í™”ë²ˆí˜¸</label><input type="text" value={newOwnerPhone} onChange={(e) => setNewOwnerPhone(e.target.value)} className="ds-input w-full" placeholder="ì˜ˆ: 01012345678" /></div>
              </div>
            )}
          </div>
          <div className="flex gap-2 pt-4">
            <button type="button" onClick={handleCreateTenant} className="ds-button" data-intent="primary" data-size="md">í…Œë„ŒíŠ¸ ìƒì„±{createOwnerWithTenant ? " + ì˜¤ë„ˆ" : ""}</button>
            <button type="button" onClick={() => { setShowCreateForm(false); setNewTenantCode(""); setNewTenantName(""); setNewTenantDomain(""); setCreateOwnerWithTenant(false); setNewOwnerUsername(""); setNewOwnerPassword(""); setNewOwnerName(""); setNewOwnerPhone(""); }} className="ds-button" data-intent="secondary" data-size="md">ì·¨ì†Œ</button>
          </div>
        </div>
      )}

      <div className="grid grid-cols-1 md:grid-cols-[280px_1fr] gap-0 flex-1 min-h-0 rounded-lg border border-slate-200 overflow-hidden bg-white min-h-[480px]">
        <div className="h-[280px] md:h-full md:min-h-0 flex flex-col">
          <TenantListPanel
            tenants={tenants}
            selectedId={selectedTenantId}
            onSelect={(t) => { setSelectedTenantId(t.id); setActiveTab("overview"); }}
            loading={loading}
            onCreateClick={() => setShowCreateForm((v) => !v)}
            showCreateForm={showCreateForm}
          />
        </div>
        <div className="min-h-0 md:min-h-[420px] flex flex-col">
          <TenantDetailPanel
            tenant={selectedTenant}
            activeTab={activeTab}
            onTabChange={setActiveTab}
            branding={{
              logoUrls,
              loginTitles,
              loginSubtitles,
              windowTitles,
              displayNames,
            }}
            uploadingLogoId={uploading}
            ownersList={selectedTenantId != null ? (ownersByTenantId[selectedTenantId] ?? []) : []}
            ownersLoading={selectedTenantId != null ? (ownersLoadingById[selectedTenantId] ?? false) : false}
            onOpenOwnerSheet={() => setOwnerSheetOpen(true)}
            onRemoveOwner={async (tid, uid) => {
              await removeTenantOwner(tid, uid);
              loadOwnersForTenant(tid);
            }}
            onUpdateOwner={async (tid, uid, payload) => {
              await updateTenantOwner(tid, uid, payload);
              loadOwnersForTenant(tid);
            }}
            onLogoUpload={handleFile}
            onSaveBranding={handleSaveTitle}
            onDisplayNameChange={(id, v) => setDisplayNames((p) => ({ ...p, [id]: v }))}
            onWindowTitleChange={(id, v) => setWindowTitles((p) => ({ ...p, [id]: v }))}
            onLoginTitleChange={(id, v) => setLoginTitles((p) => ({ ...p, [id]: v }))}
            onLoginSubtitleChange={(id, v) => setLoginSubtitles((p) => ({ ...p, [id]: v }))}
          />
        </div>
      </div>

      {selectedTenant && (
        <AdminOwnerBottomSheet
          open={ownerSheetOpen}
          onClose={() => setOwnerSheetOpen(false)}
          tenantId={selectedTenant.id}
          tenantName={selectedTenant.name}
          onSuccess={(msg) => {
            if (msg) {
              setMessage(msg);
              setMessageType("success");
            }
            loadOwnersForTenant(selectedTenant.id);
            setOwnerSheetOpen(false);
          }}
        />
      )}
    </div>
  );
}


==========================================================================================
# FILE: pages/TenantDetailMenuPage.tsx
==========================================================================================
// PATH: src/admin_app/pages/TenantDetailMenuPage.tsx
// Tenant ìƒì„¸ â€” ë©”ë‰´ ì¹´ë“œ + ìƒë‹¨ì—ì„œ ë°”ë¡œ Owner ì…ë ¥ (íƒ­ ì—†ì´, ì‘ì—… ëŠë‚Œ)

import { useState, useEffect, useCallback } from "react";
import { Link, useParams, useNavigate } from "react-router-dom";
import { getTenants, getTenantOwners, removeTenantOwner, updateTenantOwner, type TenantDto, type TenantOwnerDto } from "@/admin_app/api/tenants";
import OwnerFormCompact from "@/admin_app/components/OwnerFormCompact";
import "@/styles/design-system/index.css";
import "@/styles/design-system/ds/input.css";

export default function TenantDetailMenuPage() {
  const { tenantId } = useParams<{ tenantId: string }>();
  const navigate = useNavigate();
  const [tenant, setTenant] = useState<TenantDto | null>(null);
  const [loading, setLoading] = useState(true);
  const [owners, setOwners] = useState<TenantOwnerDto[]>([]);
  const [editingUserId, setEditingUserId] = useState<number | null>(null);
  const [editName, setEditName] = useState("");
  const [editPhone, setEditPhone] = useState("");
  const [removingId, setRemovingId] = useState<number | null>(null);

  const loadTenant = useCallback(() => {
    const id = tenantId ? parseInt(tenantId, 10) : NaN;
    if (!tenantId || isNaN(id)) { setLoading(false); return; }
    let cancelled = false;
    getTenants()
      .then((list) => {
        const t = list.find((x) => x.id === id);
        if (!cancelled && t) setTenant(t);
      })
      .catch(() => { if (!cancelled) setTenant(null); })
      .finally(() => { if (!cancelled) setLoading(false); });
    return () => { cancelled = true; };
  }, [tenantId]);

  const loadOwners = useCallback(() => {
    const id = tenantId ? parseInt(tenantId, 10) : NaN;
    if (!tenantId || isNaN(id)) return;
    getTenantOwners(id).then(setOwners).catch(() => setOwners([]));
  }, [tenantId]);

  useEffect(() => { loadTenant(); }, [loadTenant]);
  useEffect(() => { loadOwners(); }, [loadOwners]);

  if (loading) {
    return (
      <div className="pb-24">
        <div className="mb-6 h-6 w-20 rounded bg-slate-100 animate-pulse" />
        <div className="h-12 rounded-lg bg-slate-100 animate-pulse mb-2" />
        <div className="space-y-2">
          {[1, 2, 3, 4].map((i) => (
            <div key={i} className="h-16 rounded-xl bg-slate-100 animate-pulse" />
          ))}
        </div>
      </div>
    );
  }
  if (!tenant) {
    return (
      <div className="pb-24 flex items-center justify-center min-h-[40vh]">
        <div className="text-slate-500">í…Œë„ŒíŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>
      </div>
    );
  }

  const id = tenant.id;
  const base = `/dev/branding/${id}`;

  return (
    <div className="pb-24">
      <div className="mb-6">
        <button type="button" onClick={() => navigate("/dev/branding")} className="text-sm text-slate-600 mb-2 flex items-center gap-1">
          â† ëª©ë¡
        </button>
        <h1 className="text-xl font-bold text-slate-900">{tenant.name}</h1>
        <p className="text-sm text-slate-500">{tenant.code}{tenant.primaryDomain ? ` Â· ${tenant.primaryDomain}` : ""}</p>
        <span className={`inline-block mt-2 text-xs font-medium px-2 py-1 rounded-full ${tenant.isActive ? "bg-emerald-100 text-emerald-700" : "bg-slate-200 text-slate-600"}`}>
          {tenant.isActive ? "í™œì„±" : "ë¹„í™œì„±"}
        </span>
      </div>

      {/* ë°”ë¡œ ë³´ì´ëŠ” ë©”ë‰´ ì¹´ë“œ */}
      <nav className="space-y-2 mb-6">
        <Link to={`${base}/branding`} className="flex items-center justify-between gap-3 p-4 bg-white rounded-xl border border-slate-200 shadow-sm min-h-[56px] active:bg-slate-50">
          <div>
            <div className="font-semibold text-slate-900">ë¸Œëœë”© ì„¤ì •</div>
            <div className="text-sm text-slate-500">ë¡œê³ , ë¡œê·¸ì¸ ë¬¸êµ¬</div>
          </div>
          <span className="text-slate-400" aria-hidden>â€º</span>
        </Link>
        <Link to={`${base}/domains`} className="flex items-center justify-between gap-3 p-4 bg-white rounded-xl border border-slate-200 shadow-sm min-h-[56px] active:bg-slate-50">
          <div>
            <div className="font-semibold text-slate-900">ë„ë©”ì¸ ê´€ë¦¬</div>
            <div className="text-sm text-slate-500">ì»¤ìŠ¤í…€ ë„ë©”ì¸</div>
          </div>
          <span className="text-slate-400" aria-hidden>â€º</span>
        </Link>
        <Link to={`${base}/advanced`} className="flex items-center justify-between gap-3 p-4 bg-white rounded-xl border border-slate-200 shadow-sm min-h-[56px] active:bg-slate-50">
          <div>
            <div className="font-semibold text-slate-900">ê³ ê¸‰ ì„¤ì •</div>
            <div className="text-sm text-slate-500">ìƒíƒœ, ë©”íƒ€</div>
          </div>
          <span className="text-slate-400" aria-hidden>â€º</span>
        </Link>
      </nav>

      {/* Owner â€” ìƒì„¸ì—ì„œ ë°”ë¡œ ì…ë ¥ (íƒ­ ì—†ìŒ) */}
      <section className="p-4 bg-white rounded-xl border border-slate-200 shadow-sm">
        <div className="mb-3 p-2.5 rounded-lg bg-blue-50 border border-blue-200 text-xs text-blue-800">
          ì´ ê³„ì •ì€ <strong>{tenant.name}</strong> ì „ìš©ì…ë‹ˆë‹¤. ë‹¤ë¥¸ í…Œë„ŒíŠ¸ì—ì„œëŠ” ë¡œê·¸ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
        </div>
        <h3 className="text-sm font-semibold text-slate-900 mb-2">ğŸ‘¤ Owner ê³„ì • ({owners.length}ëª…)</h3>
        {owners.length === 0 ? (
          <p className="text-sm text-slate-500 mb-3">ë“±ë¡ëœ Ownerê°€ ì—†ìŠµë‹ˆë‹¤.</p>
        ) : (
          <ul className="space-y-1.5 mb-4">
            {owners.map((o) => (
              <li key={o.userId} className="flex flex-wrap items-center justify-between gap-2 py-2 px-3 rounded-lg bg-slate-50 border border-slate-100">
                {editingUserId === o.userId ? (
                  <>
                    <div className="flex-1 min-w-0 space-y-1">
                      <div className="text-sm font-medium text-slate-900">{o.username}</div>
                      <input type="text" value={editName} onChange={(e) => setEditName(e.target.value)} placeholder="ì´ë¦„" className="ds-input w-full py-2 rounded-lg text-sm min-h-[44px]" />
                      <input type="text" value={editPhone} onChange={(e) => setEditPhone(e.target.value)} placeholder="ì „í™”" className="ds-input w-full py-2 rounded-lg text-sm min-h-[44px]" />
                    </div>
                    <div className="flex gap-2">
                      <button type="button" onClick={async () => { await updateTenantOwner(id, o.userId, { name: editName || undefined, phone: editPhone || undefined }); setEditingUserId(null); loadOwners(); }} className="px-3 py-2 rounded-lg bg-emerald-600 text-white text-sm min-h-[44px]">ì €ì¥</button>
                      <button type="button" onClick={() => setEditingUserId(null)} className="px-3 py-2 rounded-lg border border-slate-300 text-slate-700 text-sm min-h-[44px]">ì·¨ì†Œ</button>
                    </div>
                  </>
                ) : (
                  <>
                    <div>
                      <span className="font-medium text-slate-900">{o.username}</span>
                      {o.name ? <span className="text-xs text-slate-500 block">{o.name}</span> : null}
                    </div>
                    <div className="flex items-center gap-2">
                      <span className="text-xs bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full">OWNER</span>
                      <button type="button" onClick={() => { setEditingUserId(o.userId); setEditName(o.name || ""); setEditPhone(o.phone ?? ""); }} className="text-xs text-slate-600 py-1 px-2 rounded min-h-[32px]">ìˆ˜ì •</button>
                      <button
                        type="button"
                        onClick={async () => { if (!confirm("ì´ í…Œë„ŒíŠ¸ì—ì„œ Ownerë¥¼ ì œê±°í• ê¹Œìš”?")) return; setRemovingId(o.userId); try { await removeTenantOwner(id, o.userId); loadOwners(); } finally { setRemovingId(null); } }}
                        disabled={removingId === o.userId}
                        className="text-xs text-red-600 py-1 px-2 rounded min-h-[32px] disabled:opacity-50"
                      >
                        {removingId === o.userId ? "ì œê±° ì¤‘â€¦" : "ì œê±°"}
                      </button>
                    </div>
                  </>
                )}
              </li>
            ))}
          </ul>
        )}
        <OwnerFormCompact
          tenantId={id}
          tenantName={tenant.name}
          showResultBelow={true}
          onSuccess={loadOwners}
        />
      </section>
    </div>
  );
}


==========================================================================================
# FILE: pages/TenantDomainsPage.tsx
==========================================================================================
// PATH: src/admin_app/pages/TenantDomainsPage.tsx
// ë„ë©”ì¸ ê´€ë¦¬ â€” ëª©ë¡ í‘œì‹œ (ì¶”í›„ ì¶”ê°€/ì‚­ì œ API ì—°ë™)

import { useState, useEffect } from "react";
import { useParams, useNavigate } from "react-router-dom";
import { getTenants } from "@/admin_app/api/tenants";
import type { TenantDto } from "@/admin_app/api/tenants";
import "@/styles/design-system/index.css";

export default function TenantDomainsPage() {
  const { tenantId } = useParams<{ tenantId: string }>();
  const navigate = useNavigate();
  const [tenant, setTenant] = useState<TenantDto | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const id = tenantId ? parseInt(tenantId, 10) : NaN;
    if (!tenantId || isNaN(id)) {
      setLoading(false);
      return;
    }
    getTenants()
      .then((list) => setTenant(list.find((x) => x.id === id) ?? null))
      .catch(() => setTenant(null))
      .finally(() => setLoading(false));
  }, [tenantId]);

  if (loading) {
    return (
      <div className="pb-24">
        <div className="mb-6 h-6 w-24 rounded bg-slate-100 animate-pulse" />
        <div className="space-y-2">
          {[1, 2, 3].map((i) => (
            <div key={i} className="h-16 rounded-xl bg-slate-100 animate-pulse" />
          ))}
        </div>
      </div>
    );
  }
  if (!tenant) {
    return (
      <div className="pb-24 flex items-center justify-center min-h-[40vh]">
        <div className="text-slate-500">í…Œë„ŒíŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>
      </div>
    );
  }

  const domains = tenant.domains?.length ? tenant.domains : tenant.primaryDomain ? [tenant.primaryDomain] : [];

  return (
    <div className="pb-24">
      <div className="mb-6">
        <button type="button" onClick={() => navigate(`/dev/branding/${tenant.id}`)} className="text-sm text-slate-600 mb-2 flex items-center gap-1">
          â† ì„¤ì •
        </button>
        <h1 className="text-xl font-bold text-slate-900">ë„ë©”ì¸</h1>
        <p className="text-sm text-slate-500">{tenant.name}</p>
      </div>
      {domains.length === 0 ? (
        <div className="p-6 rounded-xl border border-dashed border-slate-200 text-center text-slate-500 text-sm">
          ë“±ë¡ëœ ë„ë©”ì¸ì´ ì—†ìŠµë‹ˆë‹¤.
        </div>
      ) : (
        <ul className="space-y-2">
          {domains.map((host) => (
            <li key={host} className="flex items-center justify-between p-4 bg-white rounded-xl border border-slate-200 shadow-sm min-h-[56px]">
              <span className="font-medium text-slate-900">{host}</span>
              <span className="text-xs text-emerald-600">Active Â· SSL</span>
            </li>
          ))}
        </ul>
      )}
    </div>
  );
}


==========================================================================================
# FILE: pages/TenantListPage.tsx
==========================================================================================
// PATH: src/admin_app/pages/TenantListPage.tsx
// STEP 1: Tenant ë¦¬ìŠ¤íŠ¸ â€” ì¹´ë“œí˜•, 48px í„°ì¹˜, ê²€ìƒ‰, Pull to Refresh, Swipe ì•¡ì…˜, í† ìŠ¤íŠ¸

import { useState, useMemo, useEffect, useRef, useCallback } from "react";
import { useNavigate } from "react-router-dom";
import {
  getTenants,
  createTenant,
  registerTenantOwner,
  updateTenant,
  type TenantDto,
} from "@/admin_app/api/tenants";
import AdminToast from "@/admin_app/components/AdminToast";
import "@/styles/design-system/index.css";
import "@/styles/design-system/ds/input.css";

const PULL_THRESHOLD = 70;
const SWIPE_REVEAL_PX = 80;

export default function TenantListPage() {
  const navigate = useNavigate();
  const [tenants, setTenants] = useState<TenantDto[]>([]);
  const [loading, setLoading] = useState(true);
  const [toast, setToast] = useState<{ message: string; kind: "success" | "error" } | null>(null);
  const [search, setSearch] = useState("");
  const [showCreateForm, setShowCreateForm] = useState(false);
  const [newTenantCode, setNewTenantCode] = useState("");
  const [newTenantName, setNewTenantName] = useState("");
  const [newTenantDomain, setNewTenantDomain] = useState("");
  const [createOwnerWithTenant, setCreateOwnerWithTenant] = useState(false);
  const [newOwnerUsername, setNewOwnerUsername] = useState("");
  const [newOwnerPassword, setNewOwnerPassword] = useState("");
  const [newOwnerName, setNewOwnerName] = useState("");
  const [newOwnerPhone, setNewOwnerPhone] = useState("");

  // Pull to refresh
  const [pullY, setPullY] = useState(0);
  const pullStartY = useRef(0);
  const atTop = useRef(true);

  // Swipe
  const [openSwipeId, setOpenSwipeId] = useState<number | null>(null);
  const [swipeDragId, setSwipeDragId] = useState<number | null>(null);
  const [swipeOffset, setSwipeOffset] = useState(0);
  const swipeStartX = useRef(0);
  const [togglingId, setTogglingId] = useState<number | null>(null);

  const loadTenants = useCallback(async (showRefreshing = true) => {
    try {
      if (showRefreshing) setLoading(true);
      const data = await getTenants();
      setTenants(data);
    } catch (e) {
      setToast({ message: "ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", kind: "error" });
    } finally {
      setLoading(false);
      setPullY(0);
    }
  }, []);

  useEffect(() => {
    loadTenants();
  }, [loadTenants]);

  const filtered = useMemo(() => {
    if (!search.trim()) return tenants;
    const q = search.trim().toLowerCase();
    return tenants.filter(
      (t) =>
        t.name.toLowerCase().includes(q) ||
        t.code.toLowerCase().includes(q) ||
        (t.primaryDomain && t.primaryDomain.toLowerCase().includes(q))
    );
  }, [tenants, search]);

  const handleCreateTenant = async () => {
    if (!newTenantCode || !newTenantName) {
      setToast({ message: "ì½”ë“œì™€ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.", kind: "error" });
      return;
    }
    if (createOwnerWithTenant && (!newOwnerUsername || !newOwnerPassword)) {
      setToast({ message: "ì˜¤ë„ˆ ê³„ì • ìƒì„± ì‹œ ì‚¬ìš©ìëª…ê³¼ ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.", kind: "error" });
      return;
    }
    try {
      const tenant = await createTenant({
        code: newTenantCode,
        name: newTenantName,
        domain: newTenantDomain || undefined,
      });
      if (createOwnerWithTenant && newOwnerUsername && newOwnerPassword) {
        try {
          await registerTenantOwner(tenant.id, {
            username: newOwnerUsername,
            password: newOwnerPassword,
            name: newOwnerName || undefined,
            phone: newOwnerPhone || undefined,
          });
          setToast({ message: `í…Œë„ŒíŠ¸ ìƒì„± ì™„ë£Œ. ì˜¤ë„ˆ(${newOwnerUsername}) ë“±ë¡ë¨.`, kind: "success" });
        } catch {
          setToast({ message: "í…Œë„ŒíŠ¸ëŠ” ìƒì„±ë˜ì—ˆì§€ë§Œ ì˜¤ë„ˆ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", kind: "error" });
        }
      } else {
        setToast({ message: `í…Œë„ŒíŠ¸ ${newTenantName} ìƒì„± ì™„ë£Œ.`, kind: "success" });
      }
      setShowCreateForm(false);
      setNewTenantCode("");
      setNewTenantName("");
      setNewTenantDomain("");
      setCreateOwnerWithTenant(false);
      setNewOwnerUsername("");
      setNewOwnerPassword("");
      setNewOwnerName("");
      setNewOwnerPhone("");
      loadTenants();
    } catch (e: unknown) {
      const err = e as { response?: { data?: { detail?: string } } };
      setToast({ message: "í…Œë„ŒíŠ¸ ìƒì„± ì‹¤íŒ¨: " + (err.response?.data?.detail || String(e)), kind: "error" });
    }
  };

  const handleToggleActive = async (tenant: TenantDto) => {
    setOpenSwipeId(null);
    setTogglingId(tenant.id);
    try {
      await updateTenant(tenant.id, { isActive: !tenant.isActive });
      setTenants((prev) => prev.map((t) => (t.id === tenant.id ? { ...t, isActive: !t.isActive } : t)));
      setToast({ message: tenant.isActive ? "ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤." : "í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.", kind: "success" });
    } catch (e) {
      setToast({ message: "ìƒíƒœ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.", kind: "error" });
    } finally {
      setTogglingId(null);
    }
  };

  const onPullStart = (e: React.TouchEvent) => {
    const scrollTop = typeof window !== "undefined" ? window.scrollY : 0;
    atTop.current = scrollTop <= 2;
    pullStartY.current = e.touches[0].clientY;
  };
  const onPullMove = (e: React.TouchEvent) => {
    if (!atTop.current) return;
    const y = e.touches[0].clientY;
    const delta = y - pullStartY.current;
    if (delta > 0) setPullY(Math.min(delta, PULL_THRESHOLD * 1.5));
  };
  const onPullEnd = () => {
    if (pullY >= PULL_THRESHOLD && !loading) loadTenants();
    else setPullY(0);
  };

  const onSwipeStart = (e: React.TouchEvent, id: number) => {
    swipeStartX.current = e.touches[0].clientX;
    setSwipeDragId(id);
    setSwipeOffset(0);
  };
  const onSwipeMove = (e: React.TouchEvent, id: number) => {
    if (swipeDragId !== id) return;
    const x = e.touches[0].clientX;
    const delta = x - swipeStartX.current;
    setSwipeOffset(Math.max(-SWIPE_REVEAL_PX, Math.min(0, delta)));
  };
  const onSwipeEnd = (id: number) => {
    if (swipeDragId !== id) return;
    setSwipeDragId(null);
    if (swipeOffset < -SWIPE_REVEAL_PX / 2) setOpenSwipeId(id);
    else setOpenSwipeId(null);
    setSwipeOffset(0);
  };

  return (
    <div
      className="pb-24 touch-pan-y"
      onTouchStart={onPullStart}
      onTouchMove={onPullMove}
      onTouchEnd={onPullEnd}
    >
      <AdminToast
        message={toast?.message ?? ""}
        kind={toast?.kind}
        visible={!!toast}
        onClose={() => setToast(null)}
      />

      {pullY > 0 && (
        <div className="flex justify-center py-2 text-sm text-slate-500">
          {pullY >= PULL_THRESHOLD ? "ë†“ìœ¼ë©´ ìƒˆë¡œê³ ì¹¨" : "â†“ ë‹¹ê²¨ì„œ ìƒˆë¡œê³ ì¹¨"}
        </div>
      )}

      <div className="mb-4">
        <h1 className="text-xl font-bold text-slate-900">Tenant</h1>
        <p className="text-sm text-slate-600">í…Œë„ŒíŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš”</p>
      </div>

      <div className="mb-4">
        <input
          type="search"
          placeholder="ğŸ” ê²€ìƒ‰"
          value={search}
          onChange={(e) => setSearch(e.target.value)}
          className="ds-input w-full text-base py-3 rounded-xl min-h-[48px]"
          aria-label="í…Œë„ŒíŠ¸ ê²€ìƒ‰"
        />
      </div>

      {showCreateForm && (
        <div className="mb-6 p-4 bg-white rounded-xl border border-slate-200 shadow-md space-y-4">
          <h2 className="text-lg font-semibold text-slate-900">ìƒˆ í…Œë„ŒíŠ¸</h2>
          <div className="space-y-3">
            <div><label className="block text-sm font-medium text-slate-700 mb-1">ì½”ë“œ *</label><input type="text" value={newTenantCode} onChange={(e) => setNewTenantCode(e.target.value)} className="ds-input w-full py-3 rounded-xl min-h-[48px]" placeholder="ì˜ˆ: tchul" /></div>
            <div><label className="block text-sm font-medium text-slate-700 mb-1">ì´ë¦„ *</label><input type="text" value={newTenantName} onChange={(e) => setNewTenantName(e.target.value)} className="ds-input w-full py-3 rounded-xl min-h-[48px]" placeholder="ì˜ˆ: ì²œì•ˆí•™ì›" /></div>
            <div><label className="block text-sm font-medium text-slate-700 mb-1">ë„ë©”ì¸ (ì„ íƒ)</label><input type="text" value={newTenantDomain} onChange={(e) => setNewTenantDomain(e.target.value)} className="ds-input w-full py-3 rounded-xl min-h-[48px]" placeholder="ì˜ˆ: tchul.com" /></div>
            <label className="flex items-center gap-3 min-h-[48px]">
              <input type="checkbox" checked={createOwnerWithTenant} onChange={(e) => setCreateOwnerWithTenant(e.target.checked)} className="w-5 h-5" />
              <span className="text-sm font-medium text-slate-900">í…Œë„ŒíŠ¸ ìƒì„± ì‹œ ì˜¤ë„ˆ ê³„ì •ë„ ìƒì„±</span>
            </label>
            {createOwnerWithTenant && (
              <div className="grid gap-3 sm:grid-cols-2">
                <div><label className="block text-xs font-medium text-slate-700 mb-1">ì‚¬ìš©ìëª… *</label><input type="text" value={newOwnerUsername} onChange={(e) => setNewOwnerUsername(e.target.value)} className="ds-input w-full py-3 min-h-[48px] rounded-xl" /></div>
                <div><label className="block text-xs font-medium text-slate-700 mb-1">ë¹„ë°€ë²ˆí˜¸ *</label><input type="password" value={newOwnerPassword} onChange={(e) => setNewOwnerPassword(e.target.value)} className="ds-input w-full py-3 min-h-[48px] rounded-xl" /></div>
                <div><label className="block text-xs font-medium text-slate-700 mb-1">ì´ë¦„</label><input type="text" value={newOwnerName} onChange={(e) => setNewOwnerName(e.target.value)} className="ds-input w-full py-3 min-h-[48px] rounded-xl" /></div>
                <div><label className="block text-xs font-medium text-slate-700 mb-1">ì „í™”ë²ˆí˜¸</label><input type="text" value={newOwnerPhone} onChange={(e) => setNewOwnerPhone(e.target.value)} className="ds-input w-full py-3 min-h-[48px] rounded-xl" /></div>
              </div>
            )}
          </div>
          <div className="flex gap-3 pt-2">
            <button type="button" onClick={handleCreateTenant} className="flex-1 ds-button min-h-[48px] rounded-xl" data-intent="primary" data-size="md">ìƒì„±</button>
            <button type="button" onClick={() => setShowCreateForm(false)} className="flex-1 ds-button min-h-[48px] rounded-xl" data-intent="secondary" data-size="md">ì·¨ì†Œ</button>
          </div>
        </div>
      )}

      {loading && !tenants.length ? (
        <div className="space-y-3">
          {[1, 2, 3, 4].map((i) => (
            <div key={i} className="h-20 rounded-xl bg-slate-100 animate-pulse" />
          ))}
        </div>
      ) : (
        <ul className="space-y-3">
          {filtered.map((tenant) => {
            const isOpen = openSwipeId === tenant.id;
            const isDragging = swipeDragId === tenant.id;
            const tx = isDragging ? swipeOffset : isOpen ? -SWIPE_REVEAL_PX : 0;
            return (
              <li key={tenant.id} className="rounded-xl overflow-hidden border border-slate-200 shadow-sm bg-white">
                <div className="relative flex items-stretch min-h-[56px]">
                  <div
                    className="flex-1 flex items-center justify-between gap-3 p-4 min-w-0 transition-transform duration-150"
                    style={{ transform: `translateX(${tx}px)` }}
                    onTouchStart={(e) => onSwipeStart(e, tenant.id)}
                    onTouchMove={(e) => onSwipeMove(e, tenant.id)}
                    onTouchEnd={() => onSwipeEnd(tenant.id)}
                  >
                    <div
                      role="button"
                      tabIndex={0}
                      onClick={() => {
                        if (openSwipeId === tenant.id) setOpenSwipeId(null);
                        else navigate(`/dev/branding/${tenant.id}`);
                      }}
                      onKeyDown={(e) => {
                        if (e.key === "Enter" || e.key === " ") {
                          e.preventDefault();
                          if (openSwipeId === tenant.id) setOpenSwipeId(null);
                          else navigate(`/dev/branding/${tenant.id}`);
                        }
                      }}
                      className="absolute inset-0 z-0"
                      aria-label={`${tenant.name} ì„¤ì •`}
                    />
                    <div className="relative z-10 min-w-0 flex-1 pointer-events-none">
                      <div className="font-semibold text-slate-900 truncate">{tenant.name}</div>
                      <div className="text-sm text-slate-500 truncate">{tenant.primaryDomain || tenant.code}</div>
                    </div>
                    <span className={`relative z-10 shrink-0 text-xs font-medium px-2 py-1 rounded-full ${tenant.isActive ? "bg-emerald-100 text-emerald-700" : "bg-slate-200 text-slate-600"}`}>
                      {tenant.isActive ? "í™œì„±" : "ë¹„í™œì„±"}
                    </span>
                    <span className="relative z-10 shrink-0 text-slate-400" aria-hidden>â€º</span>
                  </div>
                  <div className="flex shrink-0 w-20 items-stretch">
                    <button
                      type="button"
                      onClick={() => handleToggleActive(tenant)}
                      disabled={togglingId === tenant.id}
                      className={`w-full min-h-[48px] text-xs font-medium flex items-center justify-center ${
                        tenant.isActive ? "bg-amber-100 text-amber-800 active:bg-amber-200" : "bg-emerald-100 text-emerald-800 active:bg-emerald-200"
                      }`}
                    >
                      {togglingId === tenant.id ? "â€¦" : tenant.isActive ? "ë¹„í™œì„±í™”" : "í™œì„±í™”"}
                    </button>
                  </div>
                </div>
              </li>
            );
          })}
        </ul>
      )}

      {!loading && !showCreateForm && (
        <button
          type="button"
          onClick={() => setShowCreateForm(true)}
          className="mt-4 w-full flex items-center justify-center gap-2 py-4 rounded-xl border-2 border-dashed border-slate-300 text-slate-600 font-medium min-h-[48px] active:bg-slate-50"
        >
          + ìƒˆ í…Œë„ŒíŠ¸
        </button>
      )}
    </div>
  );
}


==========================================================================================
# FILE: router/AdminAppRouter.tsx
==========================================================================================
// PATH: src/admin_app/router/AdminAppRouter.tsx
// Developer-only app: tenant branding, logos, images.
// ëª¨ë°”ì¼: ë¦¬ìŠ¤íŠ¸ â†’ ìƒì„¸ ë©”ë‰´ â†’ ì‘ì—… í™”ë©´(ë¸Œëœë”©/ë„ë©”ì¸/Owner/ê³ ê¸‰) ë‹¨ê³„í˜•.

import { Routes, Route, Navigate } from "react-router-dom";
import AdminAppLayout from "@/admin_app/layout/AdminAppLayout";
import AdminAppHomePage from "@/admin_app/pages/AdminAppHomePage";
import TenantBrandingPage from "@/admin_app/pages/TenantBrandingPage";
import TenantListPage from "@/admin_app/pages/TenantListPage";
import TenantDetailMenuPage from "@/admin_app/pages/TenantDetailMenuPage";
import TenantBrandingFormPage from "@/admin_app/pages/TenantBrandingFormPage";
import TenantDomainsPage from "@/admin_app/pages/TenantDomainsPage";
import TenantAdvancedPage from "@/admin_app/pages/TenantAdvancedPage";

export default function AdminAppRouter() {
  return (
    <Routes>
      <Route element={<AdminAppLayout />}>
        <Route index element={<Navigate to="home" replace />} />
        <Route path="home" element={<AdminAppHomePage />} />
        {/* ëª¨ë°”ì¼ íë¦„: ë¦¬ìŠ¤íŠ¸ â†’ ìƒì„¸ ë©”ë‰´ â†’ ê° ì„¤ì • í™”ë©´ */}
        <Route path="branding" element={<TenantListPage />} />
        <Route path="branding/:tenantId" element={<TenantDetailMenuPage />} />
        <Route path="branding/:tenantId/branding" element={<TenantBrandingFormPage />} />
        <Route path="branding/:tenantId/domains" element={<TenantDomainsPage />} />
        <Route path="branding/:tenantId/advanced" element={<TenantAdvancedPage />} />
        {/* ë ˆê±°ì‹œ: ë‹¨ì¼ í˜ì´ì§€(ë°ìŠ¤í¬í†±ìš©) â€” í•„ìš” ì‹œ ë³„ë„ pathë¡œ ìœ ì§€ */}
        <Route path="branding-legacy" element={<TenantBrandingPage />} />
        <Route path="*" element={<Navigate to="home" replace />} />
      </Route>
    </Routes>
  );
}
